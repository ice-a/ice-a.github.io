<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>一些有趣且鲜为人知的 Python 特性 | 爱喝水的木子</title>
  <meta name="keywords" content=" github , pyhton , 特性 ">
  <meta name="description" content="一些有趣且鲜为人知的 Python 特性 | 爱喝水的木子">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="categories">
<meta property="og:url" content="https://ice-a.github.io/categories/index.html">
<meta property="og:site_name" content="爱喝水的木子">
<meta property="og:locale">
<meta property="article:published_time" content="2024-07-13T02:20:06.000Z">
<meta property="article:modified_time" content="2024-07-13T02:55:14.000Z">
<meta property="article:author" content="Leemuzi">
<meta name="twitter:card" content="summary">


<link rel="icon" href="https://img.lideshan.top/i/2024/07/12/6690eacd39d26.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/sublime.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 7.3.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="https://img.lideshan.top/i/2024/07/12/6690eacd39d26.jpg"/>
</a>
<div class="author">
    <span>Leemuzi</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/ice-a"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="zhihu"
               href="https://www.zhihu.com/people/love_water_blue"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-zhihu"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="csdn"
               href="https://blog.csdn.net/Linux_rm_rf_"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-csdn"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="juejin"
               href="https://juejin.cn/user/712139267643543"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-juejin"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="email"
               href="mailto:leebigshan@outlook.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=1943158197&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="kugou"
               href="https://www.kugou.com/"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-kugou"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="neteasemusic"
               href="https://music.163.com/#/user/home?id=356312112"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-neteasemusic"></use>
                    </svg>
                
            </a>
        
    
</div>





<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(86)</small>
            
        </div>
    </li>
    
        
            
                
    <li>
        <div data-rel="数据库">
            
            数据库
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="搞钱">
            
            搞钱
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="镜像">
            
            镜像
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="人工智能">
            
            人工智能
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="想法">
            <i class="fold iconfont icon-right"></i>
            想法
            <small>(1)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="想法&lt;---&gt;素材">
            
            素材
            <small>(1)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="AI">
            
            AI
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="code">
            <i class="fold iconfont icon-right"></i>
            code
            <small>(13)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="code&lt;---&gt;想法">
            
            想法
            <small>(1)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="database">
            
            database
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="dev">
            <i class="fold iconfont icon-right"></i>
            dev
            <small>(7)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="dev&lt;---&gt;code">
            <i class="fold iconfont icon-right"></i>
            code
            <small>(1)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="dev&lt;---&gt;code&lt;---&gt;tools">
            
            tools
            <small>(1)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="doc">
            
            doc
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="docker">
            
            docker
            <small>(6)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="document">
            
            document
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="env">
            
            env
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="git">
            
            git
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="learn">
            
            learn
            <small>(3)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="others">
            
            others
            <small>(4)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="pm2">
            
            pm2
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="python">
            <i class="fold iconfont icon-right"></i>
            python
            <small>(20)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="python&lt;---&gt;想法">
            <i class="fold iconfont icon-right"></i>
            想法
            <small>(1)</small>
        </div>
        
            <ul class="sub hide">
                
                    
    <li>
        <div data-rel="python&lt;---&gt;想法&lt;---&gt;code">
            
            code
            <small>(1)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

                
                    
    <li>
        <div data-rel="python&lt;---&gt;github">
            
            github
            <small>(1)</small>
        </div>
        
    </li>

                
            </ul>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="samba">
            
            samba
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="server">
            
            server
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="spider">
            
            spider
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
        
    
        
            
                
    <li>
        <div data-rel="windows">
            
            windows
            <small>(2)</small>
        </div>
        
    </li>

            
        
    
        
            
                
    <li>
        <div data-rel="�˹�����">
            
            �˹�����
            <small>(1)</small>
        </div>
        
    </li>

            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
    </div>
    <div>
        
            <a class="about  hasFriend  site_url"
               
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="86">
<input type="hidden" id="yelog_site_word_count" value="63.7k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://lidesshan.top/">leemuzi</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="search shortcut key i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="switch to outline view shortcut key w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="return"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="case sensitive"></i>
            <i class="iconfont icon-tag" data-title="label"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">outline</div>
            <i class="iconfont icon-list" data-title="switch to article list"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>版本</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>分类</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>广告</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>环境</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>计划</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>检测</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>模型</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>软件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>筛选</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>社区</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>视频</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>躺平</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>特性</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>图片</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>文件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>旋转</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>压缩</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>音频</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>勇敢</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>勇敢的人先享受世界</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>直播</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>自动问答</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>aes</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ai</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>asr</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>B站</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>code</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>conda</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>crontab</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cv</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>database</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>dev</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>devops</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>document</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>elasticsearch</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>env</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>exif</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ffmpeg</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>game</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>github</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>gpu</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hadoop</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>javascript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jupyter</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>kibana</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>labelme</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LangChain</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>learn</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>matplotlib</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mongo</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mongodb</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>mysql</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>neo4j</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>node</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nodejs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nvm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>office</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>openai</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>opencv</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>opensource</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>others</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>paddlehub</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>paddlepaddle</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pm2</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ppt</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pydub</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pyhton</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>restart</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>rtmp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>samba</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>scoop</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>server</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>spider</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sync</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>tts</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>UA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>windows</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        
        <a  class="All "
           href="/2099/06/07/%E8%BA%BA%E5%B9%B3%E8%AE%A1%E5%88%92/%E8%B6%85%E5%A4%A7%E6%B5%81%E9%87%8F%E5%8D%A1/"
           data-tag="广告"
           data-author="" >
            <span class="post-title" title="超级超大流量卡">超级超大流量卡</span>
            <span class="post-date" title="2099-06-07 00:00:00">2099/06/07</span>
        </a>
        
        
        <a  class="All others "
           href="/2099/01/01/%E7%8E%AF%E5%A2%83/vpn/"
           data-tag="others"
           data-author="" >
            <span class="post-title" title="vpn">vpn</span>
            <span class="post-date" title="2099-01-01 00:00:00">2099/01/01</span>
        </a>
        
        
        <a  class="All 镜像 "
           href="/2098/01/01/%E5%85%A5%E9%97%A8/%E9%95%9C%E5%83%8F%E7%AB%99/"
           data-tag="opensource"
           data-author="" >
            <span class="post-title" title="一些镜像站">一些镜像站</span>
            <span class="post-date" title="2098-01-01 00:00:00">2098/01/01</span>
        </a>
        
        
        <a  class="All "
           href="/2024/07/15/%E6%96%87%E6%A1%A3/hexo_github/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="hexo+github搭建自己的云笔记">hexo+github搭建自己的云笔记</span>
            <span class="post-date" title="2024-07-15 00:00:00">2024/07/15</span>
        </a>
        
        
        <a  class="All learn "
           href="/2024/07/12/learn/%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE%E5%88%B0vercel/"
           data-tag="learn,devops"
           data-author="" >
            <span class="post-title" title="部署项目到vercel">部署项目到vercel</span>
            <span class="post-date" title="2024-07-12 00:00:00">2024/07/12</span>
        </a>
        
        
        <a  class="All python github "
           href="/2024/07/12/%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/wtf_python/"
           data-tag="github,pyhton,特性"
           data-author="" >
            <span class="post-title" title="一些有趣且鲜为人知的 Python 特性">一些有趣且鲜为人知的 Python 特性</span>
            <span class="post-date" title="2024-07-12 00:00:00">2024/07/12</span>
        </a>
        
        
        <a  class="All 想法 素材 "
           href="/2024/06/13/%E5%8B%87%E6%95%A2%E7%9A%84%E4%BA%BA%E5%85%88%E4%BA%AB%E5%8F%97%E4%B8%96%E7%95%8C/%E5%87%BA%E5%8E%BB%E7%8E%A9%E8%B0%90%E9%9F%B3%E6%A2%97/"
           data-tag="勇敢的人先享受世界,勇敢"
           data-author="" >
            <span class="post-title" title="地方谐音梗">地方谐音梗</span>
            <span class="post-date" title="2024-06-13 15:46:08">2024/06/13</span>
        </a>
        
        
        <a  class="All "
           href="/2024/06/13/%E5%8B%87%E6%95%A2%E7%9A%84%E4%BA%BA%E5%85%88%E4%BA%AB%E5%8F%97%E4%B8%96%E7%95%8C/%E7%A6%8F%E5%BB%BA%E5%8E%A6%E9%97%A8/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="福建厦门的好玩好吃好逛">福建厦门的好玩好吃好逛</span>
            <span class="post-date" title="2024-06-13 15:46:08">2024/06/13</span>
        </a>
        
        
        <a  class="All "
           href="/2024/06/07/%E8%BA%BA%E5%B9%B3%E8%AE%A1%E5%88%92/%E8%BA%BA%E5%B9%B3%E8%AE%A1%E5%88%92/"
           data-tag="躺平,计划"
           data-author="" >
            <span class="post-title" title="躺平计划">躺平计划</span>
            <span class="post-date" title="2024-06-07 15:46:08">2024/06/07</span>
        </a>
        
        
        <a  class="All "
           href="/2024/06/06/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/bt%E9%93%BE%E6%8E%A5/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="种子搜索地址">种子搜索地址</span>
            <span class="post-date" title="2024-06-06 00:00:00">2024/06/06</span>
        </a>
        
        
        <a  class="All spider "
           href="/2024/06/06/%E7%88%AC%E8%99%AB/xiaojiejei/"
           data-tag="spider"
           data-author="" >
            <span class="post-title" title="xiaojiejei">xiaojiejei</span>
            <span class="post-date" title="2024-06-06 00:00:00">2024/06/06</span>
        </a>
        
        
        <a  class="All spider "
           href="/2024/06/06/%E7%88%AC%E8%99%AB/%E4%BC%98%E9%85%B7%E8%A7%86%E9%A2%91/"
           data-tag="spider"
           data-author="" >
            <span class="post-title" title="youku">youku</span>
            <span class="post-date" title="2024-06-06 00:00:00">2024/06/06</span>
        </a>
        
        
        <a  class="All "
           href="/2024/06/02/docker/docker%E6%9E%84%E5%BB%BA%E7%BD%91%E6%98%93%E4%BA%91%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%88%B0%E5%90%AC%E6%AD%8C/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="docker构建网易云自动签到听歌">docker构建网易云自动签到听歌</span>
            <span class="post-date" title="2024-06-02 15:46:08">2024/06/02</span>
        </a>
        
        
        <a  class="All python 想法 code "
           href="/2024/05/28/python/%E4%BD%BF%E7%94%A8opencv%E6%A3%80%E6%B5%8B%E5%9B%BE%E7%89%87%E4%B8%AD%E6%98%AF%E5%90%A6%E6%9C%89%E4%BA%BA%E7%89%A9/"
           data-tag="python,opencv"
           data-author="" >
            <span class="post-title" title="使用opencv检测图片中是否有人物">使用opencv检测图片中是否有人物</span>
            <span class="post-date" title="2024-05-28 15:46:08">2024/05/28</span>
        </a>
        
        
        <a  class="All "
           href="/2024/05/28/python/%E6%A0%B9%E6%8D%AE%E5%9B%BE%E7%89%87%E7%9A%84md5%E5%80%BC%E8%BF%9B%E8%A1%8C%E5%8E%BB%E9%87%8D/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="根据图片的md5值进行去重">根据图片的md5值进行去重</span>
            <span class="post-date" title="2024-05-28 15:46:08">2024/05/28</span>
        </a>
        
        
        <a  class="All dev code tools "
           href="/2024/05/28/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/shell%E9%85%8D%E7%BD%AE/"
           data-tag="dev"
           data-author="" >
            <span class="post-title" title="shell配置">shell配置</span>
            <span class="post-date" title="2024-05-28 15:46:08">2024/05/28</span>
        </a>
        
        
        <a  class="All "
           href="/2024/05/14/%E5%8B%87%E6%95%A2%E7%9A%84%E4%BA%BA%E5%85%88%E4%BA%AB%E5%8F%97%E4%B8%96%E7%95%8C/%E8%8B%8F%E5%B7%9E%E6%94%BB%E7%95%A5/"
           data-tag="勇敢的人先享受世界"
           data-author="" >
            <span class="post-title" title="苏州游玩攻略">苏州游玩攻略</span>
            <span class="post-date" title="2024-05-14 10:46:08">2024/05/14</span>
        </a>
        
        
        <a  class="All "
           href="/2024/05/13/%E5%8B%87%E6%95%A2%E7%9A%84%E4%BA%BA%E5%85%88%E4%BA%AB%E5%8F%97%E4%B8%96%E7%95%8C/%E6%B8%AF%E6%BE%B3%E9%80%9A%E8%A1%8C%E8%AF%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="港澳通行证办理">港澳通行证办理</span>
            <span class="post-date" title="2024-05-13 17:02:08">2024/05/13</span>
        </a>
        
        
        <a  class="All �˹����� "
           href="/2024/05/13/%E5%8B%87%E6%95%A2%E7%9A%84%E4%BA%BA%E5%85%88%E4%BA%AB%E5%8F%97%E4%B8%96%E7%95%8C/%E6%90%9E%E4%B8%AA%E5%B0%8F%E6%B8%B8%E6%88%8F/"
           data-tag="game,openai"
           data-author="" >
            <span class="post-title" title="Ū��С��Ϸ">Ū��С��Ϸ</span>
            <span class="post-date" title="2024-05-13 15:46:08">2024/05/13</span>
        </a>
        
        
        <a  class="All 人工智能 "
           href="/2024/05/13/%E5%8B%87%E6%95%A2%E7%9A%84%E4%BA%BA%E5%85%88%E4%BA%AB%E5%8F%97%E4%B8%96%E7%95%8C/%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E8%A7%86%E9%A2%91/"
           data-tag="openai,ai"
           data-author="" >
            <span class="post-title" title="利用ai自动生成视频">利用ai自动生成视频</span>
            <span class="post-date" title="2024-05-13 15:46:08">2024/05/13</span>
        </a>
        
        
        <a  class="All samba "
           href="/2024/02/02/samba/samba%E9%85%8D%E7%BD%AE%E5%AE%A1%E8%AE%A1/"
           data-tag="samba"
           data-author="" >
            <span class="post-title" title="samba">samba</span>
            <span class="post-date" title="2024-02-02 00:00:00">2024/02/02</span>
        </a>
        
        
        <a  class="All server "
           href="/2024/02/02/server/%E5%85%B3%E4%BA%8Eubuntu%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8samba%E5%B9%B6%E5%88%9B%E5%BB%BA%E4%B8%8D%E5%90%8C%E7%94%A8%E6%88%B7%E7%BB%84%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6/"
           data-tag="samba,linux"
           data-author="" >
            <span class="post-title" title="关于ubuntu服务器启动samba并创建不同用户组访问限制">关于ubuntu服务器启动samba并创建不同用户组访问限制</span>
            <span class="post-date" title="2024-02-02 00:00:00">2024/02/02</span>
        </a>
        
        
        <a  class="All others "
           href="/2024/01/01/%E6%8E%A5%E5%8F%A3/api/"
           data-tag="others"
           data-author="" >
            <span class="post-title" title="api">api</span>
            <span class="post-date" title="2024-01-01 00:00:00">2024/01/01</span>
        </a>
        
        
        <a  class="All others "
           href="/2024/01/01/%E6%8E%A5%E5%8F%A3/%E4%B8%80%E4%BA%9B%E6%8E%A5%E5%8F%A3/"
           data-tag="others"
           data-author="" >
            <span class="post-title" title="一些接口">一些接口</span>
            <span class="post-date" title="2024-01-01 00:00:00">2024/01/01</span>
        </a>
        
        
        <a  class="All document "
           href="/2023/06/06/%E6%96%87%E6%A1%A3/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"
           data-tag="document"
           data-author="" >
            <span class="post-title" title="小程序">小程序</span>
            <span class="post-date" title="2023-06-06 00:00:00">2023/06/06</span>
        </a>
        
        
        <a  class="All document "
           href="/2023/06/06/%E6%96%87%E6%A1%A3/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/"
           data-tag="document"
           data-author="" >
            <span class="post-title" title="document">document</span>
            <span class="post-date" title="2023-06-06 00:00:00">2023/06/06</span>
        </a>
        
        
        <a  class="All python "
           href="/2023/06/06/%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/matplotlib%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"
           data-tag="matplotlib,pyhton"
           data-author="" >
            <span class="post-title" title="matplotlib无法显示中文解决方法">matplotlib无法显示中文解决方法</span>
            <span class="post-date" title="2023-06-06 00:00:00">2023/06/06</span>
        </a>
        
        
        <a  class="All database "
           href="/2023/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/sql/SQL%E9%80%9F%E6%9F%A5/"
           data-tag="SQL,database"
           data-author="" >
            <span class="post-title" title="SQL速查">SQL速查</span>
            <span class="post-date" title="2023-06-06 00:00:00">2023/06/06</span>
        </a>
        
        
        <a  class="All 数据库 "
           href="/2023/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/sql/mysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"
           data-tag="mysql"
           data-author="" >
            <span class="post-title" title="mysql主从同步集群搭建">mysql主从同步集群搭建</span>
            <span class="post-date" title="2023-06-06 00:00:00">2023/06/06</span>
        </a>
        
        
        <a  class="All python "
           href="/2023/01/01/%E5%85%A5%E9%97%A8/conda%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C/"
           data-tag="conda"
           data-author="" >
            <span class="post-title" title="conda的一些操作">conda的一些操作</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All python "
           href="/2023/01/01/%E5%85%A5%E9%97%A8/python%E7%9B%B8%E8%A7%81%E6%81%A8%E6%99%9A%E7%9A%84%E5%BA%93/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python相见恨晚的库">python相见恨晚的库</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All env "
           href="/2023/01/01/%E7%8E%AF%E5%A2%83/conda%20env%20linux/"
           data-tag="env"
           data-author="" >
            <span class="post-title" title="conda env linux">conda env linux</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All env "
           href="/2023/01/01/%E7%8E%AF%E5%A2%83/conda-env/"
           data-tag="env"
           data-author="" >
            <span class="post-title" title="conda-env">conda-env</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All 镜像 "
           href="/2023/01/01/%E7%8E%AF%E5%A2%83/ubuntu%E5%AE%89%E8%A3%85nodejs%E7%89%88%E6%9C%AC%E8%BF%87%E4%BD%8E/"
           data-tag="环境,opensource,nodejs,版本"
           data-author="" >
            <span class="post-title" title="ubuntu安装nodejs版本过低问题">ubuntu安装nodejs版本过低问题</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All env "
           href="/2023/01/01/%E7%8E%AF%E5%A2%83/env/"
           data-tag="env"
           data-author="" >
            <span class="post-title" title="激活工具">激活工具</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All others "
           href="/2023/01/01/%E7%8E%AF%E5%A2%83/%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84ubuntu%E7%B3%BB%E7%BB%9F/"
           data-tag="others"
           data-author="" >
            <span class="post-title" title="multipass">multipass</span>
            <span class="post-date" title="2023-01-01 00:00:00">2023/01/01</span>
        </a>
        
        
        <a  class="All windows "
           href="/2022/10/16/windows/%E6%9C%AC%E5%9C%B0windwos%E6%8C%82%E8%BD%BDserver%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%A1%AC%E7%9B%98%E6%9B%B4%E6%96%B9%E4%BE%BF%E7%9A%84%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91/"
           data-tag="windows"
           data-author="" >
            <span class="post-title" title="本地windwos挂载server服务器硬盘更方便的进行开发">本地windwos挂载server服务器硬盘更方便的进行开发</span>
            <span class="post-date" title="2022-10-16 19:42:53">2022/10/16</span>
        </a>
        
        
        <a  class="All code 想法 "
           href="/2022/02/02/AI/LangChain-ChatLLM-webui/"
           data-tag="paddlepaddle,LangChain,python,gpu,自动问答"
           data-author="" >
            <span class="post-title" title="利用LangChain和大型语言模型系列模型, 提供基于本地知识的自动问答应用">利用LangChain和大型语言模型系列模型, 提供基于本地知识的自动问答应用</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All AI "
           href="/2022/02/02/AI/%E5%88%A9%E7%94%A8paddle%E7%9A%84%E5%A3%B0%E5%AD%A6%E6%A8%A1%E5%9E%8B%E5%90%88%E6%88%90tts%E5%A3%B0%E9%9F%B3/"
           data-tag="paddlepaddle,python,tts"
           data-author="" >
            <span class="post-title" title="利用paddle的声学模型合成tts声音">利用paddle的声学模型合成tts声音</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/AI/%E5%88%A9%E7%94%A8paddle%E7%9A%84%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E8%AF%86%E5%88%AB%E5%9B%BE%E7%89%87%E5%86%85%E5%AE%B9_chinese_text_detection_db_server/"
           data-tag="paddlepaddle,python,gpu,asr"
           data-author="" >
            <span class="post-title" title="利用paddle的识别模型识别图片内容(chinese_text_detection_db_server)">利用paddle的识别模型识别图片内容(chinese_text_detection_db_server)</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/AI/%E5%88%A9%E7%94%A8%E7%99%BE%E5%BA%A6%E9%A3%9E%E6%B5%86%E7%9A%84%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E7%94%9F%E6%88%90%E6%83%85%E8%AF%9D%E3%80%81%E5%AF%B9%E8%81%94%E7%AD%89%E4%BF%A1%E6%81%AF/"
           data-tag="python,paddlehub,模型"
           data-author="" >
            <span class="post-title" title="利用百度飞浆的预训练模型生成情话、对联等信息">利用百度飞浆的预训练模型生成情话、对联等信息</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/Javascript/%E5%B8%B8%E7%94%A8%E7%9A%84js%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/"
           data-tag="javascript,code"
           data-author="" >
            <span class="post-title" title="常用的js代码片段">常用的js代码片段</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All docker "
           href="/2022/02/02/docker/docker/"
           data-tag="docker"
           data-author="" >
            <span class="post-title" title="hertzbeat">hertzbeat</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/docker/docker_es_kib/"
           data-tag="elasticsearch,kibana"
           data-author="" >
            <span class="post-title" title="docker安装es及kibana">docker安装es及kibana</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All dev "
           href="/2022/02/02/docker/docker_hadoop/"
           data-tag="docker,hadoop,dev"
           data-author="" >
            <span class="post-title" title="docker-hadoop">docker-hadoop</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All docker "
           href="/2022/02/02/docker/docker_mongodb_simaple_use/"
           data-tag="docker,mongodb"
           data-author="" >
            <span class="post-title" title="简单搭建mongodb环境">简单搭建mongodb环境</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All docker "
           href="/2022/02/02/docker/docker_neo4j/"
           data-tag="docker,neo4j"
           data-author="" >
            <span class="post-title" title="简单搭建neo4j环境">简单搭建neo4j环境</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All docker "
           href="/2022/02/02/docker/docker_redis/"
           data-tag="docker,redis"
           data-author="" >
            <span class="post-title" title="简单搭建redis环境">简单搭建redis环境</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All docker "
           href="/2022/02/02/docker/docker%E9%85%8D%E7%BD%AE%E5%8A%A0%E9%80%9F/"
           data-tag="docker,windows,mongo,环境"
           data-author="" >
            <span class="post-title" title="docker配置加速">docker配置加速</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All git "
           href="/2022/02/02/git/git%20dev/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git">git</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/labelme/%E9%AB%98%E7%89%88%E6%9C%AClabelme%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E4%B8%BA%E4%BD%8E%E7%89%88%E6%9C%AC%E6%A0%BC%E5%BC%8F/"
           data-tag="python,labelme"
           data-author="" >
            <span class="post-title" title="高版本labelme格式转换为低版本格式">高版本labelme格式转换为低版本格式</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All docker "
           href="/2022/02/02/docker/mongodb_docker/"
           data-tag="docker,windows,mongo,环境"
           data-author="" >
            <span class="post-title" title="windows使用docker部署mongo数据持久化的坑">windows使用docker部署mongo数据持久化的坑</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All dev "
           href="/2022/02/02/docker/%E5%AE%B9%E5%99%A8%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF/"
           data-tag="docker,dev,restart"
           data-author="" >
            <span class="post-title" title="docker-容器自动重启">docker-容器自动重启</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All learn "
           href="/2022/02/02/learn/%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9C%B0%E5%9D%80/"
           data-tag="learn,社区"
           data-author="" >
            <span class="post-title" title="学习的一些地址">学习的一些地址</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All learn "
           href="/2022/02/02/learn/%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%87%A0%E4%B8%AA%E7%A4%BE%E5%8C%BA/"
           data-tag="learn,others"
           data-author="" >
            <span class="post-title" title="学习的几个社区">学习的几个社区</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/UserAgent-python%E8%A7%A3%E6%9E%90/"
           data-tag="UA"
           data-author="" >
            <span class="post-title" title="UserAgent-python解析">UserAgent-python解析</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/python%E5%B8%B8%E8%A7%81%E7%9A%84%E5%8A%A0%E8%A7%A3%E5%AF%86/"
           data-tag="python,aes"
           data-author="" >
            <span class="post-title" title="python常见的加解密">python常见的加解密</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E4%BD%BF%E7%94%A8cv%E7%BB%9F%E8%AE%A1%E8%A7%86%E9%A2%91%E6%97%B6%E9%95%BF/"
           data-tag="python,cv,文件,视频"
           data-author="" >
            <span class="post-title" title="使用cv统计视频时长">使用cv统计视频时长</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/python/%E4%BD%BF%E7%94%A8opencv%E5%B0%86%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E8%BD%AC%E5%8F%98%E4%B8%BA%E7%99%BD%E8%89%B2%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87/"
           data-tag="python,cv"
           data-author="" >
            <span class="post-title" title="使用opencv将透明背景图片转变为白色背景图片">使用opencv将透明背景图片转变为白色背景图片</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/python/%E5%85%B3%E4%BA%8Em4a%E6%96%87%E4%BB%B6%E8%BD%AC%E6%88%90wav%E6%96%87%E4%BB%B6/"
           data-tag="python,code,ffmpeg"
           data-author="" >
            <span class="post-title" title="关于m4a文件转成wav文件">关于m4a文件转成wav文件</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All AI "
           href="/2022/02/02/python/%E4%BD%BF%E7%94%A8opencv%E8%BF%9B%E8%A1%8C%E4%BA%BA%E8%84%B8%E6%A3%80%E6%B5%8B/"
           data-tag="python,cv,检测"
           data-author="" >
            <span class="post-title" title="使用opencv进行人脸检测">使用opencv进行人脸检测</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/python/%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87/"
           data-tag="python,压缩,图片"
           data-author="" >
            <span class="post-title" title="压缩图片">压缩图片</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/python/%E5%9B%BE%E7%89%87%E5%A4%A7%E5%B0%8F%E5%8E%8B%E7%BC%A9/"
           data-tag="python,压缩,图片"
           data-author="" >
            <span class="post-title" title="图片大小压缩">图片大小压缩</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/python/%E5%A4%9A%E5%BC%A0%E5%9B%BE%E7%89%87%E5%90%88%E6%88%90%E4%B8%80%E5%BC%A0/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="多张图片合成一张">多张图片合成一张</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E5%9B%BE%E7%89%87%E6%97%8B%E8%BD%AC%E6%91%86%E6%AD%A3%E6%A0%B9%E6%8D%AE%E5%9B%BE%E7%89%87%E7%9A%84exif%E4%BF%A1%E6%81%AF/"
           data-tag="python,图片,旋转,exif"
           data-author="" >
            <span class="post-title" title="图片旋转摆正根据图片的exif信息">图片旋转摆正根据图片的exif信息</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E5%AF%B9%E6%AF%94%E4%B8%A4%E4%B8%AAtxt%E8%8E%B7%E5%8F%96%E5%85%B1%E5%90%8C%E7%9A%84%E5%AD%97/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="对比两个txt获取共同的字">对比两个txt获取共同的字</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E5%B9%B6%E5%8F%91%E6%B5%8B%E8%AF%95%E7%BD%91%E7%AB%99/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python">python</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All doc "
           href="/2022/02/02/python/%E5%BF%AB%E9%80%9F%E8%8E%B7%E5%8F%96%E5%88%B0python%E5%BA%93%E7%9A%84%E6%96%87%E6%A1%A3/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="快速获取到python库的文档">快速获取到python库的文档</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E7%AD%9B%E9%80%89%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%E6%98%AF0%E7%9A%84/"
           data-tag="python,文件,筛选"
           data-author="" >
            <span class="post-title" title="筛选文件大小是0Kb的">筛选文件大小是0Kb的</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E7%BB%9F%E8%AE%A1%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%AD%E6%89%80%E6%9C%89%E9%9F%B3%E9%A2%91%E7%9A%84%E6%97%B6%E9%97%B4/"
           data-tag="python,文件,pydub,音频"
           data-author="" >
            <span class="post-title" title="统计一个文件夹中所有音频的时间(python)">统计一个文件夹中所有音频的时间(python)</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E9%9F%B3%E9%A2%91%E7%9A%84%E6%97%B6%E9%95%BF/"
           data-tag="python,pydub"
           data-author="" >
            <span class="post-title" title="获取一个音频的时长">获取一个音频的时长</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/python/%E8%A7%A3%E5%86%B3python%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="解决python读取文件编码问题">解决python读取文件编码问题</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/%E9%92%88%E5%AF%B9%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E8%BE%B9%E6%9C%89%E6%88%90%E5%8D%83%E4%B8%8A%E4%B8%87%E7%9A%84%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB/"
           data-tag="python,文件,分类"
           data-author="" >
            <span class="post-title" title="针对一个文件夹里边有成千上万的文件进行分类">针对一个文件夹里边有成千上万的文件进行分类</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All 搞钱 "
           href="/2022/02/02/server/ffmpeg%E6%8E%A8%E6%B5%81%E7%9B%B4%E6%92%AD/"
           data-tag="ffmpeg,B站,rtmp,直播"
           data-author="" >
            <span class="post-title" title="ffmpeg推流B站直播">ffmpeg推流B站直播</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All pm2 "
           href="/2022/02/02/server/pm2%E5%AE%9A%E6%97%B6%E6%8E%A8%E9%80%81%E5%88%B0git%E4%BB%93%E5%BA%93%E5%8F%8A%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8Cmongo%E5%A4%87%E4%BB%BD/"
           data-tag="pm2,crontab"
           data-author="" >
            <span class="post-title" title="pm2定时推送到git仓库及定时执行mongo备份">pm2定时推送到git仓库及定时执行mongo备份</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All dev "
           href="/2022/02/02/server/server%E5%AE%89%E8%A3%85node/"
           data-tag="nvm,node,server"
           data-author="" >
            <span class="post-title" title="server安装node及node版本管理">server安装node及node版本管理</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All dev "
           href="/2022/02/02/server/server%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AE%89%E8%A3%85jupyterlab/"
           data-tag="python,server,jupyter"
           data-author="" >
            <span class="post-title" title="server服务器安装jupyterlab">server服务器安装jupyterlab</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/02/02/server/%E9%80%9Bgithub%E9%81%87%E5%88%B0%E5%96%9C%E6%AC%A2%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%BD%86%E6%98%AF%E6%B2%A1%E6%97%B6%E9%97%B4%E5%8E%BB%E7%9C%8B%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"
           data-tag="python,github,sync"
           data-author="" >
            <span class="post-title" title="逛github遇到喜欢的项目但是没时间去看的解决方法">逛github遇到喜欢的项目但是没时间去看的解决方法</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All windows "
           href="/2022/02/02/windows/windows%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8scoop/"
           data-tag="windows,scoop"
           data-author="" >
            <span class="post-title" title="windows包管理器scoop">windows包管理器scoop</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All dev "
           href="/2022/02/02/windows/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%AE%89%E8%A3%85vscode%E8%BF%9C%E7%A8%8B%E5%86%99%E4%BB%A3%E7%A0%81/"
           data-tag="code,dev,server"
           data-author="" >
            <span class="post-title" title="服务器上安装vscode-远程写代码">服务器上安装vscode-远程写代码</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All dev "
           href="/2022/02/02/windows/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%85%E7%9A%84%E8%BD%AF%E4%BB%B6/"
           data-tag="dev,软件"
           data-author="" >
            <span class="post-title" title="重装系统需要安装的软件">重装系统需要安装的软件</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/office/ppt%E8%BD%ACpdf/"
           data-tag="python,ppt,office"
           data-author="" >
            <span class="post-title" title="ppt转pdf">ppt转pdf</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2022/02/02/python/office/%E7%94%9F%E6%88%90docx%E6%96%87%E4%BB%B6/"
           data-tag="python,ppt,office"
           data-author="" >
            <span class="post-title" title="生成docx文件">生成docx文件</span>
            <span class="post-date" title="2022-02-02 00:00:00">2022/02/02</span>
        </a>
        
        
        <a  class="All code "
           href="/2022/01/01/%E6%95%B0%E6%8D%AE%E5%BA%93/nosql/es%E7%9C%8B%E6%9D%BF%E6%93%8D%E4%BD%9C/"
           data-tag="elasticsearch,kibana"
           data-author="" >
            <span class="post-title" title="es看板的一些操作">es看板的一些操作</span>
            <span class="post-date" title="2022-01-01 00:00:00">2022/01/01</span>
        </a>
        
        
        <a  class="All python "
           href="/2019/02/02/python/opencv_%E7%94%BB%E5%9B%BE%E7%9B%B8%E5%85%B3/"
           data-tag="python,opencv"
           data-author="" >
            <span class="post-title" title="opencv 画图相关">opencv 画图相关</span>
            <span class="post-date" title="2019-02-02 00:00:00">2019/02/02</span>
        </a>
        
        
        <a  class="All python "
           href="/2019/02/02/python/opencv_video_%E7%9B%B8%E5%85%B3%E5%8F%82%E6%95%B0/"
           data-tag="python,cv"
           data-author="" >
            <span class="post-title" title="opencv video 相关参数">opencv video 相关参数</span>
            <span class="post-date" title="2019-02-02 00:00:00">2019/02/02</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="Toggle full screen shortcut key s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-疑难杂症/wtf_python" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">一些有趣且鲜为人知的 Python 特性</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="python">python</a> > 
            
            <a  data-rel="python&lt;---&gt;github">github</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color2">github</a>
            
            <a class="color2">pyhton</a>
            
            <a class="color3">特性</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2024-07-13 10:55:14'>2024-07-12 00:00</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:24.9k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text"></span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%A5%E6%BA%90github"><span class="toc-text">来源github</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Table-of-Contents-%E7%9B%AE%E5%BD%95"><span class="toc-text">Table of Contents&#x2F;目录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Structure-of-the-Examples-%E7%A4%BA%E4%BE%8B%E7%BB%93%E6%9E%84"><span class="toc-text">Structure of the Examples&#x2F;示例结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%B2%BE%E9%80%89%E7%9A%84%E6%A0%87%E9%A2%98"><span class="toc-text">&gt; 一个精选的标题 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E"><span class="toc-text">💡 说明:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Usage-%E7%94%A8%E6%B3%95"><span class="toc-text">Usage&#x2F;用法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%91%80-Examples-%E7%A4%BA%E4%BE%8B"><span class="toc-text">👀 Examples&#x2F;示例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Section-Strain-your-brain-%E5%A4%A7%E8%84%91%E8%BF%90%E5%8A%A8"><span class="toc-text">Section: Strain your brain!&#x2F;大脑运动!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#First-things-first-%E8%A6%81%E4%BA%8B%E4%BC%98%E5%85%88"><span class="toc-text">&gt; First things first!&#x2F;要事优先 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-1"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strings-can-be-tricky-sometimes-%E5%BE%AE%E5%A6%99%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">&gt; Strings can be tricky sometimes&#x2F;微妙的字符串 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-2"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Be-careful-with-chained-operations-%E5%B0%8F%E5%BF%83%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C"><span class="toc-text">&gt; Be careful with chained operations&#x2F;小心链式操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-3"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-not-to-use-is-operator-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E4%BD%BF%E7%94%A8-is-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">&gt; How not to use is operator&#x2F;为什么不使用 is 操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-4"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hash-brownies-%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E7%82%B9%E8%9B%8B%E7%B3%95%E4%BA%86"><span class="toc-text">&gt; Hash brownies&#x2F;是时候来点蛋糕了!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-5"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deep-down-we%E2%80%99re-all-the-same-%E6%9C%AC%E8%B4%A8%E4%B8%8A-%E6%88%91%E4%BB%AC%E9%83%BD%E4%B8%80%E6%A0%B7"><span class="toc-text">&gt; Deep down, we’re all the same.&#x2F;本质上,我们都一样. *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-6"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Disorder-within-order-%E6%9C%89%E5%BA%8F%E4%B8%AD%E6%BD%9C%E8%97%8F%E7%9D%80%E6%97%A0%E5%BA%8F"><span class="toc-text">&gt; Disorder within order&#x2F;有序中潜藏着无序 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-7"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Keep-trying%E2%80%A6-%E4%B8%8D%E5%81%9C%E7%9A%84try"><span class="toc-text">&gt; Keep trying…&#x2F;不停的try *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-8"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#For-what-%E4%B8%BA%E4%BB%80%E4%B9%88"><span class="toc-text">&gt; For what?&#x2F;为什么?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-9"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Evaluation-time-discrepancy-%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%B7%AE%E5%BC%82"><span class="toc-text">&gt; Evaluation time discrepancy&#x2F;执行时机差异</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-10"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-not-is-not-is-not-is-not-%E4%B8%8D%E6%98%AF-is-not"><span class="toc-text">&gt; is not ... is not is (not ...)&#x2F;is not ... 不是 is (not ...)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-11"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#A-tic-tac-toe-where-X-wins-in-the-first-attempt-%E4%B8%80%E8%B9%B4%E5%8D%B3%E8%87%B3"><span class="toc-text">&gt; A tic-tac-toe where X wins in the first attempt!&#x2F;一蹴即至!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-12"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Schrodinger%E2%80%99s-variable-%E8%96%9B%E5%AE%9A%E8%B0%94%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-text">&gt; Schrödinger’s variable&#x2F;薛定谔的变量 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-13"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-chicken-egg-problem-%E5%85%88%E6%9C%89%E9%B8%A1%E8%BF%98%E6%98%AF%E5%85%88%E6%9C%89%E8%9B%8B"><span class="toc-text">&gt; The chicken-egg problem&#x2F;先有鸡还是先有蛋 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-14"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subclass-relationships-%E5%AD%90%E7%B1%BB%E5%85%B3%E7%B3%BB"><span class="toc-text">&gt; Subclass relationships&#x2F;子类关系 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-15"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods-equality-and-identity-%E6%96%B9%E6%B3%95%E7%9A%84%E7%9B%B8%E7%AD%89%E6%80%A7%E5%92%8C%E5%94%AF%E4%B8%80%E6%80%A7"><span class="toc-text">&gt; Methods equality and identity&#x2F;方法的相等性和唯一性 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-16"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#All-true-ation-%E8%BF%94%E5%9B%9ETrue%E7%9A%84all%E5%87%BD%E6%95%B0"><span class="toc-text">&gt; All-true-ation&#x2F;返回True的all函数 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-17"><span class="toc-text">💡 说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-18"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Strings-and-the-backslashes-%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%8F%8D%E6%96%9C%E6%9D%A0"><span class="toc-text">&gt; Strings and the backslashes&#x2F;字符串与反斜杠</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-19"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not-knot-%E5%88%AB%E7%BA%A0%E7%BB%93"><span class="toc-text">&gt; not knot!&#x2F;别纠结!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-20"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Half-triple-quoted-strings-%E4%B8%89%E4%B8%AA%E5%BC%95%E5%8F%B7"><span class="toc-text">&gt; Half triple-quoted strings&#x2F;三个引号</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-21"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What%E2%80%99s-wrong-with-booleans-%E5%B8%83%E5%B0%94%E4%BD%A0%E5%92%8B%E4%BA%86"><span class="toc-text">&gt; What’s wrong with booleans?&#x2F;布尔你咋了?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-22"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Class-attributes-and-instance-attributes-%E7%B1%BB%E5%B1%9E%E6%80%A7%E5%92%8C%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7"><span class="toc-text">&gt; Class attributes and instance attributes&#x2F;类属性和实例属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-23"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#yielding-None-%E7%94%9F%E6%88%90-None"><span class="toc-text">&gt; yielding None&#x2F;生成 None</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-24"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Yielding-from%E2%80%A6-return-%E7%94%9F%E6%88%90%E5%99%A8%E9%87%8C%E7%9A%84return"><span class="toc-text">&gt; Yielding from… return!&#x2F;生成器里的return *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-25"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nan-reflexivity-Nan%E7%9A%84%E8%87%AA%E5%8F%8D%E6%80%A7"><span class="toc-text">&gt; Nan-reflexivity&#x2F;Nan的自反性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-26"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutating-the-immutable-%E5%BC%BA%E4%BA%BA%E6%89%80%E9%9A%BE"><span class="toc-text">&gt; Mutating the immutable!&#x2F;强人所难</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-27"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-disappearing-variable-from-outer-scope-%E6%B6%88%E5%A4%B1%E7%9A%84%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-text">&gt; The disappearing variable from outer scope&#x2F;消失的外部变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-28"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-mysterious-key-type-conversion-%E7%A5%9E%E7%A7%98%E7%9A%84%E9%94%AE%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text">&gt; The mysterious key type conversion&#x2F;神秘的键型转换 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-29"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Let%E2%80%99s-see-if-you-can-guess-this-%E7%9C%8B%E7%9C%8B%E4%BD%A0%E8%83%BD%E5%90%A6%E7%8C%9C%E5%88%B0%E8%BF%99%E4%B8%80%E7%82%B9"><span class="toc-text">&gt; Let’s see if you can guess this?&#x2F;看看你能否猜到这一点?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-30"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exceeds-the-limit-for-integer-string-conversion-%E6%95%B4%E5%9E%8B%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%B6%8A%E7%95%8C"><span class="toc-text">&gt; Exceeds the limit for integer string conversion&#x2F;整型转字符串越界</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-31"><span class="toc-text">💡 说明:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Section-Slippery-Slopes-%E6%BB%91%E5%9D%A1%E8%B0%AC%E8%AF%AF"><span class="toc-text">Section: Slippery Slopes&#x2F;滑坡谬误</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Modifying-a-dictionary-while-iterating-over-it-%E8%BF%AD%E4%BB%A3%E5%AD%97%E5%85%B8%E6%97%B6%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-text">&gt; Modifying a dictionary while iterating over it&#x2F;迭代字典时的修改</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-32"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stubborn-del-operator-%E5%9D%9A%E5%BC%BA%E7%9A%84-del"><span class="toc-text">&gt; Stubborn del operator&#x2F;坚强的 del *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-33"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-out-of-scope-variable-%E5%A4%96%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%98%E9%87%8F"><span class="toc-text">&gt; The out of scope variable&#x2F;外部作用域变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-34"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deleting-a-list-item-while-iterating-%E8%BF%AD%E4%BB%A3%E5%88%97%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text">&gt; Deleting a list item while iterating&#x2F;迭代列表时删除元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-35"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lossy-zip-of-iterators-%E4%B8%A2%E4%B8%89%E8%90%BD%E5%9B%9B%E7%9A%84zip"><span class="toc-text">&gt; Lossy zip of iterators&#x2F;丢三落四的zip *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-36"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Loop-variables-leaking-out-%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F%E6%B3%84%E6%BC%8F"><span class="toc-text">&gt; Loop variables leaking out!&#x2F;循环变量泄漏!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-37"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Beware-of-default-mutable-arguments-%E5%BD%93%E5%BF%83%E9%BB%98%E8%AE%A4%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-text">&gt; Beware of default mutable arguments!&#x2F;当心默认的可变参数!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-38"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Catching-the-Exceptions-%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8"><span class="toc-text">&gt; Catching the Exceptions&#x2F;捕获异常</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-39"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Same-operands-different-story-%E5%90%8C%E4%BA%BA%E4%B8%8D%E5%90%8C%E5%91%BD"><span class="toc-text">&gt; Same operands, different story!&#x2F;同人不同命!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-40"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Name-resolution-ignoring-class-scope-%E5%BF%BD%E7%95%A5%E7%B1%BB%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90"><span class="toc-text">&gt; Name resolution ignoring class scope&#x2F;忽略类作用域的名称解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-41"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rounding-like-a-banker-%E5%83%8F%E9%93%B6%E8%A1%8C%E5%AE%B6%E4%B8%80%E6%A0%B7%E8%88%8D%E5%85%A5"><span class="toc-text">&gt; Rounding like a banker&#x2F;像银行家一样舍入 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-42"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Needles-in-a-Haystack-%E5%A4%A7%E6%B5%B7%E6%8D%9E%E9%92%88"><span class="toc-text">&gt; Needles in a Haystack&#x2F;大海捞针</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-43"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Splitsies-%E5%88%86%E5%89%B2%E5%87%BD%E6%95%B0"><span class="toc-text">&gt; Splitsies&#x2F;分割函数 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-44"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Wild-imports-%E9%80%9A%E9%85%8D%E7%AC%A6%E5%AF%BC%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-text">&gt; Wild imports&#x2F;通配符导入方式 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-45"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#All-sorted-%E9%83%BD%E6%8E%92%E5%BA%8F%E4%BA%86%E5%90%97%EF%BC%9F"><span class="toc-text">&gt; All sorted?&#x2F;都排序了吗？ *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-46"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Midnight-time-doesn%E2%80%99t-exist-%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%8D%88%E5%A4%9C"><span class="toc-text">&gt; Midnight time doesn’t exist?&#x2F;不存在的午夜?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-47"><span class="toc-text">💡 说明:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Section-The-Hidden-treasures-%E9%9A%90%E8%97%8F%E7%9A%84%E5%AE%9D%E8%97%8F"><span class="toc-text">Section: The Hidden treasures!&#x2F;隐藏的宝藏!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Okay-Python-Can-you-make-me-fly-Python-%E5%8F%AF%E5%90%A6%E5%B8%A6%E6%88%91%E9%A3%9E"><span class="toc-text">&gt; Okay Python, Can you make me fly?&#x2F;Python, 可否带我飞? *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-48"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#goto-but-why-goto-%E4%BD%86%E4%B8%BA%E4%BB%80%E4%B9%88"><span class="toc-text">&gt; goto, but why?&#x2F;goto, 但为什么? *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-49"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Brace-yourself-%E5%81%9A%E5%A5%BD%E6%80%9D%E6%83%B3%E5%87%86%E5%A4%87"><span class="toc-text">&gt; Brace yourself!&#x2F;做好思想准备 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-50"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Let%E2%80%99s-meet-Friendly-Language-Uncle-For-Life-%E8%AE%A9%E7%94%9F%E6%B4%BB%E6%9B%B4%E5%8F%8B%E5%A5%BD"><span class="toc-text">&gt; Let’s meet Friendly Language Uncle For Life&#x2F;让生活更友好 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-51"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Even-Python-understands-that-love-is-complicated-%E8%BF%9EPython%E4%B9%9F%E7%9F%A5%E9%81%93%E7%88%B1%E6%98%AF%E9%9A%BE%E8%A8%80%E7%9A%84"><span class="toc-text">&gt; Even Python understands that love is complicated&#x2F;连Python也知道爱是难言的 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-52"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Yes-it-exists-%E6%98%AF%E7%9A%84-%E5%AE%83%E5%AD%98%E5%9C%A8"><span class="toc-text">&gt; Yes, it exists!&#x2F;是的, 它存在!</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-53"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ellipsis-%E7%9C%81%E7%95%A5"><span class="toc-text">&gt; Ellipsis&#x2F;省略 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-54"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Inpinity-%E6%97%A0%E9%99%90"><span class="toc-text">&gt; Inpinity&#x2F;无限 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-55"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Let%E2%80%99s-mangle-%E4%BF%AE%E9%A5%B0%E6%97%B6%E9%97%B4"><span class="toc-text">&gt; Let’s mangle&#x2F;修饰时间! *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-56"><span class="toc-text">💡 说明:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Section-Appearances-are-deceptive-%E5%A4%96%E8%A1%A8%E6%98%AF%E9%9D%A0%E4%B8%8D%E4%BD%8F%E7%9A%84"><span class="toc-text">Section: Appearances are deceptive!&#x2F;外表是靠不住的!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Skipping-lines-%E8%B7%B3%E8%BF%87%E4%B8%80%E8%A1%8C"><span class="toc-text">&gt; Skipping lines?&#x2F;跳过一行?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-57"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Teleportation-%E7%A9%BA%E9%97%B4%E7%A7%BB%E5%8A%A8"><span class="toc-text">&gt; Teleportation&#x2F;空间移动 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-58"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Well-something-is-fishy%E2%80%A6-%E5%97%AF%EF%BC%8C%E6%9C%89%E4%BA%9B%E5%8F%AF%E7%96%91%E2%80%A6"><span class="toc-text">&gt; Well, something is fishy…&#x2F;嗯，有些可疑…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-59"><span class="toc-text">💡 说明:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Section-Miscellaneous-%E6%9D%82%E9%A1%B9"><span class="toc-text">Section: Miscellaneous&#x2F;杂项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#is-faster-%E6%9B%B4%E5%BF%AB%E7%9A%84"><span class="toc-text">&gt; +&#x3D; is faster&#x2F;更快的 +&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-60"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Let%E2%80%99s-make-a-giant-string-%E6%9D%A5%E5%81%9A%E4%B8%AA%E5%B7%A8%E5%A4%A7%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%90%A7%EF%BC%81"><span class="toc-text">&gt; Let’s make a giant string!&#x2F;来做个巨大的字符串吧！</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-61"><span class="toc-text">💡 说明:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Slowing-down-dict-lookups-%E8%AE%A9%E5%AD%97%E5%85%B8%E7%9A%84%E6%9F%A5%E6%89%BE%E6%85%A2%E4%B8%8B%E6%9D%A5"><span class="toc-text">&gt; Slowing down dict lookups&#x2F;让字典的查找慢下来 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-62"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bloating-instance-dicts-%E5%8F%98%E8%87%83%E8%82%BF%E7%9A%84dict%E5%AE%9E%E4%BE%8B%E4%BB%AC"><span class="toc-text">&gt; Bloating instance dicts&#x2F;变臃肿的dict实例们 *</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%F0%9F%92%A1-%E8%AF%B4%E6%98%8E-63"><span class="toc-text">💡 说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Minor-Ones-%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">&gt; Minor Ones&#x2F;小知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Contributing-%E8%B4%A1%E7%8C%AE"><span class="toc-text">Contributing&#x2F;贡献</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Acknowledgements-%E8%87%B4%E8%B0%A2"><span class="toc-text">Acknowledgements&#x2F;致谢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Some-nice-Links-%E4%B8%80%E4%BA%9B%E4%B8%8D%E9%94%99%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-text">Some nice Links!&#x2F;一些不错的资源</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8E%93-License-%E8%AE%B8%E5%8F%AF"><span class="toc-text">🎓 License&#x2F;许可</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Help-%E5%B8%AE%E5%8A%A9"><span class="toc-text">Help&#x2F;帮助</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Surprise-your-geeky-pythonist-friends-%E6%83%B3%E7%BB%99%E4%BD%A0%E7%9A%84%E6%9E%81%E5%AE%A2%E6%9C%8B%E5%8F%8B%E4%B8%80%E4%B8%AA%E6%83%8A%E5%96%9C"><span class="toc-text">Surprise your geeky pythonist friends?&#x2F;想给你的极客朋友一个惊喜?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Need-a-pdf-version-%E9%9C%80%E8%A6%81%E6%9D%A5%E4%B8%80%E4%BB%BDpdf%E7%89%88%E7%9A%84"><span class="toc-text">Need a pdf version?&#x2F;需要来一份pdf版的?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Follow-Commit-%E8%BF%BD%E8%B8%AACommit"><span class="toc-text">Follow Commit&#x2F;追踪Commit</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="来源github"><a href="#来源github" class="headerlink" title="来源github"></a>来源github</h1><p><a target="_blank" rel="noopener" href="https://github.com/leisurelicht/wtfpython-cn">github地址</a></p>
<p>Python, 是一个设计优美的解释型高级语言, 它提供了很多能让程序员感到舒适的功能特性. 但有的时候, Python 的一些输出结果对于初学者来说似乎并不是那么一目了然.</p>
<p>这个有趣的项目意在收集 Python 中那些难以理解和反人类直觉的例子以及鲜为人知的功能特性, 并尝试讨论这些现象背后真正的原理!</p>
<p>虽然下面的有些例子并不一定会让你觉得 WTFs, 但它们依然有可能会告诉你一些你所不知道的 Python 有趣特性.  我觉得这是一种学习编程语言内部原理的好办法, 而且我相信你也会从中获得乐趣!</p>
<p>如果您是一位经验比较丰富的 Python 程序员, 你可以尝试挑战看是否能一次就找到例子的正确答案. 你可能对其中的一些例子已经比较熟悉了, 那这也许能唤起你当年踩这些坑时的甜蜜回忆 :sweat_smile:</p>
<p>PS: 如果你不是第一次读了, 你可以在<a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/releases/">这里</a>获取变动内容.</p>
<p>那么, 让我们开始吧…</p>
<h1 id="Table-of-Contents-目录"><a href="#Table-of-Contents-目录" class="headerlink" title="Table of Contents&#x2F;目录"></a>Table of Contents&#x2F;目录</h1><!-- TOC -->

<ul>
<li><a href="#table-of-contents%E7%9B%AE%E5%BD%95">Table of Contents&#x2F;目录</a></li>
<li><a href="#structure-of-the-examples%E7%A4%BA%E4%BE%8B%E7%BB%93%E6%9E%84">Structure of the Examples&#x2F;示例结构</a></li>
<li><a href="#usage%E7%94%A8%E6%B3%95">Usage&#x2F;用法</a></li>
<li><a href="#-examples%E7%A4%BA%E4%BE%8B">👀 Examples&#x2F;示例</a><ul>
<li><a href="#section-strain-your-brain%E5%A4%A7%E8%84%91%E8%BF%90%E5%8A%A8">Section: Strain your brain!&#x2F;大脑运动!</a><ul>
<li><a href="#-First-things-first!/%E8%A6%81%E4%BA%8B%E4%BC%98%E5%85%88-*">&gt; First things first!&#x2F;要事优先 *</a></li>
<li><a href="#-strings-can-be-tricky-sometimes%E5%BE%AE%E5%A6%99%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2-">&gt; Strings can be tricky sometimes&#x2F;微妙的字符串 *</a></li>
<li><a href="#-be-careful-with-chained-operations%E5%B0%8F%E5%BF%83%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C">&gt; Be careful with chained operations&#x2F;小心链式操作</a></li>
<li><a href="#-How-not-to-use-is-operator/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E4%BD%BF%E7%94%A8-is-%E6%93%8D%E4%BD%9C%E7%AC%A6-">&gt; How not to use <code>is</code> operator&#x2F;为什么不使用 <code>is</code> 操作符</a></li>
<li><a href="#-Hash-brownies%E6%98%AF%E6%97%B6%E5%80%99%E6%9D%A5%E7%82%B9%E8%9B%8B%E7%B3%95%E4%BA%86">&gt; Hash brownies&#x2F;是时候来点蛋糕了!</a></li>
<li><a href="#-deep-down-were-all-the-same%E6%9C%AC%E8%B4%A8%E4%B8%8A%E6%88%91%E4%BB%AC%E9%83%BD%E4%B8%80%E6%A0%B7-">&gt; Deep down, we’re all the same.&#x2F;本质上,我们都一样. *</a></li>
<li><a href="#-disorder-within-order/%E6%9C%89%E5%BA%8F%E4%B8%AD%E6%BD%9C%E8%97%8F%E7%9D%80%E6%97%A0%E5%BA%8F-*">&gt; Disorder within order&#x2F;有序中潜藏着无序 *</a></li>
<li><a href="#-Keep-trying%E4%B8%8D%E5%81%9C%E7%9A%84try-">&gt; Keep trying…&#x2F;不停的try *</a></li>
<li><a href="#-for-what%E4%B8%BA%E4%BB%80%E4%B9%88">&gt; For what?&#x2F;为什么?</a></li>
<li><a href="#-evaluation-time-discrepancy%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%B7%AE%E5%BC%82">&gt; Evaluation time discrepancy&#x2F;执行时机差异</a></li>
<li><a href="#-is-not--is-not-is-not-is-not--%E4%B8%8D%E6%98%AF-is-not-">&gt; <code>is not ...</code> is not <code>is (not ...)</code> &#x2F; <code>is not ...</code> 不是 <code>is (not ...)</code></a></li>
<li><a href="#-a-tic-tac-toe-where-x-wins-in-the-first-attempt%E4%B8%80%E8%B9%B4%E5%8D%B3%E8%87%B3">&gt; A tic-tac-toe where X wins in the first attempt!&#x2F;一蹴即至!</a></li>
<li><a href="#-Schr%C3%B6dingers-variable%E8%96%9B%E5%AE%9A%E8%B0%94%E7%9A%84%E5%8F%98%E9%87%8F-">&gt; Schrödinger’s variable&#x2F;薛定谔的变量 *</a></li>
<li><a href="#-the-chicken-egg-problem/%E5%85%88%E6%9C%89%E9%B8%A1%E8%BF%98%E6%98%AF%E5%85%88%E6%9C%89%E8%9B%8B-*">&gt; The chicken-egg problem&#x2F;先有鸡还是先有蛋 *</a></li>
<li><a href="#-subclass-relationships%E5%AD%90%E7%B1%BB%E5%85%B3%E7%B3%BB-">&gt; Subclass relationships&#x2F;子类关系 *</a></li>
<li><a href="#-Methods-equality-and-identity/%E6%96%B9%E6%B3%95%E7%9A%84%E7%9B%B8%E7%AD%89%E6%80%A7%E5%92%8C%E5%94%AF%E4%B8%80%E6%80%A7-">&gt; Methods equality and identity&#x2F;方法的相等性和唯一性 *</a></li>
<li><a href="#-All-true-ation/%E8%BF%94%E5%9B%9ETrue%E7%9A%84all%E5%87%BD%E6%95%B0-">&gt; All-true-ation&#x2F;返回True的all函数 *</a></li>
<li><a href="#-the-surprising-comma%E6%84%8F%E5%A4%96%E7%9A%84%E9%80%97%E5%8F%B7">&gt; The surprising comma&#x2F;意外的逗号</a></li>
<li><a href="#-strings-and-the-backslashes%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%8F%8D%E6%96%9C%E6%9D%A0">&gt; Strings and the backslashes&#x2F;字符串与反斜杠</a></li>
<li><a href="#-not-knot%E5%88%AB%E7%BA%A0%E7%BB%93">&gt; not knot!&#x2F;别纠结!</a></li>
<li><a href="#-half-triple-quoted-strings%E4%B8%89%E4%B8%AA%E5%BC%95%E5%8F%B7">&gt; Half triple-quoted strings&#x2F;三个引号</a></li>
<li><a href="#-whats-wrong-with-booleans%E5%B8%83%E5%B0%94%E4%BD%A0%E5%92%8B%E4%BA%86">&gt; What’s wrong with booleans?&#x2F;布尔你咋了?</a></li>
<li><a href="#-class-attributes-and-instance-attributes%E7%B1%BB%E5%B1%9E%E6%80%A7%E5%92%8C%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7">&gt; Class attributes and instance attributes&#x2F;类属性和实例属性</a></li>
<li><a href="#-yielding-none%E7%94%9F%E6%88%90-none">&gt; yielding None&#x2F;生成 None</a></li>
<li><a href="#-Yielding-from-return/%E7%94%9F%E6%88%90%E5%99%A8%E9%87%8C%E7%9A%84return-">&gt; Yielding from… return!&#x2F;生成器里的return *</a></li>
<li><a href="#-Nan-reflexivityNan%E7%9A%84%E8%87%AA%E5%8F%8D%E6%80%A7">&gt; Nan-reflexivity&#x2F;Nan的自反性</a></li>
<li><a href="#-mutating-the-immutable%E5%BC%BA%E4%BA%BA%E6%89%80%E9%9A%BE">&gt; Mutating the immutable!&#x2F;强人所难</a></li>
<li><a href="#-the-disappearing-variable-from-outer-scope%E6%B6%88%E5%A4%B1%E7%9A%84%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F">&gt; The disappearing variable from outer scope&#x2F;消失的外部变量</a></li>
<li><a href="#-the-mysterious-key-type-conversion%E7%A5%9E%E7%A7%98%E7%9A%84%E9%94%AE%E5%9E%8B%E8%BD%AC%E6%8D%A2-">&gt; The mysterious key type conversion&#x2F;神秘的键型转换 *</a></li>
<li><a href="#-lets-see-if-you-can-guess-this%E7%9C%8B%E7%9C%8B%E4%BD%A0%E8%83%BD%E5%90%A6%E7%8C%9C%E5%88%B0%E8%BF%99%E4%B8%80%E7%82%B9">&gt; Let’s see if you can guess this?&#x2F;看看你能否猜到这一点?</a></li>
<li><a href="#-exceeds-the-limit-for-integer-string-conversion%E6%95%B4%E5%9E%8B%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%B6%8A%E7%95%8C">&gt; Exceeds the limit for integer string conversion&#x2F;整型转字符串越界</a></li>
</ul>
</li>
<li><a href="#section-slippery-slopes%E6%BB%91%E5%9D%A1%E8%B0%AC%E8%AF%AF">Section: Slippery Slopes&#x2F;滑坡谬误</a><ul>
<li><a href="#-modifying-a-dictionary-while-iterating-over-it%E8%BF%AD%E4%BB%A3%E5%AD%97%E5%85%B8%E6%97%B6%E7%9A%84%E4%BF%AE%E6%94%B9">&gt; Modifying a dictionary while iterating over it&#x2F;迭代字典时的修改</a></li>
<li><a href="#-stubborn-del-operator%E5%9D%9A%E5%BC%BA%E7%9A%84-del-">&gt; Stubborn <code>del</code> operator&#x2F;坚强的 <code>del</code> *</a></li>
<li><a href="#-the-out-of-scope-variable%E5%A4%96%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%98%E9%87%8F">&gt; The out of scope variable&#x2F;外部作用域变量</a></li>
<li><a href="#-deleting-a-list-item-while-iterating%E8%BF%AD%E4%BB%A3%E5%88%97%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0">&gt; Deleting a list item while iterating&#x2F;迭代列表时删除元素</a></li>
<li><a href="#-%3E-Lossy-zip-of-iterators/%E4%B8%A2%E4%B8%89%E8%90%BD%E5%9B%9B%E7%9A%84zip-">&gt; Lossy zip of iterators&#x2F;丢三落四的zip *</a></li>
<li><a href="#-loop-variables-leaking-out%E5%BE%AA%E7%8E%AF%E5%8F%98%E9%87%8F%E6%B3%84%E6%BC%8F">&gt; Loop variables leaking out!&#x2F;循环变量泄漏!</a></li>
<li><a href="#-beware-of-default-mutable-arguments%E5%BD%93%E5%BF%83%E9%BB%98%E8%AE%A4%E7%9A%84%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">&gt; Beware of default mutable arguments!&#x2F;当心默认的可变参数!</a></li>
<li><a href="#-catching-the-exceptions%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8">&gt; Catching the Exceptions&#x2F;捕获异常</a></li>
<li><a href="#-same-operands-different-story%E5%90%8C%E4%BA%BA%E4%B8%8D%E5%90%8C%E5%91%BD">&gt; Same operands, different story!&#x2F;同人不同命!</a></li>
<li><a href="#-name-resolution-ignoring-class-scope%E5%BF%BD%E7%95%A5%E7%B1%BB%E4%BD%9C%E7%94%A8%E5%9F%9F%E7%9A%84%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90">&gt; Name resolution ignoring class scope&#x2F;忽略类作用域的名称解析</a></li>
<li><a href="#-rounding-like-a-banker/%E5%83%8F%E9%93%B6%E8%A1%8C%E5%AE%B6%E4%B8%80%E6%A0%B7%E8%88%8D%E5%85%A5-">&gt; Rounding like a banker&#x2F;像银行家一样舍入 *</a></li>
<li><a href="#-needles-in-a-haystack%E5%A4%A7%E6%B5%B7%E6%8D%9E%E9%92%88">&gt; Needles in a Haystack&#x2F;大海捞针</a></li>
<li><a href="#-Splitsies%E5%88%86%E5%89%B2%E5%87%BD%E6%95%B0-">&gt; Splitsies&#x2F;分割函数</a></li>
<li><a href="#-Wild-imports%E9%80%9A%E9%85%8D%E7%AC%A6%E5%AF%BC%E5%85%A5%E6%96%B9%E5%BC%8F-">&gt; Wild imports&#x2F;通配符导入方式 *</a></li>
<li><a href="#-All-sorted%E9%83%BD%E6%8E%92%E5%BA%8F%E4%BA%86%E5%90%97-">&gt; All sorted?&#x2F;都排序了吗？ *</a></li>
<li><a href="#-midnight-time-doesnt-exist%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%8D%88%E5%A4%9C">&gt; Midnight time doesn’t exist?&#x2F;不存在的午夜?</a></li>
</ul>
</li>
<li><a href="#section-the-hidden-treasures%E9%9A%90%E8%97%8F%E7%9A%84%E5%AE%9D%E8%97%8F">Section: The Hidden treasures!&#x2F;隐藏的宝藏!</a><ul>
<li><a href="#-okay-python-can-you-make-me-flypython-%E5%8F%AF%E5%90%A6%E5%B8%A6%E6%88%91%E9%A3%9E-">&gt; Okay Python, Can you make me fly?&#x2F;Python, 可否带我飞? *</a></li>
<li><a href="#-goto-but-whygoto-%E4%BD%86%E4%B8%BA%E4%BB%80%E4%B9%88-">&gt; <code>goto</code>, but why?&#x2F;<code>goto</code>, 但为什么? *</a></li>
<li><a href="#-brace-yourself%E5%81%9A%E5%A5%BD%E6%80%9D%E6%83%B3%E5%87%86%E5%A4%87-">&gt; Brace yourself!&#x2F;做好思想准备 *</a></li>
<li><a href="#-lets-meet-friendly-language-uncle-for-life%E8%AE%A9%E7%94%9F%E6%B4%BB%E6%9B%B4%E5%8F%8B%E5%A5%BD-">&gt; Let’s meet Friendly Language Uncle For Life&#x2F;让生活更友好 *</a></li>
<li><a href="#-even-python-understands-that-love-is-complicated%E8%BF%9EPython%E4%B9%9F%E7%9F%A5%E9%81%93%E7%88%B1%E6%98%AF%E9%9A%BE%E8%A8%80%E7%9A%84-">&gt; Even Python understands that love is complicated&#x2F;连Python也知道爱是难言的 *</a></li>
<li><a href="#-yes-it-exists%E6%98%AF%E7%9A%84-%E5%AE%83%E5%AD%98%E5%9C%A8">&gt; Yes, it exists!&#x2F;是的, 它存在!</a></li>
<li><a href="#-Ellipsis%E7%9C%81%E7%95%A5-">&gt; Ellipsis&#x2F;省略 *</a></li>
<li><a href="#-inpinity%E6%97%A0%E9%99%90-">&gt; Inpinity&#x2F;无限 *</a></li>
<li><a href="#-Lets-mangle%E4%BF%AE%E9%A5%B0%E6%97%B6%E9%97%B4-">&gt; Let’s mangle&#x2F;修饰时间! *</a></li>
</ul>
</li>
<li><a href="#section-appearances-are-deceptive%E5%A4%96%E8%A1%A8%E6%98%AF%E9%9D%A0%E4%B8%8D%E4%BD%8F%E7%9A%84">Section: Appearances are deceptive!&#x2F;外表是靠不住的!</a><ul>
<li><a href="#-skipping-lines%E8%B7%B3%E8%BF%87%E4%B8%80%E8%A1%8C">&gt; Skipping lines?&#x2F;跳过一行?</a></li>
<li><a href="#-teleportation%E7%A9%BA%E9%97%B4%E7%A7%BB%E5%8A%A8-">&gt; Teleportation&#x2F;空间移动 *</a></li>
<li><a href="#-well-something-is-fishy%E5%97%AF%E6%9C%89%E4%BA%9B%E5%8F%AF%E7%96%91">&gt; Well, something is fishy…&#x2F;嗯, 有些可疑…</a></li>
</ul>
</li>
<li><a href="#section-miscellaneous%E6%9D%82%E9%A1%B9">Section: Miscellaneous&#x2F;杂项</a><ul>
<li><a href="#--is-faster%E6%9B%B4%E5%BF%AB%E7%9A%84-">&gt; <code>+=</code> is faster&#x2F;更快的 <code>+=</code> </a></li>
<li><a href="#-lets-make-a-giant-string%E6%9D%A5%E5%81%9A%E4%B8%AA%E5%B7%A8%E5%A4%A7%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%90%A7">&gt; Let’s make a giant string!&#x2F;来做个巨大的字符串吧!</a></li>
<li><a href="#-Slowing-down-dict-lookups%E8%AE%A9%E5%AD%97%E5%85%B8%E7%9A%84%E6%9F%A5%E6%89%BE%E6%85%A2%E4%B8%8B%E6%9D%A5-">&gt; Slowing down <code>dict</code> lookups&#x2F;让字典的查找慢下来 *</a></li>
<li><a href="#-Bloating-instance-dicts/%E5%8F%98%E8%87%83%E8%82%BF%E7%9A%84dict%E5%AE%9E%E4%BE%8B%E4%BB%AC-">&gt; Bloating instance <code>dict</code>s&#x2F;变臃肿的<code>dict</code>实例们 *</a></li>
<li><a href="#-minor-ones%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9">&gt; Minor Ones&#x2F;小知识点</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributing%E8%B4%A1%E7%8C%AE">Contributing&#x2F;贡献</a></li>
<li><a href="#acknowledgements%E8%87%B4%E8%B0%A2">Acknowledgements&#x2F;致谢</a></li>
<li><a href="#-license%E8%AE%B8%E5%8F%AF">🎓 License&#x2F;许可</a><ul>
<li><a href="#help%E5%B8%AE%E5%8A%A9">Help&#x2F;帮助</a></li>
<li><a href="#surprise-your-geeky-pythonist-friends%E6%83%B3%E7%BB%99%E4%BD%A0%E7%9A%84%E6%9E%81%E5%AE%A2%E6%9C%8B%E5%8F%8B%E4%B8%80%E4%B8%AA%E6%83%8A%E5%96%9C">Surprise your geeky pythonist friends?&#x2F;想给你的极客朋友一个惊喜?</a></li>
<li><a href="#need-a-pdf-version%E9%9C%80%E8%A6%81%E6%9D%A5%E4%B8%80%E4%BB%BDpdf%E7%89%88%E7%9A%84">Need a pdf version?&#x2F;需要来一份pdf版的?</a></li>
<li><a href="#follow-commit%E8%BF%BD%E8%B8%AACommit">Follow Commit&#x2F;追踪Commit</a></li>
<li><a href="#996icu">996.icu</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="Structure-of-the-Examples-示例结构"><a href="#Structure-of-the-Examples-示例结构" class="headerlink" title="Structure of the Examples&#x2F;示例结构"></a>Structure of the Examples&#x2F;示例结构</h1><p>所有示例的结构都如下所示:</p>
<blockquote>
<h3 id="一个精选的标题"><a href="#一个精选的标题" class="headerlink" title="&gt; 一个精选的标题 *"></a>&gt; 一个精选的标题 *</h3><p>标题末尾的星号表示该示例在第一版中不存在，是最近添加的.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 准备代码.</span></span><br><span class="line"><span class="comment"># 释放魔法...</span></span><br></pre></td></tr></table></figure>

<p><strong>Output (Python version):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>触发语句</span><br><span class="line">出乎意料的输出结果</span><br></pre></td></tr></table></figure>
<p>(可选): 对意外输出结果的简短描述.</p>
<h4 id="💡-说明"><a href="#💡-说明" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>简要说明发生了什么以及为什么会发生.<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">如有必要, 举例说明</span><br></pre></td></tr></table></figure>
<strong>Output:</strong><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>触发语句 <span class="comment"># 一些让魔法变得容易理解的例子</span></span><br><span class="line"><span class="comment"># 一些正常的输入</span></span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p><strong>注意:</strong> 所有的示例都在 Python 3.5.2 版本的交互解释器上测试过, 如果不特别说明应该适用于所有 Python 版本.</p>
<h1 id="Usage-用法"><a href="#Usage-用法" class="headerlink" title="Usage&#x2F;用法"></a>Usage&#x2F;用法</h1><p>我个人建议, 最好依次阅读下面的示例, 并对每个示例:</p>
<ul>
<li>仔细阅读设置例子最开始的代码.  如果您是一位经验丰富的 Python 程序员, 那么大多数时候您都能成功预期到后面的结果.</li>
<li>阅读输出结果,<ul>
<li>确认结果是否如你所料.</li>
<li>确认你是否知道这背后的原理.<ul>
<li>如果不知道, 深呼吸然后阅读说明 (如果你还是看不明白, 别沉默! 可以在<a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfPython">这</a>提个 issue).</li>
<li>如果知道, 给自己点奖励, 然后去看下一个例子.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>PS: 你也可以在命令行阅读 WTFpython. 我们有 pypi 包 和 npm 包(支持代码高亮).(译: 这两个都是英文版的)</p>
<p>安装 npm 包 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/wtfpython"><code>wtfpython</code></a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ npm install -g wtfpython</span><br></pre></td></tr></table></figure>

<p>或者, 安装 pypi 包 <a target="_blank" rel="noopener" href="https://pypi.python.org/pypi/wtfpython"><code>wtfpython</code></a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ pip install wtfpython -U</span><br></pre></td></tr></table></figure>

<p>现在, 在命令行中运行 <code>wtfpython</code>, 你就可以开始浏览了.</p>
<hr>
<h1 id="👀-Examples-示例"><a href="#👀-Examples-示例" class="headerlink" title="👀 Examples&#x2F;示例"></a>👀 Examples&#x2F;示例</h1><h2 id="Section-Strain-your-brain-大脑运动"><a href="#Section-Strain-your-brain-大脑运动" class="headerlink" title="Section: Strain your brain!&#x2F;大脑运动!"></a>Section: Strain your brain!&#x2F;大脑运动!</h2><h3 id="First-things-first-要事优先"><a href="#First-things-first-要事优先" class="headerlink" title="&gt; First things first!&#x2F;要事优先 *"></a>&gt; First things first!&#x2F;要事优先 *</h3><!-- Example ID: d3d73936-3cf1-4632-b5ab-817981338863 -->
<!-- read-only -->

<p>众所周知，Python 3.8 推出”海象”运算符 (<code>:=</code>) 方便易用，让我们一起看看。</p>
<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Python 版本 3.8+</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;wtf_walrus&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;wtf_walrus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a := <span class="string">&quot;wtf_walrus&quot;</span></span><br><span class="line">File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    a := <span class="string">&quot;wtf_walrus&quot;</span></span><br><span class="line">      ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a := <span class="string">&quot;wtf_walrus&quot;</span>) <span class="comment"># 该语句有效</span></span><br><span class="line"><span class="string">&#x27;wtf_walrus&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">&#x27;wtf_walrus&#x27;</span></span><br></pre></td></tr></table></figure>

<p>2 .</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Python 版本 3.8+</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">6</span>, <span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">(<span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a := <span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line">(<span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">6</span>, <span class="number">9</span> <span class="comment"># 典型拆包操作</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b</span><br><span class="line">(<span class="number">6</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a, b = <span class="number">16</span>, <span class="number">19</span>) <span class="comment"># 出错啦</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    (a, b = <span class="number">16</span>, <span class="number">19</span>)</span><br><span class="line">          ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a, b := <span class="number">16</span>, <span class="number">19</span>) <span class="comment"># 这里的结果是一个奇怪的三元组</span></span><br><span class="line">(<span class="number">6</span>, <span class="number">16</span>, <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="comment"># a值仍然没变?</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">16</span></span><br></pre></td></tr></table></figure>



<h4 id="💡-说明-1"><a href="#💡-说明-1" class="headerlink" title="💡 说明"></a>💡 说明</h4><p><strong>“海象”运算符简介</strong></p>
<p>海象运算符 (<code>:=</code>) 在Python 3.8中被引入，用来在表达式中为变量赋值。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>():</span><br><span class="line">        <span class="comment"># 假设这儿有一些耗时的计算</span></span><br><span class="line">        <span class="comment"># time.sleep(1000)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入“海象”运算符前的例子</span></span><br><span class="line"><span class="keyword">if</span> some_func():</span><br><span class="line">        <span class="built_in">print</span>(some_func()) <span class="comment"># 糟糕的案例——函数运算了两次</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者，加以改进：</span></span><br><span class="line">a = some_func()</span><br><span class="line"><span class="keyword">if</span> a:</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 有了“海象”运算符，你可以写的更简洁：</span></span><br><span class="line"><span class="keyword">if</span> a := some_func():</span><br><span class="line">        <span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>

<p><strong>输出 (&gt; Python 3.8):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>这样既减少了一行代码，又避免了两次调用 <code>some_func</code> 函数。</p>
<ul>
<li><p>在顶层的无括号赋值操作（使用“海象”运算符）被限制，因此例1中的 <code>a := &quot;wtf_walrus&quot;</code> 出现了 <code>SyntaxError</code> 。用括号括起来。它就能正常工作了。</p>
</li>
<li><p>一般的，包含 <code>=</code> 操作的表达式是不能用括号括起来的，因此 <code>(a, b = 6, 9)</code> 中出现了语法错误。</p>
</li>
<li><p>“海象”运算符的语法形式为：<code>NAME:= expr</code>，<code>NAME</code> 是一个有效的标识符，而 <code>expr</code> 是一个有效的表达式。 因此，这意味着它不支持可迭代的打包和拆包。</p>
<ul>
<li><p><code>(a := 6, 9)</code> 等价于 <code>((a := 6), 9)</code> ，最终得到 <code>(a, 9) </code> (其中 <code>a</code> 的值为6)</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a := <span class="number">6</span>, <span class="number">9</span>) == ((a := <span class="number">6</span>), <span class="number">9</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = (a := <span class="number">696</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">(<span class="number">696</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>] <span class="keyword">is</span> a <span class="comment"># 两个变量指向同一内存空间</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>类似的， <code>(a, b := 16, 19)</code> 等价于 <code>(a, (b := 16), 19)</code> ，只是一个三元组。</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Strings-can-be-tricky-sometimes-微妙的字符串"><a href="#Strings-can-be-tricky-sometimes-微妙的字符串" class="headerlink" title="&gt; Strings can be tricky sometimes&#x2F;微妙的字符串 *"></a>&gt; Strings can be tricky sometimes&#x2F;微妙的字符串 *</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;some_string&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140420665652016</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(<span class="string">&quot;some&quot;</span> + <span class="string">&quot;_&quot;</span> + <span class="string">&quot;string&quot;</span>) <span class="comment"># 注意两个的id值是相同的.</span></span><br><span class="line"><span class="number">140420665652016</span></span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;wtf&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;wtf&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;wtf!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;wtf!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="string">&quot;wtf!&quot;</span>, <span class="string">&quot;wtf!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b </span><br><span class="line"><span class="literal">True</span> <span class="comment"># 3.7 版本返回结果为 False.</span></span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;a&#x27;</span> * <span class="number">20</span> <span class="keyword">is</span> <span class="string">&#x27;aaaaaaaaaaaaaaaaaaaa&#x27;</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;a&#x27;</span> * <span class="number">21</span> <span class="keyword">is</span> <span class="string">&#x27;aaaaaaaaaaaaaaaaaaaaa&#x27;</span></span><br><span class="line"><span class="literal">False</span> <span class="comment"># 3.7 版本返回结果为 True</span></span><br></pre></td></tr></table></figure>

<p>很好理解, 对吧?</p>
<h4 id="💡-说明-2"><a href="#💡-说明-2" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>这些行为是由于 Cpython 在编译优化时, 某些情况下会尝试使用已经存在的不可变对象而不是每次都创建一个新对象. (这种行为被称作字符串的驻留[string interning])</p>
</li>
<li><p>发生驻留之后, 许多变量可能指向内存中的相同字符串对象. (从而节省内存)</p>
</li>
<li><p>在上面的代码中, 字符串是隐式驻留的. 何时发生隐式驻留则取决于具体的实现. 这里有一些方法可以用来猜测字符串是否会被驻留:</p>
<ul>
<li>所有长度为 0 和长度为 1 的字符串都被驻留.</li>
<li>字符串在编译时被实现 (<code>&#39;wtf&#39;</code> 将被驻留, 但是 <code>&#39;&#39;.join([&#39;w&#39;, &#39;t&#39;, &#39;f&#39;])</code> 将不会被驻留)</li>
<li>字符串中只包含字母，数字或下划线时将会驻留. 所以 <code>&#39;wtf!&#39;</code> 由于包含 <code>!</code> 而未被驻留. 可以在<a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19">这里</a>找到 CPython 对此规则的实现.</li>
</ul>
</li>
<li><p>当在同一行将 <code>a</code> 和 <code>b</code> 的值设置为 <code>&quot;wtf!&quot;</code> 的时候, Python 解释器会创建一个新对象, 然后同时引用第二个变量(译: 仅适用于3.7以下, 详细情况请看<a target="_blank" rel="noopener" href="https://github.com/leisurelicht/wtfpython-cn/issues/13">这里</a>). 如果你在不同的行上进行赋值操作, 它就不会“知道”已经有一个 <code>wtf！</code> 对象 (因为 <code>&quot;wtf!&quot;</code> 不是按照上面提到的方式被隐式驻留的). 它是一种编译器优化, 特别适用于交互式环境.</p>
</li>
<li><p>常量折叠(constant folding) 是 Python 中的一种 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Peephole_optimization">窥孔优化(peephole optimization)</a> 技术. 这意味着在编译时表达式 <code>&#39;a&#39;*20</code> 会被替换为 <code>&#39;aaaaaaaaaaaaaaaaaaaa&#39;</code> 以减少运行时的时钟周期. 只有长度小于 20 的字符串才会发生常量折叠. (为啥? 想象一下由于表达式 <code>&#39;a&#39;*10**10</code> 而生成的 <code>.pyc</code> 文件的大小). 相关的源码实现在<a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288">这里</a>.</p>
</li>
<li><p>如果你是使用 3.7 版本中运行上述示例代码, 会发现部分代码的运行结果与注释说明相同. 这是因为在 3.7 版本中, 常量折叠已经从窥孔优化器迁移至新的 AST 优化器, 后者可以以更高的一致性来执行优化. (由 Eugene Toder 和 INADA Naoki 在 <a target="_blank" rel="noopener" href="https://bugs.python.org/issue29469">bpo-29469</a> 和 <a target="_blank" rel="noopener" href="https://bugs.python.org/issue11549">bpo-11549</a> 中贡献.) </p>
</li>
<li><p>(译: 但是在最新的 3.8 版本中, 结果又变回去了. 虽然 3.8 版本和 3.7 版本一样, 都是使用 AST 优化器. 目前不确定官方对 3.8 版本的 AST 做了什么调整.)</p>
</li>
</ul>
<hr>
<h3 id="Be-careful-with-chained-operations-小心链式操作"><a href="#Be-careful-with-chained-operations-小心链式操作" class="headerlink" title="&gt; Be careful with chained operations&#x2F;小心链式操作"></a>&gt; Be careful with chained operations&#x2F;小心链式操作</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="literal">False</span> == <span class="literal">False</span>) <span class="keyword">in</span> [<span class="literal">False</span>] <span class="comment"># 可以理解</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">False</span> == (<span class="literal">False</span> <span class="keyword">in</span> [<span class="literal">False</span>]) <span class="comment"># 可以理解</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">False</span> == <span class="literal">False</span> <span class="keyword">in</span> [<span class="literal">False</span>] <span class="comment"># 为毛?</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">True</span> <span class="keyword">is</span> <span class="literal">False</span> == <span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">False</span> <span class="keyword">is</span> <span class="literal">False</span> <span class="keyword">is</span> <span class="literal">False</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> &gt; <span class="number">0</span> &lt; <span class="number">1</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span> &gt; <span class="number">0</span>) &lt; <span class="number">1</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> &gt; (<span class="number">0</span> &lt; <span class="number">1</span>)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-3"><a href="#💡-说明-3" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><p>根据 <a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/expressions.html#comparisons">https://docs.python.org/3/reference/expressions.html#comparisons</a></p>
<blockquote>
<p>形式上, 如果 a, b, c, …, y, z 是表达式, 而 op1, op2, …, opN 是比较运算符, 那么除了每个表达式最多只出现一次以外 a op1 b op2 c … y opN z 就等于 a op1 b and b op2 c and … y opN z.</p>
</blockquote>
<p>虽然上面的例子似乎很愚蠢, 但是像 <code>a == b == c</code> 或 <code>0 &lt;= x &lt;= 100</code> 就很棒了.</p>
<ul>
<li><code>False is False is False</code> 相当于 <code>(False is False) and (False is False)</code></li>
<li><code>True is False == False</code> 相当于 <code>(True is False) and (False == False)</code>, 由于语句的第一部分 (<code>True is False</code>) 等于 <code>False</code>, 因此整个表达式的结果为 <code>False</code>.</li>
<li><code>1 &gt; 0 &lt; 1</code> 相当于 <code>(1 &gt; 0) and (0 &lt; 1)</code>, 所以最终结果为 <code>True</code>.</li>
<li>表达式 <code>(1 &gt; 0) &lt; 1</code> 相当于 <code>True &lt; 1</code> 且<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="literal">True</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">True</span> + <span class="number">1</span> <span class="comment"># 与这个例子无关，只是娱乐一下</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
所以, <code>1 &lt; 1</code> 等于 <code>False</code></li>
</ul>
<hr>
<h3 id="How-not-to-use-is-operator-为什么不使用-is-操作符"><a href="#How-not-to-use-is-operator-为什么不使用-is-操作符" class="headerlink" title="&gt; How not to use is operator&#x2F;为什么不使用 is 操作符"></a>&gt; How not to use <code>is</code> operator&#x2F;为什么不使用 <code>is</code> 操作符</h3><!-- Example ID: 230fa2ac-ab36-4ad1-b675-5f5a1c1a6217 --->

<p>下面是一个在互联网上非常有名的例子.</p>
<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="built_in">tuple</span>()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="built_in">tuple</span>()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>3.<br><strong>Output</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">257</span>, <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 3.7.x specifically)</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">257</span>, <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-4"><a href="#💡-说明-4" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><p><strong><code>is</code> 和 <code>==</code> 的区别</strong></p>
<ul>
<li><code>is</code> 运算符检查两个运算对象是否引用自同一对象 (即, 它检查两个运算对象是否相同).</li>
<li><code>==</code> 运算符比较两个运算对象的值是否相等.</li>
<li>因此 <code>is</code> 代表引用相同, <code>==</code> 代表值相等. 下面的例子可以很好的说明这点,<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[] == []</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[] <span class="keyword">is</span> [] <span class="comment"># 这两个空列表位于不同的内存地址.</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong><code>256</code> 是一个已经存在的对象, 而 <code>257</code> 不是</strong></p>
<p>当你启动Python 的时候, 数值为 <code>-5</code> 到 <code>256</code> 的对象就已经被分配好了. 这些数字因为经常被使用, 所以会被提前准备好.</p>
<p>Python 通过这种创建小整数池的方式来避免小整数频繁的申请和销毁内存空间.</p>
<p>引用自 <a target="_blank" rel="noopener" href="https://docs.python.org/3/c-api/long.html">https://docs.python.org/3/c-api/long.html</a></p>
<blockquote>
<p>当前的实现为-5到256之间的所有整数保留一个整数对象数组, 当你创建了一个该范围内的整数时, 你只需要返回现有对象的引用. 所以改变1的值是有可能的. 我怀疑这种行为在Python中是未定义行为. :-)</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(<span class="number">256</span>)</span><br><span class="line"><span class="number">10922528</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">10922528</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">10922528</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(<span class="number">257</span>)</span><br><span class="line"><span class="number">140084850247312</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x)</span><br><span class="line"><span class="number">140084850247440</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(y)</span><br><span class="line"><span class="number">140084850247344</span></span><br></pre></td></tr></table></figure>

<p>这里解释器并没有智能到能在执行 <code>y = 257</code> 时意识到我们已经创建了一个整数 <code>257</code>, 所以它在内存中又新建了另一个对象.</p>
<p>类似的优化也适用于其他<strong>不可变</strong>对象，例如空元组。由于列表是可变的，这就是为什么 <code>[] is []</code> 将返回 <code>False</code> 而 <code>() is ()</code> 将返回 <code>True</code>。 这解释了我们的第二个代码段。而第三个呢：</p>
<p><strong>当 <code>a</code> 和 <code>b</code> 在同一行中使用相同的值初始化时，会指向同一个对象.</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">257</span>, <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140640774013296</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140640774013296</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(a)</span><br><span class="line"><span class="number">140640774013392</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(b)</span><br><span class="line"><span class="number">140640774013488</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>当 a 和 b 在同一行中被设置为 <code>257</code> 时, Python 解释器会创建一个新对象, 然后同时引用第二个变量. 如果你在不同的行上进行, 它就不会 “知道” 已经存在一个 <code>257</code> 对象了.</p>
</li>
<li><p>这是一种特别为交互式环境做的编译器优化. 当你在实时解释器中输入两行的时候, 他们会单独编译, 因此也会单独进行优化. 如果你在 <code>.py</code> 文件中尝试这个例子, 则不会看到相同的行为, 因为文件是一次性编译的。这种优化不仅限于整数，它也适用于其他不可变数据类型，例如字符串（查看示例“微妙的字符串”）和浮点数，</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">257.0</span>, <span class="number">257.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>为什么这不适用于 Python 3.7？ 大概是因为此类编译器优化是特定于实现的（即可能随版本、操作系统等而变化）。我仍在试图弄清楚导致问题的具体实现更改，您可以查看此 <a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/issues/100">问题</a> 以获取更新。</p>
</li>
</ul>
<hr>
<h3 id="Hash-brownies-是时候来点蛋糕了"><a href="#Hash-brownies-是时候来点蛋糕了" class="headerlink" title="&gt; Hash brownies&#x2F;是时候来点蛋糕了!"></a>&gt; Hash brownies&#x2F;是时候来点蛋糕了!</h3><ul>
<li>hash brownie指一种含有大麻成分的蛋糕, 所以这里是句双关</li>
<li>这里保留原作者对于标题的翻译<!-- Example ID: eb17db53-49fd-4b61-85d6-345c5ca213ff ---></li>
</ul>
<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_dict = &#123;&#125;</span><br><span class="line">some_dict[<span class="number">5.5</span>] = <span class="string">&quot;JavaScript&quot;</span></span><br><span class="line">some_dict[<span class="number">5.0</span>] = <span class="string">&quot;Ruby&quot;</span></span><br><span class="line">some_dict[<span class="number">5</span>] = <span class="string">&quot;Python&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[<span class="number">5.5</span>]</span><br><span class="line"><span class="string">&quot;JavaScript&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[<span class="number">5.0</span>] <span class="comment"># &quot;Python&quot; 消除了 &quot;Ruby&quot; 的存在?</span></span><br><span class="line"><span class="string">&quot;Python&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[<span class="number">5</span>] </span><br><span class="line"><span class="string">&quot;Python&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>complex_five = <span class="number">5</span> + <span class="number">0j</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(complex_five)</span><br><span class="line"><span class="built_in">complex</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[complex_five]</span><br><span class="line"><span class="string">&quot;Python&quot;</span></span><br></pre></td></tr></table></figure>

<p>为什么到处都是Python?</p>
<h4 id="💡-说明-5"><a href="#💡-说明-5" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p>这个 StackOverflow的 <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/32211042/4354153">回答</a> 漂亮地解释了这背后的基本原理.</p>
</li>
<li><p>Python 字典中键的唯一性是根据 <em>等价性</em>，而不是同一性。 因此，即使 <code>5</code>、<code>5.0</code> 和 <code>5 + 0j</code> 是不同类型的不同对象，由于它们是相等的，它们不能都在同一个 <code>dict</code>（或 <code>set</code>）中。 只要您插入其中任何一个，尝试查找任何不同但等价的键都将使用原始映射值成功（而不是因“KeyError”而失败）：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> == <span class="number">5.0</span> == <span class="number">5</span> + <span class="number">0j</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="number">5.0</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="number">5</span> + <span class="number">0j</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[<span class="number">5.0</span>] = <span class="string">&quot;Ruby&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5.0</span> <span class="keyword">in</span> some_dict</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">5</span> <span class="keyword">in</span> some_dict) <span class="keyword">and</span> (<span class="number">5</span> + <span class="number">0j</span> <span class="keyword">in</span> some_dict)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>这在赋值的时候也会生效。因此，当您执行 <code>some_dict[5] = &quot;Python&quot;</code> 时，Python 会找到具有等价键值 <code>5.0 -&gt; &quot;Ruby&quot;</code> 的现有项，覆盖其值，并保留原始键值。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict</span><br><span class="line">&#123;<span class="number">5.0</span>: <span class="string">&#x27;Ruby&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[<span class="number">5</span>] = <span class="string">&quot;Python&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict</span><br><span class="line">&#123;<span class="number">5.0</span>: <span class="string">&#x27;Python&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>那么我们如何将键值更新为<code>5</code>（而不是<code>5.0</code>）？ 我们实际上不能原地更新，但是我们可以先删除键（<code>del some_dict[5.0]</code>），然后重新赋值（<code>some_dict[5]</code>）得到整数<code>5</code> 作为键而不是浮点数 <code>5.0</code>，尽管这属于极少数情况。</p>
</li>
<li><p>Python 是如何在包含 <code>5.0</code> 的字典中找到 <code>5</code> 的？ Python 只需要花费常数时间，而无需使用哈希函数遍历每一项。当 Python 在 dict 中查找键 <code>foo</code> 时，它首先计算 <code>hash(foo)</code>（以常数时间运行）。因为在 Python 中，要求相等的对象具有相同的哈希值（此处为<a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/datamodel.html#object.__hash__">文档</a>），<code>5</code> 、<code>5.0</code> 和 <code>5 + 0j</code> 具有相同的哈希值。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> == <span class="number">5.0</span> == <span class="number">5</span> + <span class="number">0j</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>(<span class="number">5</span>) == <span class="built_in">hash</span>(<span class="number">5.0</span>) == <span class="built_in">hash</span>(<span class="number">5</span> + <span class="number">0j</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 反之不一定正确：具有相等哈希值的对象本身可能不相等。（这是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Collision_(computer_science">哈希冲突</a>）造成的，这也会降低哈希运算的性能。）</p>
</li>
</ul>
<hr>
<h3 id="Deep-down-we’re-all-the-same-本质上-我们都一样"><a href="#Deep-down-we’re-all-the-same-本质上-我们都一样" class="headerlink" title="&gt; Deep down, we’re all the same.&#x2F;本质上,我们都一样. *"></a>&gt; Deep down, we’re all the same.&#x2F;本质上,我们都一样. *</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WTF</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>WTF() == WTF() <span class="comment"># 两个不同的对象应该不相等</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>WTF() <span class="keyword">is</span> WTF() <span class="comment"># 也不相同</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>(WTF()) == <span class="built_in">hash</span>(WTF()) <span class="comment"># 哈希值也应该不同</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(WTF()) == <span class="built_in">id</span>(WTF())</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-6"><a href="#💡-说明-6" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>当调用 <code>id</code> 函数时, Python 创建了一个 <code>WTF</code> 类的对象并传给 <code>id</code> 函数. 然后 <code>id</code> 函数获取其id值 (也就是内存地址), 然后丢弃该对象. 该对象就被销毁了.</li>
<li>当我们连续两次进行这个操作时, Python会将相同的内存地址分配给第二个对象. 因为 (在CPython中) <code>id</code> 函数使用对象的内存地址作为对象的id值, 所以两个对象的id值是相同的.</li>
<li>综上, 对象的id值仅仅在对象的生命周期内唯一. 在对象被销毁之后, 或被创建之前, 其他对象可以具有相同的id值.</li>
<li>那为什么 <code>is</code> 操作的结果为 <code>False</code> 呢? 让我们看看这段代码.<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WTF</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>): <span class="built_in">print</span>(<span class="string">&quot;I&quot;</span>)</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>): <span class="built_in">print</span>(<span class="string">&quot;D&quot;</span>)</span><br></pre></td></tr></table></figure>

<strong>Output:</strong><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>WTF() <span class="keyword">is</span> WTF()</span><br><span class="line">I</span><br><span class="line">I</span><br><span class="line">D</span><br><span class="line">D</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(WTF()) == <span class="built_in">id</span>(WTF())</span><br><span class="line">I</span><br><span class="line">D</span><br><span class="line">I</span><br><span class="line">D</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
正如你所看到的, 对象销毁的顺序是造成所有不同之处的原因.</li>
</ul>
<hr>
<h3 id="Disorder-within-order-有序中潜藏着无序"><a href="#Disorder-within-order-有序中潜藏着无序" class="headerlink" title="&gt; Disorder within order&#x2F;有序中潜藏着无序 *"></a>&gt; Disorder within order&#x2F;有序中潜藏着无序 *</h3><!-- Example ID: 91bff1f8-541d-455a-9de4-6cd8ff00ea66 --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"></span><br><span class="line">dictionary = <span class="built_in">dict</span>()</span><br><span class="line">dictionary[<span class="number">1</span>] = <span class="string">&#x27;a&#x27;</span>; dictionary[<span class="number">2</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ordered_dict = OrderedDict()</span><br><span class="line">ordered_dict[<span class="number">1</span>] = <span class="string">&#x27;a&#x27;</span>; ordered_dict[<span class="number">2</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"></span><br><span class="line">another_ordered_dict = OrderedDict()</span><br><span class="line">another_ordered_dict[<span class="number">2</span>] = <span class="string">&#x27;b&#x27;</span>; another_ordered_dict[<span class="number">1</span>] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DictWithHash</span>(<span class="title class_ inherited__">dict</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    实现了 __hash__ 魔法方法的dict类</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    __hash__ = <span class="keyword">lambda</span> <span class="variable language_">self</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OrderedDictWithHash</span>(<span class="title class_ inherited__">OrderedDict</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    实现了 __hash__ 魔法方法的OrderedDict类</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    __hash__ = <span class="keyword">lambda</span> <span class="variable language_">self</span>: <span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>Output</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary == ordered_dict <span class="comment"># 如果 a == b</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary == another_ordered_dict <span class="comment"># 且 b == c</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ordered_dict == another_ordered_dict <span class="comment"># 那么为什么 c == a 不成立??</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 众所周知，set数据结构储存不重复元素，</span></span><br><span class="line"><span class="comment"># 让我们生成以上字典的 set 数据类型，看看会发生什么……</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(&#123;dictionary, ordered_dict, another_ordered_dict&#125;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unhashable <span class="built_in">type</span>: <span class="string">&#x27;dict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dict类没有实现 __hash__ ，出错可以理解，接下来使用我们派生的类。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary = DictWithHash()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary[<span class="number">1</span>] = <span class="string">&#x27;a&#x27;</span>; dictionary[<span class="number">2</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ordered_dict = OrderedDictWithHash()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ordered_dict[<span class="number">1</span>] = <span class="string">&#x27;a&#x27;</span>; ordered_dict[<span class="number">2</span>] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_ordered_dict = OrderedDictWithHash()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_ordered_dict[<span class="number">2</span>] = <span class="string">&#x27;b&#x27;</span>; another_ordered_dict[<span class="number">1</span>] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(&#123;dictionary, ordered_dict, another_ordered_dict&#125;)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(&#123;ordered_dict, another_ordered_dict, dictionary&#125;) <span class="comment"># 交换顺序</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>到底发生了什么?</p>
<h4 id="💡-说明-7"><a href="#💡-说明-7" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>等号的传递性没有在 <code>dictionary</code>, <code>ordered_dict</code> 和 <code>another_ordered_dict</code> 之间生效是 <code>OrderedDict</code> 类中 <code>__eq__</code> 方法的实现方式造成的。根据<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/collections.html#ordereddict-objects">文档</a>以下部分:</p>
<blockquote>
<p>对于 <code>OrderedDict</code> 类之间，相等性的判定是位置敏感的，实现类似于 <code>list(od1.items())==list(od2.items())</code>。对于 <code>OrderedDict</code> 类与其他 <code>Mapping</code> 对象（例如<code>dict</code> 类），相等性的判定是非位置敏感的。</p>
</blockquote>
</li>
<li><p>这是为了任何使用常规 <code>dict</code> 类的地方能够直接使用 <code>OrderedDict</code> 对象代替。</p>
</li>
<li><p>好啦，那为什么改变顺序会影响 <code>set</code> 对象生成的长度呢? 答案就是上面说的缺乏等号的传递性。因为 <code>set</code> 类是唯一元素的无序集合，元素插入的顺序不应该有影响。但在此例中，确有不同。让我们进一步深入。</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_set = <span class="built_in">set</span>()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_set.add(dictionary) <span class="comment"># 涉及的变量是前序片段定义的 mapping 对象</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ordered_dict <span class="keyword">in</span> some_set</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_set.add(ordered_dict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(some_set)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_ordered_dict <span class="keyword">in</span> some_set</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_set.add(another_ordered_dict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(some_set)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_set = <span class="built_in">set</span>()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_set.add(ordered_dict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_ordered_dict <span class="keyword">in</span> another_set</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_set.add(another_ordered_dict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(another_set)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dictionary <span class="keyword">in</span> another_set</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_set.add(another_ordered_dict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(another_set)</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>  因此，不一致性是由于 <code>another_ordered_dict in another_set</code> 结果为 <code>False</code>。 因为 <code>ordered_dict</code> 已经在 <code>another_set</code> 中，但如前所述， <code>ordered_dict == another_ordered_dict</code> 的结果为 <code>False</code>，会在后续再加入 <code>another_ordered_dict</code> 到 <code>another_set</code> 中。</p>
</li>
</ul>
<hr>
<h3 id="Keep-trying…-不停的try"><a href="#Keep-trying…-不停的try" class="headerlink" title="&gt; Keep trying…&#x2F;不停的try *"></a>&gt; Keep trying…&#x2F;不停的try *</h3><!-- Example ID: b4349443-e89f-4d25-a109-8616be9d41a --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;from_try&#x27;</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;from_finally&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">another_func</span>(): </span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Finally!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">one_more_func</span>(): <span class="comment"># A gotcha!</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="number">1</span> / i</span><br><span class="line">            <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">                <span class="comment"># Let&#x27;s throw it here and handle it outside for loop</span></span><br><span class="line">                <span class="keyword">raise</span> ZeroDivisionError(<span class="string">&quot;A trivial divide by zero error&quot;</span>)</span><br><span class="line">            <span class="keyword">finally</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Iteration&quot;</span>, i)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Zero division error occurred&quot;</span>, e)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line"><span class="string">&#x27;from_finally&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_func()</span><br><span class="line">Finally!</span><br><span class="line">Finally!</span><br><span class="line">Finally!</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> / <span class="number">0</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ZeroDivisionError: division by zero</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one_more_func()</span><br><span class="line">Iteration <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-8"><a href="#💡-说明-8" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>当在 “try…finally” 语句的 <code>try</code> 中执行 <code>return</code>, <code>break</code> 或 <code>continue</code> 后, <code>finally</code> 子句依然会执行.</li>
<li>函数的返回值由最后执行的 <code>return</code> 语句决定. 由于 <code>finally</code> 子句一定会执行, 所以 <code>finally</code> 子句中的 <code>return</code> 将始终是最后执行的语句.</li>
<li>这里需要注意的是，如果 finally 子句执行 <code>return</code> 或 <code>break</code> 语句，临时保存的异常将被丢弃。</li>
</ul>
<hr>
<h3 id="For-what-为什么"><a href="#For-what-为什么" class="headerlink" title="&gt; For what?&#x2F;为什么?"></a>&gt; For what?&#x2F;为什么?</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_string = <span class="string">&quot;wtf&quot;</span></span><br><span class="line">some_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i, some_dict[i] <span class="keyword">in</span> <span class="built_in">enumerate</span>(some_string):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict <span class="comment"># 创建了索引字典.</span></span><br><span class="line">&#123;<span class="number">0</span>: <span class="string">&#x27;w&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;t&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;f&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-9"><a href="#💡-说明-9" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/grammar.html">Python 语法</a> 中对 <code>for</code> 的定义是:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for_stmt: &#x27;for&#x27; exprlist &#x27;in&#x27; testlist &#x27;:&#x27; suite [&#x27;else&#x27; &#x27;:&#x27; suite]</span><br></pre></td></tr></table></figure>
<p>其中 <code>exprlist</code> 指分配目标. 这意味着对可迭代对象中的<strong>每一项都会执行</strong>类似 <code>&#123;exprlist&#125; = &#123;next_value&#125;</code> 的操作.</p>
<p>一个有趣的例子说明了这一点:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    i = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p>你可曾觉得这个循环只会运行一次?</p>
<p><strong>💡 说明:</strong></p>
<ul>
<li>由于循环在Python中工作方式, 赋值语句 <code>i = 10</code> 并不会影响迭代循环, 在每次迭代开始之前, 迭代器(这里指 <code>range(4)</code>) 生成的下一个元素就被解包并赋值给目标列表的变量(这里指 <code>i</code>)了.</li>
</ul>
</li>
<li><p>在每一次的迭代中, <code>enumerate(some_string)</code> 函数就生成一个新值 <code>i</code> (计数器增加) 并从 <code>some_string</code> 中获取一个字符. 然后将字典 <code>some_dict</code> 键 <code>i</code> (刚刚分配的) 的值设为该字符. 本例中循环的展开可以简化为:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>i, some_dict[i] = (<span class="number">0</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i, some_dict[i] = (<span class="number">1</span>, <span class="string">&#x27;t&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i, some_dict[i] = (<span class="number">2</span>, <span class="string">&#x27;f&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Evaluation-time-discrepancy-执行时机差异"><a href="#Evaluation-time-discrepancy-执行时机差异" class="headerlink" title="&gt; Evaluation time discrepancy&#x2F;执行时机差异"></a>&gt; Evaluation time discrepancy&#x2F;执行时机差异</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">array = [<span class="number">1</span>, <span class="number">8</span>, <span class="number">15</span>]</span><br><span class="line"><span class="comment"># 一个典型的生成器表达式</span></span><br><span class="line">g = (x <span class="keyword">for</span> x <span class="keyword">in</span> array <span class="keyword">if</span> array.count(x) &gt; <span class="number">0</span>)</span><br><span class="line">array = [<span class="number">2</span>, <span class="number">8</span>, <span class="number">22</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(g)) <span class="comment">#其他的值去哪儿了？</span></span><br><span class="line">[<span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">array_1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">g1 = (x <span class="keyword">for</span> x <span class="keyword">in</span> array_1)</span><br><span class="line">array_1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">array_2 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">g2 = (x <span class="keyword">for</span> x <span class="keyword">in</span> array_2)</span><br><span class="line">array_2[:] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(g1))</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(g2))</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">array_3 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">array_4 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line">gen = (i + j <span class="keyword">for</span> i <span class="keyword">in</span> array_3 <span class="keyword">for</span> j <span class="keyword">in</span> array_4)</span><br><span class="line"></span><br><span class="line">array_3 = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">array_4 = [<span class="number">400</span>, <span class="number">500</span>, <span class="number">600</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">list</span>(gen))</span><br><span class="line">[<span class="number">401</span>, <span class="number">501</span>, <span class="number">601</span>, <span class="number">402</span>, <span class="number">502</span>, <span class="number">602</span>, <span class="number">403</span>, <span class="number">503</span>, <span class="number">603</span>]</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-10"><a href="#💡-说明-10" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li>在<a target="_blank" rel="noopener" href="https://wiki.python.org/moin/Generators">生成器</a>表达式中, <code>in</code> 子句在声明时执行, 而条件子句则是在运行时执行.</li>
<li>所以在运行前, <code>array</code> 已经被重新赋值为 <code>[2, 8, 22]</code>, 因此对于之前的 <code>1</code>, <code>8</code> 和 <code>15</code>, 只有 <code>count(8)</code> 的结果是大于 <code>0</code> 的, 所以生成器只会生成 <code>8</code>.</li>
<li>第二部分中 <code>g1</code> 和 <code>g2</code> 的输出差异则是由于变量 <code>array_1</code> 和 <code>array_2</code> 被重新赋值的方式导致的.</li>
<li>在第一种情况下, <code>array_1</code> 被绑定到新对象 <code>[1,2,3,4,5]</code>, 因为 <code>in</code> 子句是在声明时被执行的， 所以它仍然引用旧对象 <code>[1,2,3,4]</code>(并没有被销毁).</li>
<li>在第二种情况下, 对 <code>array_2</code> 的切片赋值将相同的旧对象 <code>[1,2,3,4]</code> 原地更新为 <code>[1,2,3,4,5]</code>. 因此 <code>g2</code> 和 <code>array_2</code> 仍然引用同一个对象(这个对象现在已经更新为 <code>[1,2,3,4,5]</code>).</li>
<li>好啦，按照目前讨论的逻辑，第三个代码段中的 <code>list(gen)</code> 的值不应该是 <code>[11, 21, 31, 12, 22, 32, 13, 23, 33]</code> 吗? （毕竟 <code>array_3</code> 和 <code>array_4</code> 的行为与 <code>array_1</code> 一样）。 <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0289/#the-details">PEP-289</a> 中解释了（只有）<code>array_4</code> 值更新的原因<blockquote>
<p>只有最外层的 for 表达式会立即计算，其他表达式会延迟到生成器运行。</p>
</blockquote>
</li>
</ul>
<hr>
<h3 id="is-not-is-not-is-not-is-not-不是-is-not"><a href="#is-not-is-not-is-not-is-not-不是-is-not" class="headerlink" title="&gt; is not ... is not is (not ...)&#x2F;is not ... 不是 is (not ...)"></a>&gt; <code>is not ...</code> is not <code>is (not ...)</code>&#x2F;<code>is not ...</code> 不是 <code>is (not ...)</code></h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;something&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;something&#x27;</span> <span class="keyword">is</span> (<span class="keyword">not</span> <span class="literal">None</span>)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-11"><a href="#💡-说明-11" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><code>is not</code> 是个单独的二元运算符, 与分别使用 <code>is</code> 和 <code>not</code> 不同.</li>
<li>如果操作符两侧的变量指向同一个对象, 则 <code>is not</code> 的结果为 <code>False</code>, 否则结果为 <code>True</code>.</li>
</ul>
<hr>
<h3 id="A-tic-tac-toe-where-X-wins-in-the-first-attempt-一蹴即至"><a href="#A-tic-tac-toe-where-X-wins-in-the-first-attempt-一蹴即至" class="headerlink" title="&gt; A tic-tac-toe where X wins in the first attempt!&#x2F;一蹴即至!"></a>&gt; A tic-tac-toe where X wins in the first attempt!&#x2F;一蹴即至!</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 我们先初始化一个变量row</span></span><br><span class="line">row = [<span class="string">&quot;&quot;</span>]*<span class="number">3</span> <span class="comment">#row i[&#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;]</span></span><br><span class="line"><span class="comment"># 并创建一个变量board</span></span><br><span class="line">board = [row]*<span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>board</span><br><span class="line">[[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>], [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>], [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>]</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">&quot;X&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board</span><br><span class="line">[[<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>], [<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>], [<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>]]</span><br></pre></td></tr></table></figure>

<p>我们有没有赋值过3个 “X” 呢？</p>
<h4 id="💡-说明-12"><a href="#💡-说明-12" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><p>当我们初始化 <code>row</code> 变量时, 下面这张图展示了内存中的情况。</p>
<p>而当通过对 <code>row</code> 做乘法来初始化 <code>board</code> 时, 内存中的情况则如下图所示 (每个元素 <code>board[0]</code>, <code>board[1]</code> 和 <code>board[2]</code> 都和 <code>row</code> 一样引用了同一列表.)</p>
<p>我们可以通过不使用变量 <code>row</code> 生成 <code>board</code> 来避免这种情况. (<a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/issues/68">这个</a>issue提出了这个需求.)</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>board = [[<span class="string">&#x27;&#x27;</span>]*<span class="number">3</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">&quot;X&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>board</span><br><span class="line">[[<span class="string">&#x27;X&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>], [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>], [<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>]]</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Schrodinger’s-variable-薛定谔的变量"><a href="#Schrodinger’s-variable-薛定谔的变量" class="headerlink" title="&gt; Schrödinger’s variable&#x2F;薛定谔的变量 *"></a>&gt; Schrödinger’s variable&#x2F;薛定谔的变量 *</h3><!-- Example ID: 4dc42f77-94cb-4eb5-a120-8203d3ed7604 --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">funcs = []</span><br><span class="line">results = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">some_func</span>():</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    funcs.append(some_func)</span><br><span class="line">    results.append(some_func()) <span class="comment"># 注意这里函数被执行了</span></span><br><span class="line"></span><br><span class="line">funcs_results = [func() <span class="keyword">for</span> func <span class="keyword">in</span> funcs]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>results</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>funcs_results</span><br><span class="line">[<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure>

<p>即使每次在迭代中将 <code>some_func</code> 加入 <code>funcs</code> 前的 <code>x</code> 值都不相同, 所有的函数还是都返回6.</p>
<p>&#x2F;&#x2F; 再换个例子</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>powers_of_x = [<span class="keyword">lambda</span> x: x**i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[f(<span class="number">2</span>) <span class="keyword">for</span> f <span class="keyword">in</span> powers_of_x]</span><br><span class="line">[<span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>, <span class="number">512</span>]</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-13"><a href="#💡-说明-13" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>当在循环内部定义一个函数时, 如果该函数在其主体中使用了循环变量, 则闭包函数将与循环变量绑定, 而不是它的值. 因此, 所有的函数都是使用最后分配给变量的值来进行计算的.</p>
</li>
<li><p>可以通过将循环变量作为命名变量传递给函数来获得预期的结果. <strong>为什么这样可行?</strong> 因为这会在函数内再次定义一个局部变量。我们可以看到它使用了来自上下文的<code>x</code>（即<em>不是</em>局部变量）：<br>（译者注: inspect位于Python标准库中，该模块用于收集python对象的信息，可以获取类或函数的参数的信息，源码，解析堆栈，对对象进行类型检查等等，Python3.3+版本支持getclosurevars函数）</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> inspect</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inspect.getclosurevars(funcs[<span class="number">0</span>])</span><br><span class="line">ClosureVars(nonlocals=&#123;&#125;, <span class="built_in">globals</span>=&#123;<span class="string">&#x27;x&#x27;</span>: <span class="number">6</span>&#125;, builtins=&#123;&#125;, unbound=<span class="built_in">set</span>())</span><br></pre></td></tr></table></figure></li>
</ul>
<p>由于 <code>x</code> 是一个全局值，我们可以通过更新 <code>x</code> 来更改 <code>funcs</code> 用来查找和返回的值：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">42</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[func() <span class="keyword">for</span> func <span class="keyword">in</span> funcs]</span><br><span class="line">[<span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>, <span class="number">42</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>要获得想要的结果，您可以将循环变量作为命名变量传递给函数。 <strong>为什么会这样？</strong> 因为这会在函数的作用域内定义变量。 它将不再进入周围（全局）范围来查找变量值，而是会创建一个局部变量来存储该时间点的“x”值。</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">funcs = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">x=x</span>):</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    funcs.append(some_func)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>funcs_results = [func() <span class="keyword">for</span> func <span class="keyword">in</span> funcs]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>funcs_results</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure>

<p>此时，不再使用全局变量 <code>x</code>：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>inspect.getclosurevars(funcs[<span class="number">0</span>])</span><br><span class="line">ClosureVars(nonlocals=&#123;&#125;, <span class="built_in">globals</span>=&#123;&#125;, builtins=&#123;&#125;, unbound=<span class="built_in">set</span>())</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="The-chicken-egg-problem-先有鸡还是先有蛋"><a href="#The-chicken-egg-problem-先有鸡还是先有蛋" class="headerlink" title="&gt; The chicken-egg problem&#x2F;先有鸡还是先有蛋 *"></a>&gt; The chicken-egg problem&#x2F;先有鸡还是先有蛋 *</h3><!-- Example ID: 60730dc2-0d79-4416-8568-2a63323b3ce8 --->

<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="number">3</span>, <span class="built_in">int</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="built_in">type</span>, <span class="built_in">object</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="built_in">object</span>, <span class="built_in">type</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>那么到底谁是“最终”的基类呢？下边顺便列出更多的令人困惑的地方</p>
<p>2. </p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">class</span> <span class="title class_">A</span>: <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(A, A)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="built_in">type</span>, <span class="built_in">type</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="built_in">object</span>, <span class="built_in">object</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">int</span>, <span class="built_in">object</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">type</span>, <span class="built_in">object</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">object</span>, <span class="built_in">type</span>)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>


<h4 id="💡-说明-14"><a href="#💡-说明-14" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><code>type</code> 是 Python 中的<a target="_blank" rel="noopener" href="https://realpython.com/python-metaclasses/">元类</a>。</li>
<li>Python 中，<strong>一切</strong>皆对象，其中包括类及其对象（实例）。</li>
<li><code>type</code> 类型是<code>object</code>类的元类，每个类（包括<code>type</code>）都直接或间接地继承自<code>object</code>。</li>
<li>对象和类型之间没有真正的基类。上述片段中的令人困惑的地方之所以出现，是因为我们从 Python 类的角度考虑这些关系（issubclass 和 isinstance）。 <code>object</code>和<code>type</code>之间的关系不能在纯python中重现。 更准确地说，以下关系不能在纯 Python 中重现:<ul>
<li>A类是B类的一个实例，B类是A类的一个实例。</li>
<li>A类是它自己的一个实例。</li>
</ul>
</li>
<li><code>object</code>和<code>type</code>之间的关系（既是彼此的实例，也是它们自己的实例）存在于 Python 中，这是源于实现层级上的“作弊”行为。</li>
</ul>
<hr>
<h3 id="Subclass-relationships-子类关系"><a href="#Subclass-relationships-子类关系" class="headerlink" title="&gt; Subclass relationships&#x2F;子类关系 *"></a>&gt; Subclass relationships&#x2F;子类关系 *</h3><p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Hashable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">list</span>, <span class="built_in">object</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">object</span>, Hashable)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">list</span>, Hashable)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>子类关系应该是可传递的, 对吧? (即, 如果 <code>A</code> 是 <code>B</code> 的子类, <code>B</code> 是 <code>C</code> 的子类, 那么 <code>A</code> <em>应该</em> 是 <code>C</code> 的子类.)</p>
<h4 id="💡-说明-15"><a href="#💡-说明-15" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>Python 中的子类关系并不一定是传递的. 任何人都可以在元类中随意定义 <code>__subclasscheck__</code>.</li>
<li>当 <code>issubclass(cls, Hashable)</code> 被调用时, 它只是在 <code>cls</code> 中寻找 <code>__hash__</code> 方法或者从继承的父类中寻找 <code>__hash__</code> 方法.</li>
<li>由于 <code>object</code> is 可散列的(hashable), 但是 <code>list</code> 是不可散列的, 所以它打破了这种传递关系.</li>
<li>在<a target="_blank" rel="noopener" href="https://www.naftaliharris.com/blog/python-subclass-intransitivity/">这里</a>可以找到更详细的解释.</li>
</ul>
<hr>
<h3 id="Methods-equality-and-identity-方法的相等性和唯一性"><a href="#Methods-equality-and-identity-方法的相等性和唯一性" class="headerlink" title="&gt; Methods equality and identity&#x2F;方法的相等性和唯一性 *"></a>&gt; Methods equality and identity&#x2F;方法的相等性和唯一性 *</h3><!-- Example ID: 94802911-48fe-4242-defa-728ae893fa32 --->

<ol>
<li><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">method</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">classm</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">staticm</span>():</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(SomeClass.method <span class="keyword">is</span> SomeClass.method)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(SomeClass.classm <span class="keyword">is</span> SomeClass.classm)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(SomeClass.classm == SomeClass.classm)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(SomeClass.staticm <span class="keyword">is</span> SomeClass.staticm)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>访问 <code>classm</code> 两次，我们得到一个相等的对象，但不是<em>同一个</em>？ 让我们看看 <code>SomeClass</code> 的实例会发生什么：</p>
<ol start="2">
<li><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">o1 = SomeClass()</span><br><span class="line">o2 = SomeClass()</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(o1.method == o2.method)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(o1.method == o1.method)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(o1.method <span class="keyword">is</span> o1.method)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(o1.classm <span class="keyword">is</span> o1.classm)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(o1.classm == o1.classm == o2.classm == SomeClass.classm)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(o1.staticm <span class="keyword">is</span> o1.staticm <span class="keyword">is</span> o2.staticm <span class="keyword">is</span> SomeClass.staticm)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>访问 <code> classm</code> or <code>method</code> 两次, 为 <code>SomeClass</code> 的同一个实例创建了相等但是<em>不同</em>的对象。</p>
<h4 id="💡-说明-16"><a href="#💡-说明-16" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li>函数是<a target="_blank" rel="noopener" href="https://docs.python.org/3/howto/descriptor.html">描述符</a>。每当将函数作为属性访问时，就会调用描述符，创建一个方法对象，该对象将函数与拥有该属性的对象“绑定”。如果被调用，该方法调用函数，隐式传递绑定对象作为第一个参数（这就是我们如何将 self 作为第一个参数获取，尽管没有显式传递它）。</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1.method</span><br><span class="line">&lt;bound method SomeClass.method of &lt;__main__.SomeClass <span class="built_in">object</span> at ...&gt;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>多次访问该属性，每次都会创建一个方法对象！ 因此，<code>o1.method is o1.method</code> 永远不会是真的。但是，将函数作为类属性（而不是实例）访问并不会创建方法对象，所以 <code>SomeClass.method is SomeClass.method</code> 是真的。</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SomeClass.method</span><br><span class="line">&lt;function SomeClass.method at ...&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>classmethod</code> 将函数转换为类方法。 类方法是描述符，当被访问时，它会创建一个绑定<em>类本身</em>的方法对象，而不是对象本身。</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1.classm</span><br><span class="line">&lt;bound method SomeClass.classm of &lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.SomeClass&#x27;</span>&gt;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>与函数不同，<code>classmethod</code> 在作为类属性访问时也会创建一个方法（在这种情况下，它们绑定类，而不是类的类型）。 所以 <code>SomeClass.classm is SomeClass.classm</code> 是假的。</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SomeClass.classm</span><br><span class="line">&lt;bound method SomeClass.classm of &lt;<span class="keyword">class</span> <span class="string">&#x27;__main__.SomeClass&#x27;</span>&gt;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>当两个函数相等并且绑定的对象相同时，方法对象比较相等。 所以<code>o1.method == o1.method</code> 为真，尽管它们在内存中是两个不同的对象。</li>
<li><code>staticmethod</code> 将函数转换为“无操作”描述符，它按原样返回函数。没有方法对象被创建，所以 <code>is</code> 的比较运算为真。</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1.staticm</span><br><span class="line">&lt;function SomeClass.staticm at ...&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>SomeClass.staticm</span><br><span class="line">&lt;function SomeClass.staticm at ...&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>每次 Python 调用实例方法时都必须创建新的“方法”对象，并且每次都必须修改参数以插入 <code>self</code> 严重影响性能。CPython 3.7 <a target="_blank" rel="noopener" href="https://bugs.python.org/issue26110">解决了这个问题</a> 。通过引入新的操作码来处理调用方法而不创建临时方法对象。这仅在实际调用访问的函数时使用，因此这里的代码片段不受影响，仍然会生成方法:)</li>
</ul>
<hr>
<h3 id="All-true-ation-返回True的all函数"><a href="#All-true-ation-返回True的all函数" class="headerlink" title="&gt; All-true-ation&#x2F;返回True的all函数 *"></a>&gt; All-true-ation&#x2F;返回True的all函数 *</h3><!-- Example ID: dfe6d845-e452-48fe-a2da-0ed3869a8042 -->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">all</span>([<span class="literal">True</span>, <span class="literal">True</span>, <span class="literal">True</span>])</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">all</span>([<span class="literal">True</span>, <span class="literal">True</span>, <span class="literal">False</span>])</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">all</span>([])</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">all</span>([[]])</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">all</span>([[[]]])</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>为什么会有这种True-False的变化？</p>
<h4 id="💡-说明-17"><a href="#💡-说明-17" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p><code>all</code> 函数的实现等价于：</p>
</li>
<li><pre><code class="py">def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- `all([])` 返回 `True` 因为可迭代对象为空。 </span><br><span class="line">- `all([[]])` 返回 `False` 因为传入的数组有一个元素 `[]`， 在Python中，空列表为假。</span><br><span class="line">- `all([[[]]])` 和更高的递归变体总是`True`。 这是因为传递的数组的单个元素（`[[...]]`）不再是空的，而有值的列表为真。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">### &gt; The surprising comma/意外的逗号</span><br><span class="line"></span><br><span class="line">**Output:**</span><br><span class="line">```py</span><br><span class="line">&gt;&gt;&gt; def f(x, y,):</span><br><span class="line">...     print(x, y)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; def g(x=4, y=5,):</span><br><span class="line">...     print(x, y)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; def h(x, **kwargs,):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1</span><br><span class="line">    def h(x, **kwargs,):</span><br><span class="line">                     ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line">&gt;&gt;&gt; def h(*args,):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1</span><br><span class="line">    def h(*args,):</span><br><span class="line">                ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h4 id="💡-说明-18"><a href="#💡-说明-18" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>在Python函数的形式参数列表中, 尾随逗号并不一定是合法的.</li>
<li>在Python中, 参数列表部分用前置逗号定义, 部分用尾随逗号定义. 这种冲突导致逗号被夹在中间, 没有规则定义它.(译:这一句看得我也很懵逼,只能强翻了.详细解释看下面的讨论帖会一目了然.)</li>
<li><strong>注意:</strong> 尾随逗号的问题已经在Python 3.6中被<a target="_blank" rel="noopener" href="https://bugs.python.org/issue9232">修复</a>了. 而这篇<a target="_blank" rel="noopener" href="https://bugs.python.org/issue9232#msg248399">帖子</a>中则简要讨论了Python中尾随逗号的不同用法.</li>
</ul>
<hr>
<h3 id="Strings-and-the-backslashes-字符串与反斜杠"><a href="#Strings-and-the-backslashes-字符串与反斜杠" class="headerlink" title="&gt; Strings and the backslashes&#x2F;字符串与反斜杠"></a>&gt; Strings and the backslashes&#x2F;字符串与反斜杠</h3><!-- Example ID: 6ae622c3-6d99-4041-9b33-507bd1a4407b --->

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&quot;\&quot;&quot;</span>)</span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt;&gt;&gt; print(r&quot;</span>\<span class="string">&quot;&quot;</span>)</span><br><span class="line">\<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt;&gt;&gt; print(r&quot;</span>\<span class="string">&quot;)</span></span><br><span class="line"><span class="string">File &quot;</span>&lt;stdin&gt;<span class="string">&quot;, line 1</span></span><br><span class="line"><span class="string">    print(r&quot;</span>\<span class="string">&quot;)</span></span><br><span class="line"><span class="string">              ^</span></span><br><span class="line"><span class="string">SyntaxError: EOL while scanning string literal</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt;&gt;&gt; r&#x27;\&#x27;&#x27; == &quot;</span>\\<span class="string">&#x27;&quot;</span></span><br><span class="line"><span class="string">True</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-19"><a href="#💡-说明-19" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>在一般的python字符串中，反斜杠用于转义可能具有特殊含义的字符（如单引号、双引号和反斜杠本身）。</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;wt\&quot;f&quot;</span></span><br><span class="line"><span class="string">&#x27;wt&quot;f&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在以 <code>r</code> 开头的原始字符串中, 反斜杠并没有特殊含义.</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">r&#x27;wt\&quot;f&#x27;</span> == <span class="string">&#x27;wt\\&quot;f&#x27;</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">repr</span>(<span class="string">r&#x27;wt\&quot;f&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;wt\\&quot;f&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">r&quot;\\n&quot;</span>)</span><br><span class="line"><span class="string">&#x27;\\n&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>这意味着当解析器在原始字符串中遇到反斜杠时，它期望后面有另一个字符。 在我们的例子中（<code>print(r&quot;\&quot;)</code>），反斜杠转义了尾随引号，使解析器没有终止引号（因此产生了<code>SyntaxError</code>）。 这就是为什么反斜杠在原始字符串末尾不起作用的原因。</p>
</li>
</ul>
<hr>
<h3 id="not-knot-别纠结"><a href="#not-knot-别纠结" class="headerlink" title="&gt; not knot!&#x2F;别纠结!"></a>&gt; not knot!&#x2F;别纠结!</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">x = <span class="literal">True</span></span><br><span class="line">y = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> x == y</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x == <span class="keyword">not</span> y</span><br><span class="line">  File <span class="string">&quot;&lt;input&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    x == <span class="keyword">not</span> y</span><br><span class="line">           ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-20"><a href="#💡-说明-20" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>运算符的优先级会影响表达式的求值顺序, 而在 Python 中 <code>==</code> 运算符的优先级要高于 <code>not</code> 运算符.</li>
<li>所以 <code>not x == y</code> 相当于 <code>not (x == y)</code>, 同时等价于 <code>not (True == False)</code>, 最后的运算结果就是 <code>True</code>.</li>
<li>之所以 <code>x == not y</code> 会抛一个 <code>SyntaxError</code> 异常, 是因为它会被认为等价于 <code>(x == not) y</code>, 而不是你一开始期望的 <code>x == (not y)</code>.</li>
<li>解释器期望 <code>not</code> 标记是 <code>not in</code> 操作符的一部分 (因为 <code>==</code> 和 <code>not in</code> 操作符具有相同的优先级), 但是它在 <code>not</code> 标记后面找不到 <code>in</code> 标记, 所以会抛出 <code>SyntaxError</code> 异常.</li>
</ul>
<hr>
<h3 id="Half-triple-quoted-strings-三个引号"><a href="#Half-triple-quoted-strings-三个引号" class="headerlink" title="&gt; Half triple-quoted strings&#x2F;三个引号"></a>&gt; Half triple-quoted strings&#x2F;三个引号</h3><p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;wtfpython&#x27;</span><span class="string">&#x27;&#x27;</span>)</span><br><span class="line">wtfpython</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&quot;wtfpython&quot;</span><span class="string">&quot;&quot;</span>)</span><br><span class="line">wtfpython</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># 下面的语句会抛出 `SyntaxError` 异常</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># print(&#x27;&#x27;&#x27;wtfpython&#x27;)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># print(&quot;&quot;&quot;wtfpython&quot;)</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-21"><a href="#💡-说明-21" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>Python 提供隐式的<a target="_blank" rel="noopener" href="https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation">字符串连接</a>, 例如,<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&quot;wtf&quot; &quot;python&quot;)</span><br><span class="line">wtfpython</span><br><span class="line">&gt;&gt;&gt; print(&quot;wtf&quot; &quot;&quot;) # or &quot;wtf&quot;&quot;&quot;</span><br><span class="line">wtf</span><br></pre></td></tr></table></figure></li>
<li><code>&#39;&#39;&#39;</code> 和 <code>&quot;&quot;&quot;</code> 在 Python中也是字符串定界符, Python 解释器在先遇到三个引号的的时候会尝试再寻找三个终止引号作为定界符, 如果不存在则会导致 <code>SyntaxError</code> 异常.</li>
</ul>
<hr>
<h3 id="What’s-wrong-with-booleans-布尔你咋了"><a href="#What’s-wrong-with-booleans-布尔你咋了" class="headerlink" title="&gt; What’s wrong with booleans?&#x2F;布尔你咋了?"></a>&gt; What’s wrong with booleans?&#x2F;布尔你咋了?</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一个简单的例子, 统计下面可迭代对象中的布尔型值的个数和整型值的个数</span></span><br><span class="line">mixed_list = [<span class="literal">False</span>, <span class="number">1.0</span>, <span class="string">&quot;some_string&quot;</span>, <span class="number">3</span>, <span class="literal">True</span>, [], <span class="literal">False</span>]</span><br><span class="line">integers_found_so_far = <span class="number">0</span></span><br><span class="line">booleans_found_so_far = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> mixed_list:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(item, <span class="built_in">int</span>):</span><br><span class="line">        integers_found_so_far += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(item, <span class="built_in">bool</span>):</span><br><span class="line">        booleans_found_so_far += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>integers_found_so_far</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>booleans_found_so_far</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_bool = <span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;wtf&quot;</span> * some_bool</span><br><span class="line"><span class="string">&#x27;wtf&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_bool = <span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;wtf&quot;</span> * some_bool</span><br><span class="line"><span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">tell_truth</span>():</span><br><span class="line">    <span class="literal">True</span> = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> <span class="literal">True</span> == <span class="literal">False</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I have lost faith in truth!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output (&lt; 3.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tell_truth()</span><br><span class="line">I have lost faith <span class="keyword">in</span> truth!</span><br></pre></td></tr></table></figure>


<h4 id="💡-说明-22"><a href="#💡-说明-22" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>布尔值是 <code>int</code> 的子类</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">bool</span>, <span class="built_in">int</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">issubclass</span>(<span class="built_in">int</span>, <span class="built_in">bool</span>)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>因此，<code>True</code> 和 <code>False</code> 是 <code>int</code> 的实例</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="literal">True</span>, <span class="built_in">int</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">isinstance</span>(<span class="literal">False</span>, <span class="built_in">int</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>True</code> 的整数值是 <code>1</code>, 而 <code>False</code> 的整数值是 <code>0</code></p>
</li>
</ul>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="literal">True</span>)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="literal">False</span>)</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>关于其背后的原理, 请看这个 StackOverflow 的<a target="_blank" rel="noopener" href="https://stackoverflow.com/a/8169049/4354153">回答</a>.</p>
</li>
<li><p>最初，Python 没有 <code>bool</code> 类型（人们使用 0 表示假，使用非零值，如 1 表示真）。<code>True</code>、<code>False</code> 和 <code>bool</code> 类型在 2.x 版本中被添加，但为了向后兼容，<code>True</code> 和 <code>False</code> 不能成为常量。它们只是内置变量，可以重新分配它们</p>
</li>
<li><p>Python 3 向后不兼容，问题终于得到解决，因此最后一个代码段不适用于 Python 3.x！</p>
</li>
</ul>
<hr>
<h3 id="Class-attributes-and-instance-attributes-类属性和实例属性"><a href="#Class-attributes-and-instance-attributes-类属性和实例属性" class="headerlink" title="&gt; Class attributes and instance attributes&#x2F;类属性和实例属性"></a>&gt; Class attributes and instance attributes&#x2F;类属性和实例属性</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x, B.x, C.x</span><br><span class="line">(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B.x = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x, B.x, C.x</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A.x, B.x, C.x</span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = A()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.x, A.x</span><br><span class="line">(<span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.x += <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.x, A.x</span><br><span class="line">(<span class="number">4</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    some_var = <span class="number">15</span></span><br><span class="line">    some_list = [<span class="number">5</span>]</span><br><span class="line">    another_list = [<span class="number">5</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="variable language_">self</span>.some_var = x + <span class="number">1</span></span><br><span class="line">        <span class="variable language_">self</span>.some_list = <span class="variable language_">self</span>.some_list + [x]</span><br><span class="line">        <span class="variable language_">self</span>.another_list += [x]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_obj = SomeClass(<span class="number">420</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_obj.some_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">420</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_obj.another_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">420</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj = SomeClass(<span class="number">111</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.some_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">111</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.another_list</span><br><span class="line">[<span class="number">5</span>, <span class="number">420</span>, <span class="number">111</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.another_list <span class="keyword">is</span> SomeClass.another_list</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_obj.another_list <span class="keyword">is</span> some_obj.another_list</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-23"><a href="#💡-说明-23" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>类变量和实例变量在内部是通过类对象的字典来处理(译: 就是 <code>__dict__</code> 属性). 如果在当前类的字典中找不到的话就去它的父类中寻找.</li>
<li><code>+=</code> 运算符会在原地修改可变对象, 而不是创建新对象. 因此, 在这种情况下, 修改一个实例的属性会影响其他实例和类属性.</li>
</ul>
<hr>
<h3 id="yielding-None-生成-None"><a href="#yielding-None-生成-None" class="headerlink" title="&gt; yielding None&#x2F;生成 None"></a>&gt; yielding None&#x2F;生成 None</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_iterable = (<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">val</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;something&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable]</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[(<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable]</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;listcomp&gt; at <span class="number">0x7f70b0a4ad58</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>([(<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable])</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>((<span class="keyword">yield</span> x) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable)</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="literal">None</span>, <span class="string">&#x27;b&#x27;</span>, <span class="literal">None</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(some_func((<span class="keyword">yield</span> x)) <span class="keyword">for</span> x <span class="keyword">in</span> some_iterable)</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;something&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;something&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-24"><a href="#💡-说明-24" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>来源和解释可以在这里找到: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions">https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions</a></li>
<li>相关错误报告: <a target="_blank" rel="noopener" href="http://bugs.python.org/issue10544">http://bugs.python.org/issue10544</a></li>
<li>这个bug在3.7以后的版本中不被推荐使用, 并在3.8中被修复. 因此在3.8中尝试在推导式中使用 yield, 只会得到一个 SyntaxError. 详细内容可以看<a target="_blank" rel="noopener" href="https://docs.python.org/dev/whatsnew/3.7.html#deprecated-python-behavior">3.7更新内容</a>, <a target="_blank" rel="noopener" href="https://docs.python.org/dev/whatsnew/3.8.html#changes-in-python-behavior">3.8更新内容</a>.</li>
</ul>
<hr>
<h3 id="Yielding-from…-return-生成器里的return"><a href="#Yielding-from…-return-生成器里的return" class="headerlink" title="&gt; Yielding from… return!&#x2F;生成器里的return *"></a>&gt; Yielding from… return!&#x2F;生成器里的return *</h3><!-- Example ID: 5626d8ef-8802-49c2-adbc-7cda5c550816 --->
<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;wtf&quot;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">from</span> <span class="built_in">range</span>(x)</span><br></pre></td></tr></table></figure>

<p><strong>Output (&gt; 3.3):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(some_func(<span class="number">3</span>))</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<p><code>&quot;wtf&quot;</code> 去哪儿了？是因为<code>yield from</code>的一些特殊效果吗？让我们验证一下</p>
<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;wtf&quot;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(x):</span><br><span class="line">          <span class="keyword">yield</span> i</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(some_func(<span class="number">3</span>))</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>

<p>同样的结果，这里也不起作用。</p>
<h4 id="💡-说明-25"><a href="#💡-说明-25" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li>从 Python 3.3 开始，可以在生成器中使用带有值的 <code>return</code> 语句（参见 <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0380/">PEP380</a>）。 <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0380/#enhancements-to-stopiteration">官方文档</a> 描述，</li>
</ul>
<blockquote>
<p>“… 生成器中的 <code>return expr</code> 会导致在退出生成器时引发 <code>StopIteration(expr)</code>。”</p>
</blockquote>
<ul>
<li><p>在 <code>some_func(3)</code> 例子中，<code>return</code> 语句在开始就引发了<code>StopIteration</code>。 <code>StopIteration</code> 异常会在<code>list(...)</code> 包装器和<code>for</code> 循环中自动捕获。 因此，以上两个片段都产生的是一个空列表。</p>
</li>
<li><p>要从生成器 <code>some_func</code> 中获取 <code>[&quot;wtf&quot;]</code>，我们需要捕获 <code>StopIteration</code> 异常，</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">next</span>(some_func(<span class="number">3</span>))</span><br><span class="line"><span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">    some_string = e.value</span><br></pre></td></tr></table></figure>

  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_string</span><br><span class="line">[<span class="string">&quot;wtf&quot;</span>]</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Nan-reflexivity-Nan的自反性"><a href="#Nan-reflexivity-Nan的自反性" class="headerlink" title="&gt; Nan-reflexivity&#x2F;Nan的自反性"></a>&gt; Nan-reflexivity&#x2F;Nan的自反性</h3><!-- Example ID: 59bee91a-36e0-47a4-8c7d-aa89bf1d3976 --->

<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">b = <span class="built_in">float</span>(<span class="string">&#x27;nan&#x27;</span>)</span><br><span class="line">c = <span class="built_in">float</span>(<span class="string">&#x27;-iNf&#x27;</span>)  <span class="comment"># 这些字符串不区分大小写</span></span><br><span class="line">d = <span class="built_in">float</span>(<span class="string">&#x27;nan&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">inf</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">nan</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line">-inf</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">float</span>(<span class="string">&#x27;some_other_string&#x27;</span>)</span><br><span class="line">ValueError: could <span class="keyword">not</span> convert string to <span class="built_in">float</span>: some_other_string</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == -c <span class="comment">#inf==inf</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span> == <span class="literal">None</span> <span class="comment"># None==None</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b == d <span class="comment">#但是 nan!=nan</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">50</span>/a</span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a/a</span><br><span class="line">nan</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">23</span> + b</span><br><span class="line">nan</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="built_in">float</span>(<span class="string">&#x27;nan&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x / x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y <span class="keyword">is</span> y <span class="comment"># 同一性(identity)具备</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y == y <span class="comment"># y不具备相等性(equality)</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[y] == [y] <span class="comment"># 但包含y的列表验证相等性(equality)成功了</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-26"><a href="#💡-说明-26" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><p><code>&#39;inf&#39;</code> 和 <code>&#39;nan&#39;</code> 是特殊的字符串(不区分大小写), 当显示转换成 <code>float</code> 型时, 它们分别用于表示数学意义上的 “无穷大” 和 “非数字”.</p>
<ul>
<li><p>由于根据 IEEE 标准 <code>NaN != NaN</code>，遵守此规则打破了 Python 中集合元素的自反性假设，即如果 <code>x</code> 是 <code>list</code> 等集合的一部分，则比较等运算的实现基于假设<code>x == x</code>。由于这个假设，在比较两个元素时首先比较身份<code>identity</code>（因为它更快），并且仅在身份不匹配时才比较值。以下片段将更清楚地说明，</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="built_in">float</span>(<span class="string">&#x27;nan&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x == x, [x] == [x]</span><br><span class="line">(<span class="literal">False</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="built_in">float</span>(<span class="string">&#x27;nan&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y == y, [y] == [y]</span><br><span class="line">(<span class="literal">False</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x == y, [x] == [y]</span><br><span class="line">(<span class="literal">False</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>由于 <code>x</code> 和 <code>y</code> 的身份<code>identity</code>不同，所以考虑的值也不同； 因此这次比较返回“False”。</p>
</li>
<li><p>感兴趣可以阅读 <a target="_blank" rel="noopener" href="https://bertrandmeyer.com/2010/02/06/reflexivity-and-other-pillars-of-civilization/">Reflexivity, and other pillars of civilization</a></p>
</li>
</ul>
<hr>
<h3 id="Mutating-the-immutable-强人所难"><a href="#Mutating-the-immutable-强人所难" class="headerlink" title="&gt; Mutating the immutable!&#x2F;强人所难"></a>&gt; Mutating the immutable!&#x2F;强人所难</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_tuple = (<span class="string">&quot;A&quot;</span>, <span class="string">&quot;tuple&quot;</span>, <span class="string">&quot;with&quot;</span>, <span class="string">&quot;values&quot;</span>)</span><br><span class="line">another_tuple = ([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>])</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_tuple[<span class="number">2</span>] = <span class="string">&quot;change this&quot;</span></span><br><span class="line">TypeError: <span class="string">&#x27;tuple&#x27;</span> <span class="built_in">object</span> does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple[<span class="number">2</span>].append(<span class="number">1000</span>) <span class="comment"># 这里不出现错误</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">1000</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple[<span class="number">2</span>] += [<span class="number">99</span>, <span class="number">999</span>]</span><br><span class="line">TypeError: <span class="string">&#x27;tuple&#x27;</span> <span class="built_in">object</span> does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_tuple</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">1000</span>, <span class="number">99</span>, <span class="number">999</span>])</span><br></pre></td></tr></table></figure>

<p>我还以为元组是不可变的呢…</p>
<h4 id="💡-说明-27"><a href="#💡-说明-27" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>引用 <a target="_blank" rel="noopener" href="https://docs.python.org/2/reference/datamodel.html">https://docs.python.org/2/reference/datamodel.html</a></p>
<blockquote>
<p>不可变序列<br>      不可变序列的对象一旦创建就不能再改变. (如果对象包含对其他对象的引用，则这些其他对象可能是可变的并且可能会被修改; 但是，由不可变对象直接引用的对象集合不能更改.)</p>
</blockquote>
</li>
<li><p><code>+=</code> 操作符在原地修改了列表. 元素赋值操作并不工作, 但是当异常抛出时, 元素已经在原地被修改了.</p>
</li>
</ul>
<p>(译: 对于不可变对象, 这里指tuple, <code>+=</code> 并不是原子操作, 而是 <code>extend</code> 和 <code>=</code> 两个动作, 这里 <code>=</code> 操作虽然会抛出异常, 但 <code>extend</code> 操作已经修改成功了. 详细解释可以看<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000010767068">这里</a>)</p>
<hr>
<h3 id="The-disappearing-variable-from-outer-scope-消失的外部变量"><a href="#The-disappearing-variable-from-outer-scope-消失的外部变量" class="headerlink" title="&gt; The disappearing variable from outer scope&#x2F;消失的外部变量"></a>&gt; The disappearing variable from outer scope&#x2F;消失的外部变量</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">e = <span class="number">7</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(e)</span><br><span class="line"><span class="comment"># prints nothing</span></span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 3.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(e)</span><br><span class="line">NameError: name <span class="string">&#x27;e&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-28"><a href="#💡-说明-28" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>出处: <a target="_blank" rel="noopener" href="https://docs.python.org/3/reference/compound_stmts.html#except">https://docs.python.org/3/reference/compound_stmts.html#except</a></p>
<p>当使用 <code>as</code> 为目标分配异常的时候, 将在except子句的末尾清除该异常.</p>
<p>这就好像</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">except</span> E <span class="keyword">as</span> N:</span><br><span class="line">    foo</span><br></pre></td></tr></table></figure>

<p>会被翻译成</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">except</span> E <span class="keyword">as</span> N:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        foo</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">del</span> N</span><br></pre></td></tr></table></figure>

<p>这意味着异常必须在被赋值给其他变量才能在 <code>except</code> 子句之后引用它. 而异常之所以会被清除, 则是由于上面附加的回溯信息(trackback)会和栈帧(stack frame)形成循环引用, 使得该栈帧中的所有本地变量在下一次垃圾回收发生之前都处于活动状态.(译: 也就是说不会被回收)</p>
</li>
<li><p>子句在 Python 中并没有独立的作用域. 示例中的所有内容都处于同一作用域内, 所以变量 <code>e</code> 会由于执行了 <code>except</code> 子句而被删除. 而对于有独立的内部作用域的函数来说情况就不一样了. 下面的例子说明了这一点:</p>
   <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">del</span>(x)</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">x = <span class="number">5</span></span><br><span class="line">y = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p>   <strong>Output:</strong></p>
   <figure class="highlight py"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;f(x)</span><br><span class="line">UnboundLocalError: local variable <span class="string">&#x27;x&#x27;</span> referenced before assignment</span><br><span class="line">&gt;&gt;&gt;f(y)</span><br><span class="line">UnboundLocalError: local variable <span class="string">&#x27;x&#x27;</span> referenced before assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">[<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Python 2.x 中, <code>Exception()</code> 实例被赋值给了变量 <code>e</code>, 所以当你尝试打印结果的时候, 它的输出为空.（译: 正常的Exception实例打印出来就是空）</p>
<p>  <strong>Output (Python 2.x):</strong></p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line">Exception()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span> e</span><br><span class="line"><span class="comment"># 没有打印任何内容!</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="The-mysterious-key-type-conversion-神秘的键型转换"><a href="#The-mysterious-key-type-conversion-神秘的键型转换" class="headerlink" title="&gt; The mysterious key type conversion&#x2F;神秘的键型转换 *"></a>&gt; The mysterious key type conversion&#x2F;神秘的键型转换 *</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>(<span class="title class_ inherited__">str</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">some_dict = &#123;<span class="string">&#x27;s&#x27;</span>:<span class="number">42</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(<span class="built_in">list</span>(some_dict.keys())[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">str</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = SomeClass(<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[s] = <span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict <span class="comment"># 预期: 两个不同的键值对</span></span><br><span class="line">&#123;<span class="string">&#x27;s&#x27;</span>: <span class="number">40</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(<span class="built_in">list</span>(some_dict.keys())[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">str</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-29"><a href="#💡-说明-29" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>由于 <code>SomeClass</code> 会从 <code>str</code> 自动继承 <code>__hash__</code> 方法, 所以 <code>s</code> 对象和 <code>&quot;s&quot;</code> 字符串的哈希值是相同的.</li>
<li>而 <code>SomeClass(&quot;s&quot;) == &quot;s&quot;</code> 为 <code>True</code> 是因为 <code>SomeClass</code> 也继承了 <code>str</code> 类 <code>__eq__</code> 方法.</li>
<li>由于两者的哈希值相同且相等, 所以它们在字典中表示相同的键.</li>
<li>如果想要实现期望的功能, 我们可以重定义 <code>SomeClass</code> 的 <code>__eq__</code> 方法.<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>(<span class="title class_ inherited__">str</span>):</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">          <span class="built_in">type</span>(<span class="variable language_">self</span>) <span class="keyword">is</span> SomeClass</span><br><span class="line">          <span class="keyword">and</span> <span class="built_in">type</span>(other) <span class="keyword">is</span> SomeClass</span><br><span class="line">          <span class="keyword">and</span> <span class="built_in">super</span>().__eq__(other)</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 当我们自定义 __eq__ 方法时, Python 不会再自动继承 __hash__ 方法</span></span><br><span class="line">  <span class="comment"># 所以我们也需要定义它</span></span><br><span class="line">  __hash__ = <span class="built_in">str</span>.__hash__</span><br><span class="line"></span><br><span class="line">some_dict = &#123;<span class="string">&#x27;s&#x27;</span>:<span class="number">42</span>&#125;</span><br></pre></td></tr></table></figure>

<strong>Output:</strong><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = SomeClass(<span class="string">&#x27;s&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[s] = <span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict</span><br><span class="line">&#123;<span class="string">&#x27;s&#x27;</span>: <span class="number">40</span>, <span class="string">&#x27;s&#x27;</span>: <span class="number">42</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>keys = <span class="built_in">list</span>(some_dict.keys())</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(keys[<span class="number">0</span>]), <span class="built_in">type</span>(keys[<span class="number">1</span>])</span><br><span class="line">(__main__.SomeClass, <span class="built_in">str</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Let’s-see-if-you-can-guess-this-看看你能否猜到这一点"><a href="#Let’s-see-if-you-can-guess-this-看看你能否猜到这一点" class="headerlink" title="&gt; Let’s see if you can guess this?&#x2F;看看你能否猜到这一点?"></a>&gt; Let’s see if you can guess this?&#x2F;看看你能否猜到这一点?</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a, b = a[b] = &#123;&#125;, <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">&#123;<span class="number">5</span>: (&#123;...&#125;, <span class="number">5</span>)&#125;</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-30"><a href="#💡-说明-30" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>根据 <a target="_blank" rel="noopener" href="https://docs.python.org/2/reference/simple_stmts.html#assignment-statements">Python 语言参考</a>, 赋值语句的形式如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(target_list &quot;=&quot;)+ (expression_list | yield_expression)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>赋值语句计算表达式列表(expression list)(牢记 这可以是单个表达式或以逗号分隔的列表, 后者返回元组)并将单个结果对象从左到右分配给目标列表中的每一项.</p>
</blockquote>
</li>
<li><p><code>(target_list &quot;=&quot;)+</code> 中的 <code>+</code> 意味着可以有<strong>一个或多个</strong>目标列表. 在这个例子中, 目标列表是 <code>a, b</code> 和 <code>a[b]</code> (注意表达式列表只能有一个, 在我们的例子中是 <code>&#123;&#125;, 5</code>).</p>
</li>
<li><p>表达式列表计算结束后, 将其值自动解包后<strong>从左到右</strong>分配给目标列表(target list). 因此, 在我们的例子中, 首先将 <code>&#123;&#125;, 5</code> 元组并赋值给 <code>a, b</code>, 然后我们就可以得到 <code>a = &#123;&#125;</code> 且 <code>b = 5</code>.</p>
</li>
<li><p><code>a</code> 被赋值的 <code>&#123;&#125;</code> 是可变对象.</p>
</li>
<li><p>第二个目标列表是 <code>a[b]</code> (你可能觉得这里会报错, 因为在之前的语句中 <code>a</code> 和 <code>b</code> 都还没有被定义. 但是别忘了, 我们刚刚将 <code>a</code> 赋值 <code>&#123;&#125;</code> 且将 <code>b</code> 赋值为 <code>5</code>).</p>
</li>
<li><p>现在, 我们将通过将字典中键 <code>5</code> 的值设置为元组 <code>(&#123;&#125;, 5)</code> 来创建循环引用 (输出中的 <code>&#123;...&#125;</code> 指与 <code>a</code> 引用了相同的对象). 下面是一个更简单的循环引用的例子</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list = some_list[<span class="number">0</span>] = [<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list</span><br><span class="line">[[...]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list[<span class="number">0</span>]</span><br><span class="line">[[...]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list <span class="keyword">is</span> some_list[<span class="number">0</span>]</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] == some_list</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>我们的例子就是这种情况 (<code>a[b][0]</code> 与 <code>a</code> 是相同的对象)</p>
</li>
<li><p>总结一下, 你也可以把例子拆成</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a, b = &#123;&#125;, <span class="number">5</span></span><br><span class="line">a[b] = a, b</span><br></pre></td></tr></table></figure>
<p>并且可以通过 <code>a[b][0]</code> 与 <code>a</code> 是相同的对象来证明是循环引用</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[b][<span class="number">0</span>] <span class="keyword">is</span> a</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Exceeds-the-limit-for-integer-string-conversion-整型转字符串越界"><a href="#Exceeds-the-limit-for-integer-string-conversion-整型转字符串越界" class="headerlink" title="&gt; Exceeds the limit for integer string conversion&#x2F;整型转字符串越界"></a>&gt; Exceeds the limit for integer string conversion&#x2F;整型转字符串越界</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Python 3.10.6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&quot;2&quot;</span> * <span class="number">5432</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Python 3.10.8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&quot;2&quot;</span> * <span class="number">5432</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Python 3.10.6</span></span><br><span class="line"><span class="number">222222222222222222222222222222222222222222222222222222222222222.</span>..</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Python 3.10.8</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">   ...</span><br><span class="line">ValueError: Exceeds the limit (<span class="number">4300</span>) <span class="keyword">for</span> integer string conversion:</span><br><span class="line">   value has <span class="number">5432</span> digits; use sys.set_int_max_str_digits()</span><br><span class="line">   to increase the limit.</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-31"><a href="#💡-说明-31" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>对<code>int()</code>的调用在Python 3.10.6中运行良好，但在Python 3.10.8中引发ValueError。请注意，Python仍然可以处理大整数。只有在整型和字符串之间转换时才会出现此错误。</li>
<li>幸运的是，当您希望操作超过允许的位数限制时，可以增加该限制的上限。为此，可以使用以下方法之一：<ul>
<li>使用 -X int_max_str_digits 的命令行参数（例如， python3 -X int_max_str_digits&#x3D;640）</li>
<li>使用来自sys模块的set_int_max_str_digits()函数</li>
<li>设定 PYTHONINTMAXSTRDIGITS 环境变量</li>
</ul>
</li>
</ul>
<p>更多更改设置上限的操作细节查看<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#int-max-str-digits">文档</a>。</p>
<hr>
<h2 id="Section-Slippery-Slopes-滑坡谬误"><a href="#Section-Slippery-Slopes-滑坡谬误" class="headerlink" title="Section: Slippery Slopes&#x2F;滑坡谬误"></a>Section: Slippery Slopes&#x2F;滑坡谬误</h2><h3 id="Modifying-a-dictionary-while-iterating-over-it-迭代字典时的修改"><a href="#Modifying-a-dictionary-while-iterating-over-it-迭代字典时的修改" class="headerlink" title="&gt; Modifying a dictionary while iterating over it&#x2F;迭代字典时的修改"></a>&gt; Modifying a dictionary while iterating over it&#x2F;迭代字典时的修改</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">x = &#123;<span class="number">0</span>: <span class="literal">None</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> x:</span><br><span class="line">    <span class="keyword">del</span> x[i]</span><br><span class="line">    x[i+<span class="number">1</span>] = <span class="literal">None</span></span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 2.7- Python 3.5):</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td></tr></table></figure>

<p>是的, 它运行了<strong>八次</strong>然后才停下来.</p>
<h4 id="💡-说明-32"><a href="#💡-说明-32" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>Python不支持对字典进行迭代的同时修改它.</li>
<li>它之所以运行8次, 是因为字典会自动扩容以容纳更多键值(我们有8次删除记录, 因此需要扩容). 这实际上是一个实现细节. (译: 应该是因为字典的初始最小值是8, 扩容会导致散列表地址发生变化而中断循环.)</li>
<li>在不同的Python实现中删除键的处理方式以及调整大小的时间可能会有所不同.(译: 就是说什么时候扩容在不同版本中可能是不同的, 在3.6及3.7的版本中到<a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/v3.6.1/Objects/dictobject.c#L103-L110">5</a>就会自动扩容了. 以后也有可能再次发生变化. 这是为了避免散列冲突. 顺带一提, 后面两次扩容会扩展为32和256. 即<code>8-&gt;32-&gt;256</code>.)</li>
<li>更多的信息, 你可以参考这个StackOverflow的<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/44763802/bug-in-python-dict">回答</a>, 它详细的解释一个类似的例子.</li>
</ul>
<hr>
<h3 id="Stubborn-del-operator-坚强的-del"><a href="#Stubborn-del-operator-坚强的-del" class="headerlink" title="&gt; Stubborn del operator&#x2F;坚强的 del *"></a>&gt; Stubborn <code>del</code> operator&#x2F;坚强的 <code>del</code> *</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Deleted!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong><br>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x <span class="comment"># 这里应该会输出 &quot;Deleted!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> y</span><br><span class="line">Deleted!</span><br></pre></td></tr></table></figure>

<p>唷, 终于删除了. 你可能已经猜到了在我们第一次尝试删除 <code>x</code> 时是什么让 <code>__del__</code> 免于被调用的. 那让我们给这个例子增加点难度.</p>
<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y <span class="comment"># 检查一下y是否存在</span></span><br><span class="line">&lt;__main__.SomeClass instance at <span class="number">0x7f98a1a67fc8</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> y <span class="comment"># 像之前一样, 这里应该会输出 &quot;Deleted!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">globals</span>() <span class="comment"># 好吧, 并没有. 让我们看一下所有的全局变量</span></span><br><span class="line">Deleted!</span><br><span class="line">&#123;<span class="string">&#x27;__builtins__&#x27;</span>: &lt;module <span class="string">&#x27;__builtin__&#x27;</span> (built-<span class="keyword">in</span>)&gt;, <span class="string">&#x27;SomeClass&#x27;</span>: &lt;<span class="keyword">class</span> <span class="title class_">__main__</span>.SomeClass at <span class="number">0x7f98a1a5f668</span>&gt;, <span class="string">&#x27;__package__&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;__name__&#x27;</span>: <span class="string">&#x27;__main__&#x27;</span>, <span class="string">&#x27;__doc__&#x27;</span>: <span class="literal">None</span>&#125;</span><br></pre></td></tr></table></figure>

<p>好了，现在它被删除了 :confused:</p>
<h4 id="💡-说明-33"><a href="#💡-说明-33" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><code>del x</code> 并不会立刻调用 <code>x.__del__()</code>.</li>
<li>每当遇到 <code>del x</code>, Python 会将 <code>x</code> 的引用数减1, 当 <code>x</code> 的引用数减到0时就会调用 <code>x.__del__()</code>.</li>
<li>在第二个例子中, <code>y.__del__()</code> 之所以未被调用, 是因为前一条语句 (<code>&gt;&gt;&gt; y</code>) 对同一对象创建了另一个引用, 从而防止在执行 <code>del y</code> 后对象的引用数变为0.</li>
<li>调用 <code>globals</code> 导致引用被销毁, 因此我们可以看到 “Deleted!” 终于被输出了.</li>
<li>(译: 这其实是 Python 交互解释器的特性, 它会自动让 <code>_</code> 保存上一个表达式输出的值, 详细可以看<a target="_blank" rel="noopener" href="https://www.cnblogs.com/leisurelylicht/p/diao-pi-de-kong-zhi-tai.html">这里</a>.)</li>
</ul>
<hr>
<h3 id="The-out-of-scope-variable-外部作用域变量"><a href="#The-out-of-scope-variable-外部作用域变量" class="headerlink" title="&gt; The out of scope variable&#x2F;外部作用域变量"></a>&gt; The out of scope variable&#x2F;外部作用域变量</h3><!-- Example ID: 75c03015-7be9-4289-9e22-4f5fdda056f7 --->

<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>():</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">another_func</span>():</span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_closure_func</span>():</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">some_inner_func</span>():</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    <span class="keyword">return</span> some_inner_func()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">another_closure_func</span>():</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">another_inner_func</span>():</span><br><span class="line">        a += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    <span class="keyword">return</span> another_inner_func()</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_func()</span><br><span class="line">UnboundLocalError: local variable <span class="string">&#x27;a&#x27;</span> referenced before assignment</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_closure_func()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_closure_func()</span><br><span class="line">UnboundLocalError: local variable <span class="string">&#x27;a&#x27;</span> referenced before assignment</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-34"><a href="#💡-说明-34" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>当你在作用域中对变量进行赋值时, 变量会变成该作用域内的局部变量. 因此 <code>a</code> 会变成 <code>another_func</code> 函数作用域中的局部变量, 但它在函数作用域中并没有被初始化, 所以会引发错误.</p>
</li>
<li><p>想要在 <code>another_func</code> 中修改外部作用域变量 <code>a</code> 的话, 可以使用 <code>global</code> 关键字.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">another_func</span>()</span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_func()</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>another_closure_func</code> 函数中，<code>a</code> 会变成 <code>another_inner_func</code> 函数作用域中的局部变量, 但它在同一作用域中并没有被初始化, 所以会引发错误。</p>
</li>
<li><p>想要在 <code>another_inner_func</code> 中修改外部作用域变量 <code>a</code> 的话, 可以使用 <code>nonlocal</code> 关键字。nonlocal 表达式用于（除全局作用域外）最近一级的外部作用域。</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">another_func</span>():</span><br><span class="line">    a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">another_inner_func</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> a</span><br><span class="line">        a += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    <span class="keyword">return</span> another_inner_func()</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_func()</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>global</code> and <code>nonlocal</code> 关键字告诉 <code>Python</code> 解释器，不要声明新变量，而是在相应的外部作用域中查找变量。</p>
</li>
<li><p>可以阅读<a target="_blank" rel="noopener" href="https://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html">这个</a>简短却很棒的指南, 了解更多关于 Python 中命名空间和作用域的工作原理。</p>
</li>
</ul>
<hr>
<h3 id="Deleting-a-list-item-while-iterating-迭代列表时删除元素"><a href="#Deleting-a-list-item-while-iterating-迭代列表时删除元素" class="headerlink" title="&gt; Deleting a list item while iterating&#x2F;迭代列表时删除元素"></a>&gt; Deleting a list item while iterating&#x2F;迭代列表时删除元素</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">list_1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">list_2 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">list_3 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">list_4 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(list_1):</span><br><span class="line">    <span class="keyword">del</span> item</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(list_2):</span><br><span class="line">    list_2.remove(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(list_3[:]):</span><br><span class="line">    list_3.remove(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(list_4):</span><br><span class="line">    list_4.pop(idx)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list_1</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list_2</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list_3</span><br><span class="line">[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list_4</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p>你能猜到为什么输出是 <code>[2, 4]</code> 吗?</p>
<h4 id="💡-说明-35"><a href="#💡-说明-35" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>在迭代时修改对象是一个很愚蠢的主意. 正确的做法是迭代对象的副本, <code>list_3[:]</code> 就是这么做的.</p>
   <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(some_list)</span><br><span class="line"><span class="number">139798789457608</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(some_list[:]) <span class="comment"># 注意python为切片列表创建了新对象.</span></span><br><span class="line"><span class="number">139798779601192</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong><code>del</code>, <code>remove</code> 和 <code>pop</code> 的不同:</strong></p>
<ul>
<li><code>del var_name</code> 只是从本地或全局命名空间中删除了 <code>var_name</code> (这就是为什么 <code>list_1</code> 没有受到影响).</li>
<li><code>remove</code> 会删除第一个匹配到的指定值, 而不是特定的索引, 如果找不到值则抛出 <code>ValueError</code> 异常.</li>
<li><code>pop</code> 则会删除指定索引处的元素并返回它, 如果指定了无效的索引则抛出 <code>IndexError</code> 异常.</li>
</ul>
<p><strong>为什么输出是 <code>[2, 4]</code>?</strong></p>
<ul>
<li>列表迭代是按索引进行的, 所以当我们从 <code>list_2</code> 或 <code>list_4</code> 中删除 <code>1</code> 时, 列表的内容就变成了 <code>[2, 3, 4]</code>. 剩余元素会依次位移, 也就是说, <code>2</code> 的索引会变为 0, <code>3</code> 会变为 1. 由于下一次迭代将获取索引为 1 的元素 (即 <code>3</code>), 因此 <code>2</code> 将被彻底的跳过. 类似的情况会交替发生在列表中的每个元素上.</li>
</ul>
<ul>
<li>参考这个StackOverflow的<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it">回答</a>来解释这个例子</li>
<li>关于Python中字典的类似例子, 可以参考这个Stackoverflow的<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items">回答</a>.</li>
</ul>
<hr>
<h3 id="Lossy-zip-of-iterators-丢三落四的zip"><a href="#Lossy-zip-of-iterators-丢三落四的zip" class="headerlink" title="&gt; Lossy zip of iterators&#x2F;丢三落四的zip *"></a>&gt; Lossy zip of iterators&#x2F;丢三落四的zip *</h3><!-- Example ID: c28ed154-e59f-4070-8eb6-8967a4acac6d --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">7</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>first_three, remaining = numbers[:<span class="number">3</span>], numbers[<span class="number">3</span>:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>first_three, remaining</span><br><span class="line">([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers_iter = <span class="built_in">iter</span>(numbers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">zip</span>(numbers_iter, first_three)) </span><br><span class="line">[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)]</span><br><span class="line"><span class="comment"># so far so good, let&#x27;s zip the remaining</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">zip</span>(numbers_iter, remaining))</span><br><span class="line">[(<span class="number">4</span>, <span class="number">3</span>), (<span class="number">5</span>, <span class="number">4</span>), (<span class="number">6</span>, <span class="number">5</span>)]</span><br></pre></td></tr></table></figure>

<p><code>numbers</code> 列表中的元素 <code>3</code> 哪里去了？</p>
<h4 id="💡-说明-36"><a href="#💡-说明-36" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p>根据Python <a target="_blank" rel="noopener" href="https://docs.python.org/3.3/library/functions.html#zip">文档</a>， <code>zip</code> 函数的大概实现如下：</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">zip</span>(<span class="params">*iterables</span>):</span><br><span class="line">    sentinel = <span class="built_in">object</span>()</span><br><span class="line">    iterators = [<span class="built_in">iter</span>(it) <span class="keyword">for</span> it <span class="keyword">in</span> iterables]</span><br><span class="line">    <span class="keyword">while</span> iterators:</span><br><span class="line">        result = []</span><br><span class="line">        <span class="keyword">for</span> it <span class="keyword">in</span> iterators:</span><br><span class="line">            elem = <span class="built_in">next</span>(it, sentinel)</span><br><span class="line">            <span class="keyword">if</span> elem <span class="keyword">is</span> sentinel: <span class="keyword">return</span></span><br><span class="line">            result.append(elem)</span><br><span class="line">        <span class="keyword">yield</span> <span class="built_in">tuple</span>(result)</span><br></pre></td></tr></table></figure>
</li>
<li><p>该函数接受任意数量的可迭代对象，通过调用 <code>next</code> 函数将它们的每个项目添加到 <code>result</code> 列表中，并在任一可迭代对象耗尽时停止。</p>
</li>
<li><p>这里需要注意的是，当任一可迭代对象用尽时，<code>result</code> 列表中的现有元素将被丢弃。这就是 <code>numbers_iter</code> 中的 <code>3</code> 所发生的情况。</p>
</li>
<li><p>使用 zip 执行上述操作的正确方法是:</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">7</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers_iter = <span class="built_in">iter</span>(numbers)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">zip</span>(first_three, numbers_iter))</span><br><span class="line">[(<span class="number">0</span>, <span class="number">0</span>), (<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">2</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="built_in">zip</span>(remaining, numbers_iter))</span><br><span class="line">[(<span class="number">3</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">4</span>), (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">6</span>, <span class="number">6</span>)]</span><br></pre></td></tr></table></figure>

<p>  <code>zip</code> 的第一个参数应当是有最少元素的那个。</p>
</li>
</ul>
<hr>
<h3 id="Loop-variables-leaking-out-循环变量泄漏"><a href="#Loop-variables-leaking-out-循环变量泄漏" class="headerlink" title="&gt; Loop variables leaking out!&#x2F;循环变量泄漏!"></a>&gt; Loop variables leaking out!&#x2F;循环变量泄漏!</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">6</span>:</span><br><span class="line">        <span class="built_in">print</span>(x, <span class="string">&#x27;: for x inside loop&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(x, <span class="string">&#x27;: x in global&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="number">6</span> : <span class="keyword">for</span> x inside loop</span><br><span class="line"><span class="number">6</span> : x <span class="keyword">in</span> <span class="keyword">global</span></span><br></pre></td></tr></table></figure>

<p>但是 <code>x</code> 从未在循环外被定义…</p>
<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这次我们先初始化x</span></span><br><span class="line">x = -<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">6</span>:</span><br><span class="line">        <span class="built_in">print</span>(x, <span class="string">&#x27;: for x inside loop&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(x, <span class="string">&#x27;: x in global&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="number">6</span> : <span class="keyword">for</span> x inside loop</span><br><span class="line"><span class="number">6</span> : x <span class="keyword">in</span> <span class="keyword">global</span></span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x = 1</span><br><span class="line">print([x for x in range(5)])</span><br><span class="line">print(x, &#x27;: x in global&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>Output (on Python 2.x):</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[0, 1, 2, 3, 4]</span><br><span class="line">(4, &#x27;: x in global&#x27;)</span><br></pre></td></tr></table></figure>

<p><strong>Output (on Python 3.x):</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[0, 1, 2, 3, 4]</span><br><span class="line">1 : x in global</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-37"><a href="#💡-说明-37" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>在 Python 中, for 循环使用所在作用域并在结束后保留定义的循环变量. 如果我们曾在全局命名空间中定义过循环变量. 在这种情况下, 它会重新绑定现有变量.</p>
</li>
<li><p>Python 2.x 和 Python 3.x 解释器在列表推导式示例中的输出差异, 在文档 <a target="_blank" rel="noopener" href="https://docs.python.org/3/whatsnew/3.0.html">What’s New In Python 3.0</a> 中可以找到相关的解释:</p>
<blockquote>
<p>“列表推导不再支持句法形式 <code>[... for var in item1, item2, ...]</code>. 取而代之的是 <code>[... for var in (item1, item2, ...)]</code>. 另外, 注意列表推导具有不同的语义: 它们更接近于 <code>list()</code> 构造函数中生成器表达式的语法糖(译: 这一句我也不是很明白), 特别是循环控制变量不再泄漏到周围的作用域中.”</p>
</blockquote>
</li>
</ul>
<hr>
<h3 id="Beware-of-default-mutable-arguments-当心默认的可变参数"><a href="#Beware-of-default-mutable-arguments-当心默认的可变参数" class="headerlink" title="&gt; Beware of default mutable arguments!&#x2F;当心默认的可变参数!"></a>&gt; Beware of default mutable arguments!&#x2F;当心默认的可变参数!</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">default_arg=[]</span>):</span><br><span class="line">    default_arg.append(<span class="string">&quot;some_string&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> default_arg</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line">[<span class="string">&#x27;some_string&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line">[<span class="string">&#x27;some_string&#x27;</span>, <span class="string">&#x27;some_string&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func([])</span><br><span class="line">[<span class="string">&#x27;some_string&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line">[<span class="string">&#x27;some_string&#x27;</span>, <span class="string">&#x27;some_string&#x27;</span>, <span class="string">&#x27;some_string&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-38"><a href="#💡-说明-38" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>Python中函数的默认可变参数并不是每次调用该函数时都会被初始化. 相反, 它们会使用最近分配的值作为默认值. 当我们明确的将 <code>[]</code> 作为参数传递给 <code>some_func</code> 的时候, 就不会使用 <code>default_arg</code> 的默认值, 所以函数会返回我们所期望的结果.</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">default_arg=[]</span>):</span><br><span class="line">    default_arg.append(<span class="string">&quot;some_string&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> default_arg</span><br></pre></td></tr></table></figure>

<p>  <strong>Output:</strong></p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func.__defaults__ <span class="comment"># 这里会显示函数的默认参数的值</span></span><br><span class="line">([],)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func.__defaults__</span><br><span class="line">([<span class="string">&#x27;some_string&#x27;</span>],)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func.__defaults__</span><br><span class="line">([<span class="string">&#x27;some_string&#x27;</span>, <span class="string">&#x27;some_string&#x27;</span>],)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func([])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func.__defaults__</span><br><span class="line">([<span class="string">&#x27;some_string&#x27;</span>, <span class="string">&#x27;some_string&#x27;</span>],)</span><br></pre></td></tr></table></figure>
</li>
<li><p>避免可变参数导致的错误的常见做法是将 <code>None</code> 指定为参数的默认值, 然后检查是否有值传给对应的参数. 例:</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">default_arg=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> default_arg:</span><br><span class="line">        default_arg = []</span><br><span class="line">    default_arg.append(<span class="string">&quot;some_string&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> default_arg</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Catching-the-Exceptions-捕获异常"><a href="#Catching-the-Exceptions-捕获异常" class="headerlink" title="&gt; Catching the Exceptions&#x2F;捕获异常"></a>&gt; Catching the Exceptions&#x2F;捕获异常</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 这里会抛出异常 ``IndexError``</span></span><br><span class="line">    <span class="built_in">print</span>(some_list[<span class="number">4</span>])</span><br><span class="line"><span class="keyword">except</span> IndexError, ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Caught!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 这里会抛出异常 ``ValueError``</span></span><br><span class="line">    some_list.remove(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">except</span> IndexError, ValueError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Caught again!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">Caught!</span><br><span class="line"></span><br><span class="line">ValueError: <span class="built_in">list</span>.remove(x): x <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 3.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">  File <span class="string">&quot;&lt;input&gt;&quot;</span>, line <span class="number">3</span></span><br><span class="line">    <span class="keyword">except</span> IndexError, ValueError:</span><br><span class="line">                     ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-39"><a href="#💡-说明-39" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>如果你想要同时捕获多个不同类型的异常时, 你需要将它们用括号包成一个元组作为第一个参数传递. 第二个参数是可选名称, 如果你提供, 它将与被捕获的异常实例绑定. 例,</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="comment"># 这里会抛出异常 ``ValueError``</span></span><br><span class="line">   some_list.remove(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">except</span> (IndexError, ValueError), e:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;Caught again!&quot;</span>)</span><br><span class="line">   <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>
<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Caught again!</span><br><span class="line">list.remove(x): x not in list</span><br></pre></td></tr></table></figure>
<p><strong>Output (Python 3.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">  File <span class="string">&quot;&lt;input&gt;&quot;</span>, line <span class="number">4</span></span><br><span class="line">    <span class="keyword">except</span> (IndexError, ValueError), e:</span><br><span class="line">                                     ^</span><br><span class="line">IndentationError: unindent does <span class="keyword">not</span> <span class="keyword">match</span> <span class="built_in">any</span> outer indentation level</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Python 3 中, 用逗号区分异常与可选名称是无效的; 正确的做法是使用 <code>as</code> 关键字. 例,</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    some_list.remove(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">except</span> (IndexError, ValueError) <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Caught again!&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Caught again!</span><br><span class="line">list.remove(x): x not in list</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Same-operands-different-story-同人不同命"><a href="#Same-operands-different-story-同人不同命" class="headerlink" title="&gt; Same operands, different story!&#x2F;同人不同命!"></a>&gt; Same operands, different story!&#x2F;同人不同命!</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">b = a</span><br><span class="line">a = a + [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">b = a</span><br><span class="line">a += [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-40"><a href="#💡-说明-40" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p><code>a += b</code> 并不总是与 <code>a = a + b</code> 表现相同. 类实现 <em><code>op=</code></em> 运算符的方式 <em>也许</em> 是不同的, 列表就是这样做的.</p>
</li>
<li><p>表达式 <code>a = a + [5,6,7,8]</code> 会生成一个新列表, 并让 <code>a</code> 引用这个新列表, 同时保持 <code>b</code> 不变.</p>
</li>
<li><p>表达式 <code>a += [5,6,7,8]</code> 实际上是使用的是 “extend” 函数, 所以 <code>a</code> 和 <code>b</code> 仍然指向已被修改的同一列表.</p>
</li>
</ul>
<hr>
<h3 id="Name-resolution-ignoring-class-scope-忽略类作用域的名称解析"><a href="#Name-resolution-ignoring-class-scope-忽略类作用域的名称解析" class="headerlink" title="&gt; Name resolution ignoring class scope&#x2F;忽略类作用域的名称解析"></a>&gt; Name resolution ignoring class scope&#x2F;忽略类作用域的名称解析</h3><p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">x = <span class="number">5</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    x = <span class="number">17</span></span><br><span class="line">    y = (x <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(SomeClass.y)[<span class="number">0</span>]</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">x = <span class="number">5</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    x = <span class="number">17</span></span><br><span class="line">    y = [x <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SomeClass.y[<span class="number">0</span>]</span><br><span class="line"><span class="number">17</span></span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 3.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SomeClass.y[<span class="number">0</span>]</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-41"><a href="#💡-说明-41" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>类定义中嵌套的作用域会忽略类内的名称绑定.</li>
<li>生成器表达式有它自己的作用域.</li>
<li>从 Python 3.X 开始, 列表推导式也有自己的作用域.</li>
</ul>
<hr>
<h3 id="Rounding-like-a-banker-像银行家一样舍入"><a href="#Rounding-like-a-banker-像银行家一样舍入" class="headerlink" title="&gt; Rounding like a banker&#x2F;像银行家一样舍入 *"></a>&gt; Rounding like a banker&#x2F;像银行家一样舍入 *</h3><p>让我们实现一个简单的函数来获取列表的中间元素：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_middle</span>(<span class="params">some_list</span>):</span><br><span class="line">    mid_index = <span class="built_in">round</span>(<span class="built_in">len</span>(some_list) / <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> some_list[mid_index - <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Python 3.x:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>get_middle([<span class="number">1</span>])  <span class="comment"># looks good</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>get_middle([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])  <span class="comment"># looks good</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>get_middle([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])  <span class="comment"># huh?</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]) / <span class="number">2</span>  <span class="comment"># good</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="built_in">len</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]) / <span class="number">2</span>)  <span class="comment"># why?</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>似乎 Python 将 2.5 舍入到 2。</p>
<h4 id="💡-说明-42"><a href="#💡-说明-42" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><ul>
<li>这不是浮点精度错误，实际上，这种行为是故意的。从 Python 3.0 开始，<code>round()</code> 使用<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rounding#Round_half_to_even">银行进位法</a>，其中 0.5 小数四舍五入到最接近的 <strong>偶数</strong> ：</li>
</ul>
</li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">0.5</span>)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">1.5</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">round</span>(<span class="number">2.5</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy  <span class="comment"># numpy的结果也是一样</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numpy.<span class="built_in">round</span>(<span class="number">0.5</span>)</span><br><span class="line"><span class="number">0.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numpy.<span class="built_in">round</span>(<span class="number">1.5</span>)</span><br><span class="line"><span class="number">2.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numpy.<span class="built_in">round</span>(<span class="number">2.5</span>)</span><br><span class="line"><span class="number">2.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li>这是 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/IEEE_754#Rounding_rules">IEEE 754</a> 中描述的关于0.5分位舍入的推荐方法。然而，另一种方法（从零取整）大部分时间都是在学校教授的，所以银行进位法可能并不为人所知。此外，一些最流行的编程语言（例如：JavaScript、Java、C&#x2F;C++、Ruby、Rust）也不使用银行进位法。因此，这对 Python 来说还是比较特殊的，在四舍五入时可能会导致混淆。</li>
<li>了解更多信息，请参阅文档 <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/functions.html#round">round()</a> 或 [this stackoverflow thread](<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/10825926/python">https://stackoverflow.com/questions/10825926/python</a> -3-x-rounding-behavior) </li>
<li>请注意，<code>get_middle([1])</code> 只返回1，因为它的索引是 <code>round(0.5) - 1 = 0 - 1 = -1</code>，返回列表中的最后一个元素。</li>
</ul>
<hr>
<h3 id="Needles-in-a-Haystack-大海捞针"><a href="#Needles-in-a-Haystack-大海捞针" class="headerlink" title="&gt; Needles in a Haystack&#x2F;大海捞针"></a>&gt; Needles in a Haystack&#x2F;大海捞针</h3><!-- Example ID: 52a199b1-989a-4b28-8910-dff562cebba9 --->

<p>迄今为止，每一位Python开发者都会遇到类似以下的情况。</p>
<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">x, y = (<span class="number">0</span>, <span class="number">1</span>) <span class="keyword">if</span> <span class="literal">True</span> <span class="keyword">else</span> <span class="literal">None</span>, <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; x, y  # 期望的结果是 (0, 1)</span><br><span class="line">((0, 1), None)</span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">t = (<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> t:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line">t = (<span class="string">&#x27;one&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> t:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line">t = ()</span><br><span class="line"><span class="built_in">print</span>(t)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">one</span><br><span class="line">two</span><br><span class="line">o</span><br><span class="line">n</span><br><span class="line">e</span><br><span class="line"><span class="built_in">tuple</span>()</span><br></pre></td></tr></table></figure>

<p>3.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ten_words_list = [</span><br><span class="line">    &quot;some&quot;,</span><br><span class="line">    &quot;very&quot;,</span><br><span class="line">    &quot;big&quot;,</span><br><span class="line">    &quot;list&quot;,</span><br><span class="line">    &quot;that&quot;</span><br><span class="line">    &quot;consists&quot;,</span><br><span class="line">    &quot;of&quot;,</span><br><span class="line">    &quot;exactly&quot;,</span><br><span class="line">    &quot;ten&quot;,</span><br><span class="line">    &quot;words&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><strong>Output</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(ten_words_list)</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>

<p>4. 不够健壮的断言机制</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;python&quot;</span></span><br><span class="line">b = <span class="string">&quot;javascript&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 带有失败警告信息的assert表达式</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span>(a == b, <span class="string">&quot;Both languages are different&quot;</span>)</span><br><span class="line"><span class="comment"># 未引发 AssertionError </span></span><br></pre></td></tr></table></figure>

<p>5.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">some_dict = &#123;</span><br><span class="line">  <span class="string">&quot;key_1&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;key_2&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&quot;key_3&quot;</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">some_list = some_list.append(<span class="number">4</span>) </span><br><span class="line">some_dict = some_dict.update(&#123;<span class="string">&quot;key_4&quot;</span>: <span class="number">4</span>&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(some_list)</span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(some_dict)</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p>6.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_recursive_func</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">if</span> a[<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    a[<span class="number">0</span>] -= <span class="number">1</span></span><br><span class="line">    some_recursive_func(a)</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">similar_recursive_func</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">if</span> a == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">    a -= <span class="number">1</span></span><br><span class="line">    similar_recursive_func(a)</span><br><span class="line">    <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_recursive_func([<span class="number">5</span>, <span class="number">0</span>])</span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>similar_recursive_func(<span class="number">5</span>)</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-43"><a href="#💡-说明-43" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>对于 1, 正确的语句是 <code>x, y = (0, 1) if True else (None, None)</code>.</p>
</li>
<li><p>对于 2, 正确的语句是 <code>t = (&#39;one&#39;,)</code> 或者 <code>t = &#39;one&#39;,</code> (缺少逗号) 否则解释器会认为 <code>t</code> 是一个字符串, 并逐个字符对其进行迭代.</p>
</li>
<li><p><code>()</code> 是一个特殊的标记，表示空元组.</p>
</li>
<li><p>对于 3，正如您可能已经弄清楚的那样，列表中的第5个元素（”that”）后面缺少一个逗号。因此，通过隐式字符串字面连接，</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ten_words_list</span><br><span class="line">[<span class="string">&#x27;some&#x27;</span>, <span class="string">&#x27;very&#x27;</span>, <span class="string">&#x27;big&#x27;</span>, <span class="string">&#x27;list&#x27;</span>, <span class="string">&#x27;thatconsists&#x27;</span>, <span class="string">&#x27;of&#x27;</span>, <span class="string">&#x27;exactly&#x27;</span>, <span class="string">&#x27;ten&#x27;</span>, <span class="string">&#x27;words&#x27;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>在第4个代码段中没有引发”AssertionError”，因为我们不是断言单个表达式 <code>a == b</code>，而是断言整个元组。以下代码段将说明问题，</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;python&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;javascript&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> a == b</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">    File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AssertionError</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> (a == b, <span class="string">&quot;Values are not equal&quot;</span>)</span><br><span class="line">&lt;stdin&gt;:<span class="number">1</span>: SyntaxWarning: assertion <span class="keyword">is</span> always true, perhaps remove parentheses?</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">assert</span> a == b, <span class="string">&quot;Values are not equal&quot;</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">    File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AssertionError: Values are <span class="keyword">not</span> equal</span><br></pre></td></tr></table></figure></li>
<li><p>至于第五个片段，大多数修改序列&#x2F;映射对象项的方法，如<code>list.append</code>、<code>dict.update</code>、<code>list.sort</code>等，都在原地修改对象并返回<code>None</code>。这背后的基本原理是通过原地操作，避免复制对象来提高性能(参考<a target="_blank" rel="noopener" href="https://docs.python.org/3/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list">这里</a>)。</p>
</li>
<li><p>最后一个应该相当明显，可变对象（如<code>list</code>）可以在函数中更改，不可变对象（<code>a -= 1</code>）的重新赋值则不属于值的改变。</p>
</li>
<li><p>了解这些细节可以在程序长期运行中，为您节省数小时的调试工作。</p>
</li>
</ul>
<hr>
<h3 id="Splitsies-分割函数"><a href="#Splitsies-分割函数" class="headerlink" title="&gt; Splitsies&#x2F;分割函数 *"></a>&gt; Splitsies&#x2F;分割函数 *</h3><!-- Example ID: ec3168ba-a81a-4482-afb0-691f1cc8d65a --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;a&#x27;</span>.split()</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># is same as</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;a&#x27;</span>.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># but</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(<span class="string">&#x27;&#x27;</span>.split())</span><br><span class="line"><span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># isn&#x27;t the same as</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(<span class="string">&#x27;&#x27;</span>.split(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-44"><a href="#💡-说明-44" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p>起初人们可能会认为 split 的默认分隔符是单个空格 <code>&#39; &#39;</code>，但根据 <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#str.split">文档</a>：</p>
<blockquote>
<p> 如果 sep 未指定或为 <code>None</code>，则应用不同的拆分算法：连续的空格被视为单个分隔符，如果字符串有前导或尾随空格，则结果将在开头或结尾不包含空字符串。因此，使用 <code>None</code> 分隔符拆分空字符串或仅包含空格的字符串将返回 <code>[]</code>。<br>如果给定 sep，连续的分隔符不会组合在一起，并被视为分隔空字符串（例如，<code>&#39;1,,2&#39;.split(&#39;,&#39;)</code> 返回 <code>[&#39;1&#39;, &#39;&#39;, &#39;2 &#39;]</code>）。使用指定的分隔符拆分空字符串会返回 <code>[&#39;&#39;]</code>。</p>
</blockquote>
</li>
<li><p>Noticing how the leading and trailing whitespaces are handled in the following snippet will make things clear,</p>
</li>
<li><p>注意以下代码段中如何处理前导和尾随空格，促进更深入的理解：</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27; a &#x27;</span>.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27; a &#x27;</span>.split()</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;&#x27;</span>.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>]</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Wild-imports-通配符导入方式"><a href="#Wild-imports-通配符导入方式" class="headerlink" title="&gt; Wild imports&#x2F;通配符导入方式 *"></a>&gt; Wild imports&#x2F;通配符导入方式 *</h3><!-- Example ID: 83deb561-bd55-4461-bb5e-77dd7f411e1c --->
<!-- read-only -->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># File: module.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">some_weird_name_func_</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;works!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_another_weird_name_func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;works!&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Output</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> module <span class="keyword">import</span> *</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_weird_name_func_()</span><br><span class="line"><span class="string">&quot;works!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_another_weird_name_func()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">&#x27;_another_weird_name_func&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-45"><a href="#💡-说明-45" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p>通常建议不要使用通配符导入。第一个明显的原因是，在通配符导入中，带有前导下划线的名称不会被导入。这可能会导致运行时出错。</p>
</li>
<li><p>如果我们使用 <code>from ... import a, b, c</code> 语法，上面的 <code>NameError</code> 就不会发生。</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> module <span class="keyword">import</span> some_weird_name_func_, _another_weird_name_func</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>_another_weird_name_func()</span><br><span class="line">works!</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果你真的想使用通配符导入，那么你必须在你的模块中定义列表<code>__all__</code>，它包含一系列公共对象，当我们进行通配符导入时，列表中的这些对象将被导入。</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line">__all__ = [<span class="string">&#x27;_another_weird_name_func&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">some_weird_name_func_</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;works!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_another_weird_name_func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;works!&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>  <strong>Output</strong></p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>_another_weird_name_func()</span><br><span class="line"><span class="string">&quot;works!&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_weird_name_func_()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">&#x27;some_weird_name_func_&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="All-sorted-都排序了吗？"><a href="#All-sorted-都排序了吗？" class="headerlink" title="&gt; All sorted?&#x2F;都排序了吗？ *"></a>&gt; All sorted?&#x2F;都排序了吗？ *</h3><!-- Example ID: e5ff1eaf-8823-4738-b4ce-b73f7c9d5511 -->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(x) == x</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(x) == <span class="built_in">sorted</span>(x)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="built_in">reversed</span>(x)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(y) == <span class="built_in">sorted</span>(y)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-46"><a href="#💡-说明-46" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p><code>sorted</code> 方法一定返回列表类型, 比较列表与元组在Python中一定返回 <code>False</code>. </p>
</li>
<li><pre><code class="py">&gt;&gt;&gt; [] == tuple()
False
&gt;&gt;&gt; x = 7, 8, 9
&gt;&gt;&gt; type(x), type(sorted(x))
(tuple, list)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 与 `sorted` 不同，`reversed` 方法返回一个迭代器。为什么？因为排序需要就地修改迭代器或使用额外的容器（列表），而反向可以简单地通过从最后一个索引迭代到第一个索引来工作。</span><br><span class="line"></span><br><span class="line">- 所以在比较 `sorted(y) == sorted(y)` 时，第一次调用 `sorted()` 会消耗迭代器 `y`，下一次调用只会返回一个空列表。</span><br><span class="line"></span><br><span class="line">  ```py</span><br><span class="line">  &gt;&gt;&gt; x = 7, 8, 9</span><br><span class="line">  &gt;&gt;&gt; y = reversed(x)</span><br><span class="line">  &gt;&gt;&gt; sorted(y), sorted(y)</span><br><span class="line">  ([7, 8, 9], [])</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<hr>
<h3 id="Midnight-time-doesn’t-exist-不存在的午夜"><a href="#Midnight-time-doesn’t-exist-不存在的午夜" class="headerlink" title="&gt; Midnight time doesn’t exist?&#x2F;不存在的午夜?"></a>&gt; Midnight time doesn’t exist?&#x2F;不存在的午夜?</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">midnight = datetime(<span class="number">2018</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">midnight_time = midnight.time()</span><br><span class="line"></span><br><span class="line">noon = datetime(<span class="number">2018</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">12</span>, <span class="number">0</span>)</span><br><span class="line">noon_time = noon.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> midnight_time:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Time at midnight is&quot;</span>, midnight_time)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> noon_time:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Time at noon is&quot;</span>, noon_time)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">(<span class="string">&#x27;Time at noon is&#x27;</span>, datetime.time(12, 0))</span><br></pre></td></tr></table></figure>

<p>midnight_time 并没有被输出.</p>
<h4 id="💡-说明-47"><a href="#💡-说明-47" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><p>在Python 3.5之前, 如果 <code>datetime.time</code> 对象存储的UTC的午夜时间(译: 就是 <code>00:00</code>), 那么它的布尔值会被认为是 <code>False</code>. 当使用 <code>if obj:</code> 语句来检查 <code>obj</code> 是否为 <code>null</code> 或者某些“空”值的时候, 很容易出错.</p>
<hr>
<h2 id="Section-The-Hidden-treasures-隐藏的宝藏"><a href="#Section-The-Hidden-treasures-隐藏的宝藏" class="headerlink" title="Section: The Hidden treasures!&#x2F;隐藏的宝藏!"></a>Section: The Hidden treasures!&#x2F;隐藏的宝藏!</h2><p>本节包含了一些像我这样的大多数初学者都不知道的关于Python的鲜为人知的有趣的事情（好吧，现在不是了）。</p>
<h3 id="Okay-Python-Can-you-make-me-fly-Python-可否带我飞"><a href="#Okay-Python-Can-you-make-me-fly-Python-可否带我飞" class="headerlink" title="&gt; Okay Python, Can you make me fly?&#x2F;Python, 可否带我飞? *"></a>&gt; Okay Python, Can you make me fly?&#x2F;Python, 可否带我飞? *</h3><p>好, 去吧.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> antigravity</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong><br>嘘.. 这是个超级秘密.</p>
<h4 id="💡-说明-48"><a href="#💡-说明-48" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><code>antigravity</code> 模块是 Python 开发人员发布的少数复活节彩蛋之一.</li>
<li><code>import antigravity</code> 会打开一个 Python 的<a target="_blank" rel="noopener" href="http://xkcd.com/353/">经典 XKCD 漫画</a>页面.</li>
<li>不止如此. 这个<strong>复活节彩蛋里还有一个复活节彩蛋</strong>. 如果你看一下<a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17">代码</a>, 就会发现还有一个函数实现了 <a target="_blank" rel="noopener" href="https://xkcd.com/426/">XKCD’s geohashing 算法</a>.</li>
</ul>
<hr>
<h3 id="goto-but-why-goto-但为什么"><a href="#goto-but-why-goto-但为什么" class="headerlink" title="&gt; goto, but why?&#x2F;goto, 但为什么? *"></a>&gt; <code>goto</code>, but why?&#x2F;<code>goto</code>, 但为什么? *</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> goto <span class="keyword">import</span> goto, label</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;I&#x27;m trapped, please rescue!&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> k == <span class="number">2</span>:</span><br><span class="line">                goto .breakout <span class="comment"># 从多重循环中跳出</span></span><br><span class="line">label .breakout</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Freedom!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 2.3):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">I<span class="string">&#x27;m trapped, please rescue!</span></span><br><span class="line"><span class="string">I&#x27;</span>m trapped, please rescue!</span><br><span class="line">Freedom!</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-49"><a href="#💡-说明-49" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>2004年4月1日, Python <a target="_blank" rel="noopener" href="https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html">宣布</a> 加入一个可用的 <code>goto</code> 作为愚人节礼物.</li>
<li>当前版本的 Python 并没有这个模块.</li>
<li>就算可以用, 也请不要使用它. 这里是为什么Python中没有 <code>goto</code> 的<a target="_blank" rel="noopener" href="https://docs.python.org/3/faq/design.html#why-is-there-no-goto">原因</a>.</li>
</ul>
<hr>
<h3 id="Brace-yourself-做好思想准备"><a href="#Brace-yourself-做好思想准备" class="headerlink" title="&gt; Brace yourself!&#x2F;做好思想准备 *"></a>&gt; Brace yourself!&#x2F;做好思想准备 *</h3><p>如果你不喜欢在Python中使用空格来表示作用域, 你可以导入 C 风格的 {},</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> braces</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">  File <span class="string">&quot;some_file.py&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="keyword">from</span> __future__ <span class="keyword">import</span> braces</span><br><span class="line">SyntaxError: <span class="keyword">not</span> a chance</span><br></pre></td></tr></table></figure>

<p>想用大括号 <code>braces</code>? 没门! 觉得不爽, 请去用java。那么，另一个令人惊讶的事情，找一找在 <code>__future__</code> 模块中，哪里引发了 <code>SyntaxError</code> <a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/master/Lib/__future__.py">code</a>?</p>
<h4 id="💡-说明-50"><a href="#💡-说明-50" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>通常 <code>__future__</code> 会提供 Python 未来版本的功能. 然而，这里的 “未来” 是一个讽刺.</li>
<li>这是一个表达社区对此类问题态度的复活节彩蛋.</li>
<li>代码实际上在[<code>future.c</code> 文件]中 (<a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/025eb98dc0c1dc27404df6c544fc2944e0fa9f3a/Python/future.c#L49">https://github.com/python/cpython/blob/025eb98dc0c1dc27404df6c544fc2944e0fa9f3a/Python/future.c#L49</a>).</li>
<li>当 CPython 编译器遇到 <a target="_blank" rel="noopener" href="https://docs.python.org/3.3/reference/simple_stmts.html#future-statements">future表达式</a> 时，它首先在 <code>future.c</code> 中运行相应的代码，然后再对其进行处理作为正常的<code>import</code>表达式。</li>
</ul>
<hr>
<h3 id="Let’s-meet-Friendly-Language-Uncle-For-Life-让生活更友好"><a href="#Let’s-meet-Friendly-Language-Uncle-For-Life-让生活更友好" class="headerlink" title="&gt; Let’s meet Friendly Language Uncle For Life&#x2F;让生活更友好 *"></a>&gt; Let’s meet Friendly Language Uncle For Life&#x2F;让生活更友好 *</h3><!-- Example ID: 6427fae6-e959-462d-85da-ce4c94ce41be --->

<p><strong>Output (Python 3.x)</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> __future__ <span class="keyword">import</span> barry_as_FLUFL</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;Ruby&quot;</span> != <span class="string">&quot;Python&quot;</span> <span class="comment"># 这里没什么疑问</span></span><br><span class="line">  File <span class="string">&quot;some_file.py&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="string">&quot;Ruby&quot;</span> != <span class="string">&quot;Python&quot;</span></span><br><span class="line">              ^</span><br><span class="line">SyntaxError: invalid syntax</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;Ruby&quot;</span> &lt;&gt; <span class="string">&quot;Python&quot;</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>这就对了.</p>
<h4 id="💡-说明-51"><a href="#💡-说明-51" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p>相关的 <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0401/">PEP-401</a> 发布于 2009年4月1日 (所以你现在知道这意味着什么了吧).</p>
</li>
<li><p>引用 PEP-401</p>
<blockquote>
<p>意识到 Python 3.0 里的 !&#x3D; 运算符是一个会引起手指疼痛的恐怖错误, FLUFL 将 &lt;&gt; 运算符恢复为唯一写法.</p>
</blockquote>
</li>
<li><p>Uncle Barry 在 PEP 中还分享了其他东西; 你可以在<a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0401/">这里</a>获得他们.</p>
</li>
<li><p>(译: 虽然文档中没写，但应该是只能在交互解释器中使用.)</p>
</li>
<li><p>它在交互式环境中正常运行，但是当您通过 python 文件运行时它会引发 <code>SyntaxError</code>（请参阅此 <a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/issues/94">问题</a>）。您可以将表达式作为<code>eval</code> 或 <code>compile</code> 参数中使用。</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> barry_as_FLUFL</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">eval</span>(<span class="string">&#x27;&quot;Ruby&quot; &lt;&gt; &quot;Python&quot;&#x27;</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Even-Python-understands-that-love-is-complicated-连Python也知道爱是难言的"><a href="#Even-Python-understands-that-love-is-complicated-连Python也知道爱是难言的" class="headerlink" title="&gt; Even Python understands that love is complicated&#x2F;连Python也知道爱是难言的 *"></a>&gt; Even Python understands that love is complicated&#x2F;连Python也知道爱是难言的 *</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> this</span><br></pre></td></tr></table></figure>

<p>等等, <strong>this</strong> 是什么? <code>this</code> 是爱 :heart:</p>
<p><strong>Output:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">The Zen of Python, by Tim Peters</span><br><span class="line"></span><br><span class="line">Beautiful is better than ugly.</span><br><span class="line">优美胜于丑陋（Python 以编写优美的代码为目标）</span><br><span class="line">Explicit is better than implicit.</span><br><span class="line">明了胜于晦涩（优美的代码应当是明了的，命名规范，风格相似）</span><br><span class="line">Simple is better than complex.</span><br><span class="line">简洁胜于复杂（优美的代码应当是简洁的，不要有复杂的内部实现）</span><br><span class="line">Complex is better than complicated.</span><br><span class="line">复杂胜于凌乱（如果复杂不可避免，那代码间也不能有难懂的关系，要保持接口简洁）</span><br><span class="line">Flat is better than nested.</span><br><span class="line">扁平胜于嵌套（优美的代码应当是扁平的，不能有太多的嵌套）</span><br><span class="line">Sparse is better than dense.</span><br><span class="line">间隔胜于紧凑（优美的代码有适当的间隔，不要奢望一行代码解决问题）</span><br><span class="line">Readability counts.</span><br><span class="line">可读性很重要（优美的代码一定是可读的）</span><br><span class="line">Special cases aren&#x27;t special enough to break the rules.</span><br><span class="line">没有特例特殊到需要违背这些规则（这些规则至高无上）</span><br><span class="line">Although practicality beats purity.</span><br><span class="line">尽管我们更倾向于实用性</span><br><span class="line">Errors should never pass silently.</span><br><span class="line">不要安静的包容所有错误</span><br><span class="line">Unless explicitly silenced.</span><br><span class="line">除非你确定需要这样做（精准地捕获异常，不写 except:pass 风格的代码）</span><br><span class="line">In the face of ambiguity, refuse the temptation to guess.</span><br><span class="line">拒绝诱惑你去猜测的暧昧事物</span><br><span class="line">There should be one-- and preferably only one --obvious way to do it.</span><br><span class="line">而是尽量找一种，最好是唯一一种明显的解决方案（如果不确定，就用穷举法）</span><br><span class="line">Although that way may not be obvious at first unless you&#x27;re Dutch.</span><br><span class="line">虽然这并不容易，因为你不是 Python 之父（这里的 Dutch 是指 Guido ）</span><br><span class="line">Now is better than never.</span><br><span class="line">现在行动好过永远不行动</span><br><span class="line">Although never is often better than *right* now.</span><br><span class="line">尽管不行动要好过鲁莽行动</span><br><span class="line">If the implementation is hard to explain, it&#x27;s a bad idea.</span><br><span class="line">如果你无法向人描述你的方案，那肯定不是一个好方案；</span><br><span class="line">If the implementation is easy to explain, it may be a good idea.</span><br><span class="line">如果你能轻松向人描述你的方案，那也许会是一个好方案（方案测评标准）</span><br><span class="line">Namespaces are one honking great idea -- let&#x27;s do more of those!</span><br><span class="line">命名空间是一种绝妙的理念，我们应当多加利用（倡导与号召）</span><br></pre></td></tr></table></figure>

<p>这是 Python 之禅!</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>love = this</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>this <span class="keyword">is</span> love</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>love <span class="keyword">is</span> <span class="literal">True</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>love <span class="keyword">is</span> <span class="literal">False</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>love <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>love <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span>; love <span class="keyword">is</span> love  <span class="comment"># 爱是难言的</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-52"><a href="#💡-说明-52" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><code>this</code> 模块是关于 Python 之禅的复活节彩蛋 (<a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0020">PEP 20</a>).</li>
<li>如果你认为这已经够有趣的了, 可以看看 <a target="_blank" rel="noopener" href="https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py">this.py</a> 的实现. 有趣的是, Python 之禅的实现代码违反了他自己 (这可能是唯一会发生这种情况的地方).</li>
<li>至于 <code>love is not True or False; love is love</code>, 意外却又不言而喻.</li>
</ul>
<hr>
<h3 id="Yes-it-exists-是的-它存在"><a href="#Yes-it-exists-是的-它存在" class="headerlink" title="&gt; Yes, it exists!&#x2F;是的, 它存在!"></a>&gt; Yes, it exists!&#x2F;是的, 它存在!</h3><p><strong>循环的 <code>else</code>.</strong> 一个典型的例子:</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">does_exists_num</span>(<span class="params">l, to_find</span>):</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> l:</span><br><span class="line">        <span class="keyword">if</span> num == to_find:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Exists!&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Does not exist&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>does_exists_num(some_list, <span class="number">4</span>)</span><br><span class="line">Exists!</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>does_exists_num(some_list, -<span class="number">1</span>)</span><br><span class="line">Does <span class="keyword">not</span> exist</span><br></pre></td></tr></table></figure>

<p><strong>异常的 <code>else</code> .</strong> 例,</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Exception occurred!!!&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Try block executed successfully...&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">Try block executed successfully...</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-53"><a href="#💡-说明-53" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>循环后的 <code>else</code> 子句只会在循环没有触发 <code>break</code> 语句, 正常结束的情况下才会执行.</li>
<li>try 之后的 <code>else</code> 子句也被称为 “完成子句”, 因为在 <code>try</code> 语句中到达 <code>else</code> 子句意味着try块实际上已成功完成.</li>
</ul>
<hr>
<h3 id="Ellipsis-省略"><a href="#Ellipsis-省略" class="headerlink" title="&gt; Ellipsis&#x2F;省略 *"></a>&gt; Ellipsis&#x2F;省略 *</h3><!-- Example ID: 969b7100-ab3d-4a7d-ad7d-a6be16181b2b --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">some_func</span>():</span><br><span class="line">    <span class="literal">Ellipsis</span></span><br></pre></td></tr></table></figure>

<p><strong>Output</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_func()</span><br><span class="line"><span class="comment"># 没有输出，也没有报错</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>SomeRandomString</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">&#x27;SomeRandomString&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">Ellipsis</span></span><br><span class="line"><span class="literal">Ellipsis</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-54"><a href="#💡-说明-54" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li><p>在 Python 中，<code>Ellipsis</code> 是一个全局可用的内置对象，相当于<code>...</code>。</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>...</span><br><span class="line"><span class="literal">Ellipsis</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>省略号可用于多种用途，</p>
<ul>
<li>作为尚未编写的代码的占位符（就像<code>pass</code>语句）</li>
<li>在切片语法中表示完整切片的其余维度</li>
</ul>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_dimensional_array = np.arange(<span class="number">8</span>).reshape(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">array([</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    [</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">    ]</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<p>  所以我们的 <code>three_dimensional_array</code> 是一个数组的数组的数组。假设我们要打印所有最内层数组的第二个元素（索引 <code>1</code>），我们可以使用 Ellipsis 绕过所有前面的维度</p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_dimensional_array[:,:,<span class="number">1</span>]</span><br><span class="line">array([[<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">   [<span class="number">5</span>, <span class="number">7</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>three_dimensional_array[..., <span class="number">1</span>] <span class="comment"># 使用Ellipsis.</span></span><br><span class="line">array([[<span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">   [<span class="number">5</span>, <span class="number">7</span>]])</span><br></pre></td></tr></table></figure>

<p>  注意：这适用于任意数量的维度。您甚至可以在第一个和最后一个维度中选择切片并以这种方式忽略中间的切片(<code>n_dimensional_array[firs_dim_slice, ..., last_dim_slice]</code>)</p>
<ul>
<li><p>在 <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/typing.html">类型提示</a>中仅表示类型的一部分（如 <code>(Callable[..., int]</code> 或 <code>Tuple[ str, ...]</code>))</p>
</li>
<li><p>您也可以使用省略号作为默认函数参数（在您想要区分“无参数”和“传递None值”场景的情况下）。</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Inpinity-无限"><a href="#Inpinity-无限" class="headerlink" title="&gt; Inpinity&#x2F;无限 *"></a>&gt; Inpinity&#x2F;无限 *</h3><p>英文拼写是有意的, 请不要为此提交补丁.<br>(译: 这里是为了突出 Python 中无限的定义与<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Pi">Pi</a>有关, 所以将两个单词拼接了.)</p>
<p><strong>Output (Python 3.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>infinity = <span class="built_in">float</span>(<span class="string">&#x27;infinity&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>(infinity)</span><br><span class="line"><span class="number">314159</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hash</span>(<span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>))</span><br><span class="line">-<span class="number">314159</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-55"><a href="#💡-说明-55" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>infinity 的哈希值是 10⁵ x π.</li>
<li>有意思的是, <code>float(&#39;-inf&#39;)</code> 的哈希值在 Python 3 中是 “-10⁵ x π”  , 而在 Python 2 中是 “-10⁵ x e”.</li>
</ul>
<hr>
<h3 id="Let’s-mangle-修饰时间"><a href="#Let’s-mangle-修饰时间" class="headerlink" title="&gt; Let’s mangle&#x2F;修饰时间! *"></a>&gt; Let’s mangle&#x2F;修饰时间! *</h3><!-- Example ID: 37146d2d-9e67-43a9-8729-3c17934b910c --->

<p>1.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Yo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.__honey = <span class="literal">True</span></span><br><span class="line">        <span class="variable language_">self</span>.bro = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Yo().bro</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Yo().__honey</span><br><span class="line">AttributeError: <span class="string">&#x27;Yo&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;__honey&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Yo()._Yo__honey</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>2.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Yo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 这次试试对称形式</span></span><br><span class="line">        <span class="variable language_">self</span>.__honey__ = <span class="literal">True</span></span><br><span class="line">        <span class="variable language_">self</span>.bro = <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Yo().bro</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Yo()._Yo__honey__</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">&#x27;Yo&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;_Yo__honey__&#x27;</span></span><br></pre></td></tr></table></figure>

<p>为什么 <code>Yo()._Yo__honey</code> 能运行? 只有印度人理解.(译: 这个梗可能是指印度音乐人<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Yo_Yo_Honey_Singh">Yo Yo Honey Singh</a>)</p>
<p>3.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">_A__variable = <span class="string">&quot;Some value&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">some_func</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> __variable <span class="comment"># 没在任何地方初始化</span></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>A().__variable</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">&#x27;A&#x27;</span> <span class="built_in">object</span> has no attribute <span class="string">&#x27;__variable&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A().some_func()</span><br><span class="line"><span class="string">&#x27;Some value&#x27;</span></span><br></pre></td></tr></table></figure>


<h4 id="💡-说明-56"><a href="#💡-说明-56" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Name_mangling">命名修饰</a> 用于避免不同命名空间之间名称冲突.</li>
<li>在 Python 中, 解释器会通过给类中以 <code>__</code> (双下划线)开头且结尾最多只有一个下划线的类成员名称加上<code>_NameOfTheClass</code> 来修饰(mangles)名称.</li>
<li>所以, 要访问 <code>__honey</code> 对象,我们需要加上 <code>_Yo</code> 以防止与其他类中定义的相同名称的属性发生冲突.</li>
<li>但是为什么它在第二个片段中不起作用？ 因为命名修饰排除了以双下划线结尾的名称。</li>
<li>第三个片段也是命名修饰的结果。 <code>return __variable</code> 语句中的 <code>__variable</code> 名称被修改为 <code>_A__variable</code>，这也恰好是我们在外部作用域中声明的变量的名称。</li>
<li>此外，如果修饰后的变量名超过255个字符，则会进行截断。</li>
</ul>
<hr>
<h2 id="Section-Appearances-are-deceptive-外表是靠不住的"><a href="#Section-Appearances-are-deceptive-外表是靠不住的" class="headerlink" title="Section: Appearances are deceptive!&#x2F;外表是靠不住的!"></a>Section: Appearances are deceptive!&#x2F;外表是靠不住的!</h2><h3 id="Skipping-lines-跳过一行"><a href="#Skipping-lines-跳过一行" class="headerlink" title="&gt; Skipping lines?&#x2F;跳过一行?"></a>&gt; Skipping lines?&#x2F;跳过一行?</h3><p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>value = <span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>valuе = <span class="number">32</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value</span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure>

<p>什么鬼?</p>
<p><strong>注意:</strong> 如果你想要重现的话最简单的方法是直接复制上面的代码片段到你的文件或命令行里.</p>
<h4 id="💡-说明-57"><a href="#💡-说明-57" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><p>一些非西方字符虽然看起来和英语字母相同, 但会被解释器识别为不同的字母.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ord</span>(<span class="string">&#x27;е&#x27;</span>) <span class="comment"># 西里尔语的 &#x27;e&#x27; (Ye)</span></span><br><span class="line"><span class="number">1077</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">ord</span>(<span class="string">&#x27;e&#x27;</span>) <span class="comment"># 拉丁语的 &#x27;e&#x27;, 用于英文并使用标准键盘输入</span></span><br><span class="line"><span class="number">101</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;е&#x27;</span> == <span class="string">&#x27;e&#x27;</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value = <span class="number">42</span> <span class="comment"># 拉丁语 e</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>valuе = <span class="number">23</span> <span class="comment"># 西里尔语 &#x27;e&#x27;, Python 2.x 的解释器在这会抛出 `SyntaxError` 异常</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value</span><br><span class="line"><span class="number">42</span></span><br></pre></td></tr></table></figure>

<p>内置的 <code>ord()</code> 函数可以返回一个字符的 Unicode <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Code_point">代码点</a>, 这里西里尔语 ‘e’ 和拉丁语 ‘e’ 的代码点不同证实了上述例子.</p>
<hr>
<h3 id="Teleportation-空间移动"><a href="#Teleportation-空间移动" class="headerlink" title="&gt; Teleportation&#x2F;空间移动 *"></a>&gt; Teleportation&#x2F;空间移动 *</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">energy_send</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="comment"># 初始化一个 numpy 数组</span></span><br><span class="line">    np.array([<span class="built_in">float</span>(x)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">energy_receive</span>():</span><br><span class="line">    <span class="comment"># 返回一个空的 numpy 数组</span></span><br><span class="line">    <span class="keyword">return</span> np.empty((), dtype=np.<span class="built_in">float</span>).tolist()</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>energy_send(<span class="number">123.456</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>energy_receive()</span><br><span class="line"><span class="number">123.456</span></span><br></pre></td></tr></table></figure>

<p>谁来给我发个诺贝尔奖?</p>
<h4 id="💡-说明-58"><a href="#💡-说明-58" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>注意在 <code>energy_send</code> 函数中创建的 numpy 数组并没有返回, 因此内存空间被释放并可以被重新分配.</li>
<li><code>numpy.empty()</code> 直接返回下一段空闲内存，而不重新初始化. 而这个内存点恰好就是刚刚释放的那个(通常情况下, 并不绝对).</li>
</ul>
<hr>
<h3 id="Well-something-is-fishy…-嗯，有些可疑…"><a href="#Well-something-is-fishy…-嗯，有些可疑…" class="headerlink" title="&gt; Well, something is fishy…&#x2F;嗯，有些可疑…"></a>&gt; Well, something is fishy…&#x2F;嗯，有些可疑…</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    一个通过加法计算平方的简单函数.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    sum_so_far = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> counter <span class="keyword">in</span> <span class="built_in">range</span>(x):</span><br><span class="line">        sum_so_far = sum_so_far + x</span><br><span class="line">  <span class="keyword">return</span> sum_so_far</span><br></pre></td></tr></table></figure>

<p><strong>Output (Python 2.x):</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>square(<span class="number">10</span>)</span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>难道不应该是100吗?</p>
<p><strong>注意:</strong> 如果你无法重现, 可以尝试运行这个文件<a href="/mixed_tabs_and_spaces.py">mixed_tabs_and_spaces.py</a>.</p>
<h4 id="💡-说明-59"><a href="#💡-说明-59" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li><p><strong>不要混用制表符(tab)和空格(space)!</strong> 在上面的例子中, return 的前面是”1个制表符”, 而其他部分的代码前面是 “4个空格”.</p>
</li>
<li><p>Python是这么处理制表符的:</p>
<blockquote>
<p>首先, 制表符会从左到右依次被替换成8个空格, 直到被替换后的字符总数是八的倍数 &lt;…&gt;</p>
</blockquote>
</li>
<li><p>因此, <code>square</code> 函数最后一行的制表符会被替换成8个空格, 导致return语句进入循环语句里面.</p>
</li>
<li><p>Python 3 很友好, 在这种情况下会自动抛出错误.</p>
<p>  <strong>Output (Python 3.x):</strong></p>
  <figure class="highlight py"><table><tr><td class="code"><pre><span class="line">TabError: inconsistent use of tabs <span class="keyword">and</span> spaces <span class="keyword">in</span> indentation</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="Section-Miscellaneous-杂项"><a href="#Section-Miscellaneous-杂项" class="headerlink" title="Section: Miscellaneous&#x2F;杂项"></a>Section: Miscellaneous&#x2F;杂项</h2><h3 id="is-faster-更快的"><a href="#is-faster-更快的" class="headerlink" title="&gt; += is faster&#x2F;更快的 +="></a>&gt; <code>+=</code> is faster&#x2F;更快的 <code>+=</code></h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用 &quot;+&quot; 连接三个字符串:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit.timeit(<span class="string">&quot;s1 = s1 + s2 + s3&quot;</span>, setup=<span class="string">&quot;s1 = &#x27; &#x27; * 100000; s2 = &#x27; &#x27; * 100000; s3 = &#x27; &#x27; * 100000&quot;</span>, number=<span class="number">100</span>)</span><br><span class="line"><span class="number">0.25748300552368164</span></span><br><span class="line"><span class="comment"># 用 &quot;+=&quot; 连接三个字符串:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit.timeit(<span class="string">&quot;s1 += s2 + s3&quot;</span>, setup=<span class="string">&quot;s1 = &#x27; &#x27; * 100000; s2 = &#x27; &#x27; * 100000; s3 = &#x27; &#x27; * 100000&quot;</span>, number=<span class="number">100</span>)</span><br><span class="line"><span class="number">0.012188911437988281</span></span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-60"><a href="#💡-说明-60" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>连接两个以上的字符串时 <code>+=</code> 比 <code>+</code> 更快, 因为在计算过程中第一个字符串 (例如, <code>s1 += s2 + s3</code> 中的 <code>s1</code>) 不会被销毁.(译: 就是 <code>+=</code> 执行的是追加操作，少了一个销毁新建的动作.)</li>
</ul>
<hr>
<h3 id="Let’s-make-a-giant-string-来做个巨大的字符串吧！"><a href="#Let’s-make-a-giant-string-来做个巨大的字符串吧！" class="headerlink" title="&gt; Let’s make a giant string!&#x2F;来做个巨大的字符串吧！"></a>&gt; Let’s make a giant string!&#x2F;来做个巨大的字符串吧！</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_string_with_plus</span>(<span class="params">iters</span>):</span><br><span class="line">    s = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iters):</span><br><span class="line">        s += <span class="string">&quot;xyz&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(s) == <span class="number">3</span>*iters</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_bytes_with_plus</span>(<span class="params">iters</span>):</span><br><span class="line">    s = <span class="string">b&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iters):</span><br><span class="line">        s += <span class="string">b&quot;xyz&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(s) == <span class="number">3</span>*iters</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_string_with_format</span>(<span class="params">iters</span>):</span><br><span class="line">    fs = <span class="string">&quot;&#123;&#125;&quot;</span>*iters</span><br><span class="line">    s = fs.<span class="built_in">format</span>(*([<span class="string">&quot;xyz&quot;</span>]*iters))</span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(s) == <span class="number">3</span>*iters</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_string_with_join</span>(<span class="params">iters</span>):</span><br><span class="line">    l = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iters):</span><br><span class="line">        l.append(<span class="string">&quot;xyz&quot;</span>)</span><br><span class="line">    s = <span class="string">&quot;&quot;</span>.join(l)</span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(s) == <span class="number">3</span>*iters</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_list_to_string</span>(<span class="params">l, iters</span>):</span><br><span class="line">    s = <span class="string">&quot;&quot;</span>.join(l)</span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(s) == <span class="number">3</span>*iters</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_plus(<span class="number">10000</span>))</span><br><span class="line"><span class="number">1000</span> loops, best of <span class="number">3</span>: <span class="number">972</span> µs per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_bytes_with_plus(<span class="number">10000</span>))</span><br><span class="line"><span class="number">1000</span> loops, best of <span class="number">3</span>: <span class="number">815</span> µs per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_format(<span class="number">10000</span>))</span><br><span class="line"><span class="number">1000</span> loops, best of <span class="number">3</span>: <span class="number">508</span> µs per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_join(<span class="number">10000</span>))</span><br><span class="line"><span class="number">1000</span> loops, best of <span class="number">3</span>: <span class="number">878</span> µs per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="string">&quot;xyz&quot;</span>]*<span class="number">10000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(convert_list_to_string(l, <span class="number">10000</span>))</span><br><span class="line"><span class="number">10000</span> loops, best of <span class="number">3</span>: <span class="number">80</span> µs per loop</span><br></pre></td></tr></table></figure>

<p>让我们将迭代次数增加10倍.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_plus(<span class="number">100000</span>)) <span class="comment"># 执行时间线性增加</span></span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">9.75</span> ms per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_bytes_with_plus(<span class="number">100000</span>)) <span class="comment"># 二次增加</span></span><br><span class="line"><span class="number">1000</span> loops, best of <span class="number">3</span>: <span class="number">974</span> ms per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_format(<span class="number">100000</span>)) <span class="comment"># 线性增加</span></span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">5.25</span> ms per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_join(<span class="number">100000</span>)) <span class="comment"># 线性增加</span></span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">9.85</span> ms per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="string">&quot;xyz&quot;</span>]*<span class="number">100000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(convert_list_to_string(l, <span class="number">100000</span>)) <span class="comment"># 线性增加</span></span><br><span class="line"><span class="number">1000</span> loops, best of <span class="number">3</span>: <span class="number">723</span> µs per loop</span><br></pre></td></tr></table></figure>

<h4 id="💡-说明-61"><a href="#💡-说明-61" class="headerlink" title="💡 说明:"></a>💡 说明:</h4><ul>
<li>你可以在这获得更多 <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/timeit.html">timeit</a> 的相关信息. 它通常用于衡量代码片段的执行时间.</li>
<li>不要用 <code>+</code> 去生成过长的字符串, 在 Python 中, <code>str</code> 是不可变的, 所以在每次连接中你都要把左右两个字符串复制到新的字符串中. 如果你连接四个长度为10的字符串, 你需要拷贝 (10+10) + ((10+10)+10) + (((10+10)+10)+10) &#x3D; 90 个字符而不是 40 个字符. 随着字符串的数量和大小的增加, 情况会变得越发的糟糕 (就像<code>add_bytes_with_plus</code> 函数的执行时间一样)</li>
<li>因此, 更建议使用 <code>.format.</code> 或 <code>%</code> 语法 (但是, 对于短字符串, 它们比 <code>+</code> 稍慢一点).</li>
<li>又或者, 如果你所需的内容已经以可迭代对象的形式提供了, 使用 <code>&#39;&#39;.join(可迭代对象)</code> 要快多了.</li>
<li><code>add_string_with_plus</code> 的执行时间没有像 <code>add_bytes_with_plus</code> 一样出现二次增加是因为解释器会如同上一个例子所讨论的一样优化 <code>+=</code>. 用 <code>s = s + &quot;x&quot; + &quot;y&quot; + &quot;z&quot;</code> 替代 <code>s += &quot;xyz&quot;</code> 的话, 执行时间就会二次增加了.<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_string_with_plus</span>(<span class="params">iters</span>):</span><br><span class="line">    s = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iters):</span><br><span class="line">        s = s + <span class="string">&quot;x&quot;</span> + <span class="string">&quot;y&quot;</span> + <span class="string">&quot;z&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">len</span>(s) == <span class="number">3</span>*iters</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_plus(<span class="number">10000</span>))</span><br><span class="line"><span class="number">100</span> loops, best of <span class="number">3</span>: <span class="number">9.87</span> ms per loop</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>timeit(add_string_with_plus(<span class="number">100000</span>)) <span class="comment"># 执行时间二次增加</span></span><br><span class="line"><span class="number">1</span> loops, best of <span class="number">3</span>: <span class="number">1.09</span> s per loop</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Slowing-down-dict-lookups-让字典的查找慢下来"><a href="#Slowing-down-dict-lookups-让字典的查找慢下来" class="headerlink" title="&gt; Slowing down dict lookups&#x2F;让字典的查找慢下来 *"></a>&gt; Slowing down <code>dict</code> lookups&#x2F;让字典的查找慢下来 *</h3><!-- Example ID: c9c26ce6-df0c-47f7-af0b-966b9386d4c3 --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">some_dict = &#123;<span class="built_in">str</span>(i): <span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1_000_000</span>)&#125;</span><br><span class="line">another_dict = &#123;<span class="built_in">str</span>(i): <span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1_000_000</span>)&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>%timeit some_dict[<span class="string">&#x27;5&#x27;</span>]</span><br><span class="line"><span class="number">28.6</span> ns ± <span class="number">0.115</span> ns per loop (mean ± std. dev. of <span class="number">7</span> runs, <span class="number">10000000</span> loops each)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_dict[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>%timeit some_dict[<span class="string">&#x27;5&#x27;</span>]</span><br><span class="line"><span class="number">37.2</span> ns ± <span class="number">0.265</span> ns per loop (mean ± std. dev. of <span class="number">7</span> runs, <span class="number">10000000</span> loops each)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>%timeit another_dict[<span class="string">&#x27;5&#x27;</span>]</span><br><span class="line"><span class="number">28.5</span> ns ± <span class="number">0.142</span> ns per loop (mean ± std. dev. of <span class="number">7</span> runs, <span class="number">10000000</span> loops each)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>another_dict[<span class="number">1</span>]  <span class="comment"># Trying to access a key that doesn&#x27;t exist</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">KeyError: <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>%timeit another_dict[<span class="string">&#x27;5&#x27;</span>]</span><br><span class="line"><span class="number">38.5</span> ns ± <span class="number">0.0913</span> ns per loop (mean ± std. dev. of <span class="number">7</span> runs, <span class="number">10000000</span> loops each)</span><br></pre></td></tr></table></figure>

<p>为什么相同的查找会变得越来越慢？</p>
<h4 id="💡-说明-62"><a href="#💡-说明-62" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li>CPython 有一个通用的字典查找函数，可以处理所有类型的键（<code>str</code>、<code>int</code>、任何对象…），以及一个专门用于处理仅由 <code>str</code> 键组成的字典的常见情况。</li>
<li>专用函数（在 CPython 的 <a target="_blank" rel="noopener" href="https://github.com/python/cpython/blob/522691c46e2ae51faaad5bbbce7d959dd61770df/Objects/dictobject.c#L841">源</a> 中名为 <code>lookdict_unicode</code>）知道所有现有的键（包括查找的 key) 是字符串，并使用更快和更简单的字符串比较来比较键，而不是调用 <code>__eq__</code> 方法。</li>
<li>第一次使用非 <code>str</code> 键访问 <code>dict</code> 实例时，会对其进行修改，以便将来的查找使用通用函数。</li>
<li>这个过程对于特定的 <code>dict</code> 实例是不可逆的，并且键甚至不必存在于字典中。 这就是为什么对不存在的键进行查找具有相同副作用的原因。</li>
</ul>
<hr>
<h3 id="Bloating-instance-dicts-变臃肿的dict实例们"><a href="#Bloating-instance-dicts-变臃肿的dict实例们" class="headerlink" title="&gt; Bloating instance dicts&#x2F;变臃肿的dict实例们 *"></a>&gt; Bloating instance <code>dict</code>s&#x2F;变臃肿的<code>dict</code>实例们 *</h3><!-- Example ID: fe706ab4-1615-c0ba-a078-76c98cbe3f48 --->

<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.some_attr1 = <span class="number">1</span></span><br><span class="line">        <span class="variable language_">self</span>.some_attr2 = <span class="number">2</span></span><br><span class="line">        <span class="variable language_">self</span>.some_attr3 = <span class="number">3</span></span><br><span class="line">        <span class="variable language_">self</span>.some_attr4 = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dict_size</span>(<span class="params">o</span>):</span><br><span class="line">    <span class="keyword">return</span> sys.getsizeof(o.__dict__)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Output:</strong> (Python 3.8, 其他 Python 3 的版本也许稍有不同)</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1 = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o2 = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o1)</span><br><span class="line"><span class="number">104</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o2)</span><br><span class="line"><span class="number">104</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> o1.some_attr1</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o3 = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o3)</span><br><span class="line"><span class="number">232</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o1)</span><br><span class="line"><span class="number">232</span></span><br></pre></td></tr></table></figure>

<p>让我们在一个新的解释器中再试一次：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1 = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o2 = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o1)</span><br><span class="line"><span class="number">104</span>  <span class="comment"># 意料之中</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1.some_attr5 = <span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o1.some_attr6 = <span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o1)</span><br><span class="line"><span class="number">360</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o2)</span><br><span class="line"><span class="number">272</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o3 = SomeClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict_size(o3)</span><br><span class="line"><span class="number">232</span></span><br></pre></td></tr></table></figure>

<p>是什么让那些字典变得臃肿？ 为什么新创建的对象也会变臃肿？</p>
<h4 id="💡-说明-63"><a href="#💡-说明-63" class="headerlink" title="💡 说明"></a>💡 说明</h4><ul>
<li>CPython 能够在多个字典中重用相同的“键”对象。 这添加在 <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0412/">PEP 412</a> 中，目的是减少内存使用，特别是在实例字典中 —— 键（实例属性）几乎在所有实例都通用。</li>
<li>这种优化对于实例字典来说是十分自然的，但如果某些假设被打破，它就会被禁用。</li>
<li>密钥共享字典不支持删除；如果删除了实例属性，则字典是“未共享的”，并且同一类的所有未来实例都禁用密钥共享。</li>
<li>另外，如果字典键已被调整大小（因为插入了新键），它们保持共享<em>仅当</em>它们被一个完全单一的字典使用时（这允许在第一个创建的实例的 <code>__init__</code> 中添加许多属性，而不会导致“取消共享”）。如果发生调整大小时存在多个实例，则为同一类的所有未来实例禁用密钥共享：CPython 无法判断您的实例是否正在使用相同的属性集，并决定放弃尝试共享它们的键值。</li>
<li>一个小提示，如果你的目标是降低程序的内存占用：不要删除实例属性，并确保在 <code>__init__</code> 中初始化所有的属性！</li>
</ul>
<hr>
<h3 id="Minor-Ones-小知识点"><a href="#Minor-Ones-小知识点" class="headerlink" title="&gt; Minor Ones&#x2F;小知识点"></a>&gt; Minor Ones&#x2F;小知识点</h3><ul>
<li><p><code>join()</code> 是一个字符串操作而不是列表操作. (第一次接触会觉得有点违反直觉)</p>
<p><strong>💡 说明:</strong><br>如果 <code>join()</code> 是字符串方法 那么它就可以处理任何可迭代的对象(列表，元组，迭代器). 如果它是列表方法, 则必须在每种类型中单独实现. 另外, 在 <code>list</code> 对象的通用API中实现一个专用于字符串的方法没有太大的意义.</p>
</li>
<li><p>看着奇怪但能正确运行的语句:</p>
<ul>
<li><code>[] = ()</code> 语句在语义上是正确的 (解包一个空的 <code>tuple</code> 并赋值给 <code>list</code>)</li>
<li><code>&#39;a&#39;[0][0][0][0][0]</code> 在语义上也是正确的, 因为 Python 不像C语言及其派生语言那样，具有字符数据类型。因此，从字符串中选择单个字符将返回单个字符串。</li>
<li><code>3 --0-- 5 == 8</code> 和 <code>--5 == 5</code> 在语义上都是正确的, 且结果等于 <code>True</code>.(译: 3减负0等于3，再减负5相当于加5等于8；负的负5等于5.)</li>
</ul>
</li>
<li><p>鉴于 <code>a</code> 是一个数字, <code>++a</code> 和 <code>--a</code> 都是有效的 Python 语句, 但其效果与 C, C++ 或 Java 等不一样.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>++a</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>--a</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p><strong>💡 说明:</strong></p>
<ul>
<li>python 里没有 <code>++</code> 操作符. 这其实是两个 <code>+</code> 操作符.</li>
<li><code>++a</code> 被解析为 <code>+(+a)</code> 最后等于 <code>a</code>. <code>--a</code> 同理.</li>
<li>这个 StackOverflow <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python">回答</a> 讨论了为什么 Python 中缺少增量和减量运算符.</li>
</ul>
</li>
<li><p>Python 使用 2个字节存储函数中的本地变量. 理论上, 这意味着函数中只能定义65536个变量. 但是，Python 内置了一个方便的解决方案，可用于存储超过2^16个变量名. 下面的代码演示了当定义了超过65536个局部变量时堆栈中发生的情况 (警告: 这段代码会打印大约2^18行文本, 请做好准备!):</p>
   <figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> dis</span><br><span class="line"><span class="built_in">exec</span>(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">def f():</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span> + <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span>.join([<span class="string">&quot;X&quot;</span>+<span class="built_in">str</span>(x)+<span class="string">&quot;=&quot;</span> + <span class="built_in">str</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">65539</span>)]))</span><br><span class="line"></span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dis.dis(f))</span><br></pre></td></tr></table></figure>
</li>
<li><p>你的 <em>Python 代码</em> 并不会多线程同时运行 (是的, 你没听错!). 虽然你觉得会产生多个线程并让它们同时执行你的代码, 但是, 由于 <a target="_blank" rel="noopener" href="https://wiki.python.org/moin/GlobalInterpreterLock">全局解释锁</a>的存在, 你所做的只是让你的线程依次在同一个核心上执行. Python 多线程适用于IO密集型的任务, 但如果想要并行处理CPU密集型的任务, 你应该会想使用 <a target="_blank" rel="noopener" href="https://docs.python.org/2/library/multiprocessing.html">multiprocessing</a> 模块.</p>
</li>
<li><p>列表切片超出索引边界而不引发任何错误</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>some_list[<span class="number">111</span>:]</span><br><span class="line">[]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>int(&#39;١٢٣٤٥٦٧٨٩&#39;)</code> 在 Python 3 中会返回 <code>123456789</code>. 在 Python 中, 十进制字符包括数字字符, 以及可用于形成十进制数字的所有字符, 例如: U+0660, ARABIC-INDIC DIGIT ZERO. 这有一个关于此的 <a target="_blank" rel="noopener" href="http://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/">有趣故事</a>.</p>
</li>
<li><p><code>&#39;abc&#39;.count(&#39;&#39;) == 4</code>. 这有一个 <code>count</code> 方法的相近实现, 能更好的说明问题</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count</span>(<span class="params">s, sub</span>):</span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s) + <span class="number">1</span> - <span class="built_in">len</span>(sub)):</span><br><span class="line">        result += (s[i:i + <span class="built_in">len</span>(sub)] == sub)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<p>这个行为是由于空子串(<code>&#39;&#39;</code>)与原始字符串中长度为0的切片相匹配导致的.</p>
</li>
</ul>
<hr>
<h1 id="Contributing-贡献"><a href="#Contributing-贡献" class="headerlink" title="Contributing&#x2F;贡献"></a>Contributing&#x2F;贡献</h1><p>欢迎各种补丁! 详情请看<a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.(译: 这是给原库提贡献的要求模版)</p>
<p>你可以通过新建 <a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/issues/new">issue</a> 或者在上 <a target="_blank" rel="noopener" href="https://gitter.im/wtfpython/Lobby">Gitter</a> 与我们进行讨论.</p>
<p>(译: 如果你想对这个翻译项目提供帮助, 请看<a target="_blank" rel="noopener" href="https://github.com/leisurelicht/wtfpython-cn/blob/master/CONTRIBUTING.md">这里</a>)</p>
<h1 id="Acknowledgements-致谢"><a href="#Acknowledgements-致谢" class="headerlink" title="Acknowledgements&#x2F;致谢"></a>Acknowledgements&#x2F;致谢</h1><p>这个系列最初的想法和设计灵感来自于 Denys Dovhan 的项目 <a target="_blank" rel="noopener" href="https://github.com/denysdovhan/wtfjs">wtfjs</a>. 社区的强大支持让它成长为现在的模样.</p>
<h4 id="Some-nice-Links-一些不错的资源"><a href="#Some-nice-Links-一些不错的资源" class="headerlink" title="Some nice Links!&#x2F;一些不错的资源"></a>Some nice Links!&#x2F;一些不错的资源</h4><ul>
<li><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=sH4XF6pKKmk">https://www.youtube.com/watch?v=sH4XF6pKKmk</a></li>
<li><a target="_blank" rel="noopener" href="https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python">https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python</a></li>
<li><a target="_blank" rel="noopener" href="https://sopython.com/wiki/Common_Gotchas_In_Python">https://sopython.com/wiki/Common_Gotchas_In_Python</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines">https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1011431/common-pitfalls-in-python">https://stackoverflow.com/questions/1011431/common-pitfalls-in-python</a></li>
<li><a target="_blank" rel="noopener" href="https://www.python.org/doc/humor/">https://www.python.org/doc/humor/</a></li>
<li><a target="_blank" rel="noopener" href="https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65">https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65</a></li>
</ul>
<h1 id="🎓-License-许可"><a href="#🎓-License-许可" class="headerlink" title="🎓 License&#x2F;许可"></a>🎓 License&#x2F;许可</h1><p><a target="_blank" rel="noopener" href="http://www.wtfpl.net/"><img src="https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square" alt="CC 4.0"></a></p>
<p>&copy; <a target="_blank" rel="noopener" href="https://satwikkansal.xyz/">Satwik Kansal</a></p>
<h2 id="Help-帮助"><a href="#Help-帮助" class="headerlink" title="Help&#x2F;帮助"></a>Help&#x2F;帮助</h2><p>如果您有任何想法或建议，欢迎分享.</p>
<h2 id="Surprise-your-geeky-pythonist-friends-想给你的极客朋友一个惊喜"><a href="#Surprise-your-geeky-pythonist-friends-想给你的极客朋友一个惊喜" class="headerlink" title="Surprise your geeky pythonist friends?&#x2F;想给你的极客朋友一个惊喜?"></a>Surprise your geeky pythonist friends?&#x2F;想给你的极客朋友一个惊喜?</h2><p>您可以使用这些快链向 Twitter 和 Linkedin 上的朋友推荐 wtfpython,</p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?url=https://github.com/satwikkansal/wtfpython&hastags=python,wtfpython">Twitter</a><br> | <a target="_blank" rel="noopener" href="https://www.linkedin.com/shareArticle?url=https://github.com/satwikkansal&title=What%20the%20f*ck%20Python!&summary=An%20interesting%20collection%20of%20subtle%20and%20tricky%20Python%20snippets.">Linkedin</a></p>
<h2 id="Need-a-pdf-version-需要来一份pdf版的"><a href="#Need-a-pdf-version-需要来一份pdf版的" class="headerlink" title="Need a pdf version?&#x2F;需要来一份pdf版的?"></a>Need a pdf version?&#x2F;需要来一份pdf版的?</h2><p>你可以快速在<a target="_blank" rel="noopener" href="https://form.jotform.com/221593245656057">这</a>获得英文作者制作的版本.</p>
<h2 id="Follow-Commit-追踪Commit"><a href="#Follow-Commit-追踪Commit" class="headerlink" title="Follow Commit&#x2F;追踪Commit"></a>Follow Commit&#x2F;追踪Commit</h2><p>这是中文版 fork 时所处的原库 Commit, 当原库更新时我会跟随更新.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/satwikkansal/wtfpython/commit/19d4b075152d93e5bc75c5d08279338a895cfa27"><img src="https://img.shields.io/badge/Commit-19d4b0-yellow.svg" alt="Commit id"></a></p>

      
       
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">💰</a>
</p>






    




    </div>
    <div class="copyright">
        <p class="footer-entry"><span class="miit">
                <img src="/img/gov.png" title="中华人民共和国工业和信息化部">
                <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">豫ICP备2021025932号-1</a>
        </span>
    
    ©2016-2020 Yelog
</p>
<!-- <p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p> -->

    </div>
    <div class="full-toc">
        <button class="full" data-title="Toggle full screen shortcut key s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
    #post .pjax article :not(pre) > code {
        color: #24292e;
        font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
        background-color: rgba(27,31,35,.05);
        border-radius: 3px;
        font-size: 85%;
        margin: 0;
        padding: .2em .4em;
    }
    
</style>







</html>
